<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terras de Calisto - RPG</title>
  <link rel="stylesheet" href="style.css">

  <!-- Ícone do navegador -->
  <link rel="icon" href="/imagens/logo.png" type="image/png">

  <!-- Canonical -->
  <link rel="canonical" href="https://terras-de-calisto-ficha-rpg.netlify.app/">

  <!-- Primary Meta Tags -->
  <meta name="title" content="Terras de Calisto - RPG">
  <meta name="description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore histórias épicas e mergulhe em aventuras inesquecíveis no nosso RPG.">
  <meta name="keywords" content="RPG, Terras de Calisto, ficha RPG, aventuras, fantasia, role-playing game">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://terras-de-calisto-ficha-rpg.netlify.app/">
  <meta property="og:title" content="Terras de Calisto - RPG">
  <meta property="og:description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore histórias épicas e mergulhe em aventuras inesquecíveis no nosso RPG.">
  <meta property="og:image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">

  <!-- Google-specific -->
  <meta itemprop="name" content="Terras de Calisto RPG">
  <meta itemprop="description" content="Descubra o mundo de Terras de Calisto. Crie personagens e explore aventuras incríveis no RPG de fantasia.">
  <meta itemprop="image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://terras-de-calisto-ficha-rpg.netlify.app/">
  <meta name="twitter:title" content="Terras de Calisto - RPG">
  <meta name="twitter:description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore histórias épicas e mergulhe em aventuras inesquecíveis no nosso RPG.">
  <meta name="twitter:image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">
</head>


<body>
          <header>
          <nav class="nav-bar">
            <div class="logo">
              <a href="https://terrasdecalistoficha.wordpress.com/" target="_blank">
                  <img src="imagens/logo.png" alt="Logo Terras de Calisto">
              </a>
          </div>
          <div id="side-menu" class="side-menu">
            <!-- Botão para resetar perícias (exemplo simples) -->

            <ul>
              <button class="close-button" onclick="toggleMenu()">Fechar</button> <!-- Botão de Fechar -->
<!-- mudança de menu de vida atual e status e os carai virouuuuuuuuuu periciasss-->

<div class="container-centralizado">
  <!--<h1>Perícias</h1> -->
  <p class="descrição_pericias">
    
    <strong>Perícias, Talentos e Armas (P.T.A.) </strong>
    
    <p>Escolha três P.T.A. para receber um bônus de <span id="pta-bonus-value">+2</span>.</p>
    <p>Além disso, pode adicionar <span id="past-bonus-value">+2</span> às perícias concedidas pelo seu passado ou raça.</p>
    <div id="character-info-section-1" style="margin: 0px 0;">
      <button class="toggle-button2" onclick="toggleSectionInfo('expandableSectionInfo1')" 
        style="background-color: red; color: white; padding: 4px 10px; border: none; border-radius: 8px; font-size: 12px; cursor: pointer;">
        Importante!
      </button><button id="resetSkillsButton">Resetar Perícias</button>

    
      <div id="expandableSectionInfo1" style="display: none; margin-top: 15px; background-color: #555151; padding: 20px; border-radius: 10px; border: 1px solid #292727;">
        <h1 class="descrição_pericias" style="font-size: 11px;">
          <strong>Observação:</strong>
          <p>
            Cada talento escolhido concede +2 nos testes relacionados à perícia. Alguns talentos também desbloqueiam o uso de certos tipos de equipamento. Caso o personagem tente usar um equipamento sem o talento correspondente, ele sofre desvantagem nos testes de acerto.
          </p>
        </h1>
      </div>
    </div>
    
      </p>
  <div class="pericias_arrumado">
    <div class="pericias">
      <div class="pericia" data-name="Espadas" data-requirement="Brutalidade" data-description="Desbloqueia o uso de: Espada curta, Florete, Punhal, Adaga, Espada longa, Espada bastarda, Espadão, Claymore, Cimitarra e Sabre.">
        <p>Espadas</p>
       <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Brutalidade</span>
        <span class="description">Desbloqueia o uso de: Espada curta, Florete, Punhal, Adaga, Espada longa, Espada bastarda, Espadão, Claymore, Cimitarra e Sabre.</span>
      </div>
      
      <div class="pericia" data-name="Machados e Martelos" data-requirement="Brutalidade" data-description="Desbloqueia o uso de: Machado de batalha, Machado de guerra, Machado de arremesso, Martelo de guerra, Maça, Clava simples, Clava com espinhos e Mangual.">
        <p>Machados e Martelos</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Brutalidade</span>
        <span class="description">Desbloqueia o uso de: Machado de batalha, Machado de guerra, Machado de arremesso, Martelo de guerra, Maça, Clava simples, Clava com espinhos e Mangual.</span>
      </div>
      
      <div class="pericia" data-name="Lanças e Armas com Haste" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Lança curta, Lança longa, Pique, Alabarda, Dardo e Javelin.">
        <p>Lanças e Armas com Haste</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Lança curta, Lança longa, Pique, Alabarda, Dardo e Javelin.</span>
      </div>
      
      <div class="pericia" data-name="Arcos e Bestas" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Arco curto, Arco longo, Arco recurvo, Arco composto, Besta de mão, Besta leve e Besta pesada.">
        <p>Arcos e Bestas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Arco curto, Arco longo, Arco recurvo, Arco composto, Besta de mão, Besta leve e Besta pesada.</span>
      </div>
      
      <div class="pericia" data-name="Katanas" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Katanas, Ninja-tos, Tantos, Nodachis e Nagamakis.">
        <p>Katanas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Katanas, Ninja-tos, Tantos, Nodachis e Nagamakis.</span>
      </div>
      
      <div class="pericia" data-name="Fundas e Estilingues" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Funda e Estilingue.">
        <p>Fundas e Estilingues</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Funda e Estilingue.</span>
      </div>
      
      <div class="pericia" data-name="Armas Exóticas e Diversas" data-requirement="Libertação" data-description="Desbloqueia o uso de: Nunchaku, Kusarigama, Kama, Tessen, Shuriken e Kunai.">
        <p>Armas Exóticas e Diversas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Libertação</span>
        <span class="description">Desbloqueia o uso de: Nunchaku, Kusarigama, Kama, Tessen, Shuriken e Kunai.</span>
      </div>
      
      <div class="pericia" data-name="Armas de Cerco" data-requirement="Libertação" data-description="Desbloqueia o uso de: Catapulta, Balista, Trebuchet e Ariete.">
        <p>Armas de Cerco</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Libertação</span>
        <span class="description">Desbloqueia o uso de: Catapulta, Balista, Trebuchet e Ariete.</span>
      </div>
      
      <div class="pericia" data-name="Escudos" data-requirement="Determinação" data-description="Desbloqueia o uso de: Broquel, Escudo redondo, Escudo de torre e Pavês.">
        <p>Escudos</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Determinação</span>
        <span class="description">Desbloqueia o uso de: Broquel, Escudo redondo, Escudo de torre e Pavês.</span>
      </div>
      



    </div>



    </div>
 <div class="pericias_arrumado">
  <div class="pericias">
    <div class="pericia" data-name="Acrobacia" data-requirement="Agilidade" data-description="Usada para realizar manobras acrobáticas, como saltos, piruetas e manobras evasivas durante o combate.">
        <p>Acrobacia</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement"></span>
        <span class="description"></span>
    </div>
    <div class="pericia" data-name="Adestrar Animais" data-requirement="Conexão" data-description="Permite treinar e controlar animais, além de melhorar a interação com criaturas.">
        <p>Adestrar Animais</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement"></span>
        <span class="description"></span>
    </div>
    <div class="pericia" data-name="Atletismo" data-requirement="Brutalidade" data-description="Foca em atividades físicas intensas, como correr, nadar, escalar ou realizar feitos de força.">
      <p>Atletismo</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Atuação" data-requirement="Conexão" data-description="Envolve a habilidade de entreter uma audiência através de performances artísticas como canto, dança, música ou atuação.">
      <p>Atuação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Cavalgar" data-requirement="Agilidade" data-description="Permite ao personagem montar e controlar animais de montaria com eficiência, tanto em viagens quanto em combate.">
      <p>Cavalgar</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Conhecimento" data-requirement="Preservação" data-description="Reflete a erudição do personagem em diversas áreas, como história, geografia, religião, arcana e outras ciências.">
      <p>Conhecimento</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Cura" data-requirement="Libertação" data-description="Permite ao personagem prestar primeiros socorros, tratar ferimentos e doenças, e utilizar equipamentos médicos de forma eficaz.">
      <p>Cura</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Diplomacia" data-requirement="Conexão" data-description="Habilidade de negociar, fazer acordos e influenciar outras pessoas de maneira amigável e persuasiva.">
      <p>Diplomacia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Enganação" data-requirement="Conexão" data-description="Usada para mentir, blefar ou enganar outros, seja em conversas, jogos de azar, ou outras situações sociais.">
      <p>Enganação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Furtividade" data-requirement="Agilidade" data-description="Habilidade de se mover sem ser percebido, seja para evitar inimigos, realizar ataques furtivos ou se infiltrar em áreas protegidas.">
      <p>Furtividade</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Identificar Magia" data-requirement="Preservação" data-description="Permite ao personagem analisar e identificar magias, itens mágicos e encantamentos.">
      <p>Identificar Magia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Iniciativa" data-requirement="Agilidade" data-description="Determina a rapidez do personagem em reagir em situações de combate, permitindo agir antes de seus oponentes.">
      <p>Iniciativa</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Intimidação" data-requirement="Conexão" data-description="Capacidade de forçar ou coagir outros através de ameaças, postura dominante ou demonstrações de poder.">
      <p>Intimidação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Intuição" data-requirement="Libertação" data-description="Permite ao personagem perceber intenções escondidas, emoções ou mentiras através da observação cuidadosa.">
      <p>Intuição</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Jogatina" data-requirement="Conexão" data-description="Habilidade de participar e vencer jogos de azar, além de manipular as regras e enganar outros jogadores.">
      <p>Jogatina</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Ladinagem" data-requirement="Agilidade" data-description="Habilidade de realizar atos ilícitos, como abrir fechaduras, desarmar armadilhas e roubar objetos discretamente.">
      <p>Ladinagem</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Obter Informação" data-requirement="Conexão" data-description="Capacidade de extrair informações de forma sutil ou direta, seja por conversas casuais ou por interrogatórios.">
      <p>Obter Informação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Ofício" data-requirement="Preservação" data-description="Reflete a habilidade em profissões e artesanato, como forja, carpintaria, alquimia, entre outras.">
      <p>Ofício</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Percepção" data-requirement="Libertação" data-description="Capacidade de notar detalhes ao seu redor, como sons, cheiros e movimentos sutis, permitindo detectar perigos ou oportunidades ocultas.">
      <p>Percepção</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Sobrevivência" data-requirement="Determinação" data-description="Habilidade de viver em ambientes hostis, caçar, encontrar comida, rastrear criaturas e se orientar na natureza.">
      <p>Sobrevivência</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Alquimia" data-requirement="Preservação" data-description="Habilidade de misturar ingredientes para criar poções, elixires e outros itens alquímicos. Inclui o conhecimento sobre reagentes, catalisadores e processos químicos mágicos.">
      <p>Alquimia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Armadilhas" data-requirement="Agilidade" data-description="Capacidade de criar, detectar e desarmar armadilhas, tanto mecânicas quanto mágicas. Inclui o uso de ferramentas específicas e truques de sabotagem.">
    <p>Armadilhas</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Arquearia/Atirar" data-requirement="Agilidade" data-description="Maestria no uso de armas de fogo,arcos e bestas, tanto para combate quanto para caça. Inclui a precisão no disparo e o conhecimento sobre tipos de flechas, munições e suas aplicações.">
    <p>Arquearia/Atirar</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Disfarces" data-requirement="Conexão" data-description="Habilidade de se passar por outra pessoa através de mudanças na aparência, voz e comportamento. Inclui o uso de roupas, maquiagem e acessórios.">
    <p>Disfarces</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escudaria" data-requirement="Brutalidade" data-description="Uso especializado de escudos em combate, tanto para bloquear ataques quanto para desferir golpes. Inclui técnicas de defesa e contra-ataque.">
    <p>Escudaria</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escavação" data-requirement="Determinação" data-description="Habilidade de minerar e escavar em terrenos difíceis, encontrando materiais valiosos ou abrindo caminho através de obstáculos naturais.">
    <p>Escavação</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Liderança" data-requirement="Conexão" data-description="Capacidade de comandar, inspirar e coordenar grupos em combate ou em outras situações complexas. Inclui estratégias de batalha e organização de equipes.">
    <p>Liderança</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Navegação" data-requirement="Determinação" data-description="Habilidade de se orientar em mar aberto ou em grandes áreas desconhecidas, usando mapas, estrelas ou outros métodos para encontrar o caminho certo.">
    <p>Navegação</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Psicologia" data-requirement="Libertação" data-description="Capacidade de analisar e compreender o comportamento, emoções e motivações das pessoas, ajudando a prever ações e manipular suas emoções.">
    <p>Psicologia</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Tática" data-requirement="Preservação" data-description="Habilidade de planejar estratégias complexas para combates ou desafios, considerando os pontos fortes e fracos de aliados e inimigos.">
    <p>Tática</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Alfaiataria" data-requirement="Preservação" data-description="Habilidade de criar e consertar roupas e armaduras leves, adaptando vestimentas para diversas condições e estilos.">
    <p>Alfaiataria</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Arqueologia" data-requirement="Preservação" data-description="Conhecimento de civilizações antigas e a habilidade de encontrar, estudar e interpretar artefatos e ruínas históricas.">
    <p>Arqueologia</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Aprimoramento de Armas" data-requirement="Brutalidade" data-description="Capacidade de afiar, equilibrar e melhorar armas de combate, aumentando sua eficiência e durabilidade.">
    <p>Aprimoramento de Armas</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Carisma" data-requirement="Conexão" data-description="Habilidade natural de influenciar e atrair outras pessoas com charme, confiança e presença marcante, útil em situações sociais e negociações.">
    <p>Carisma</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Culinária" data-requirement="Preservação" data-description="Habilidade de preparar alimentos nutritivos e pratos elaborados, incluindo o uso de ingredientes raros para efeitos especiais, como regeneração ou resistência a venenos.">
    <p>Culinária</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Demolição" data-requirement="Brutalidade" data-description="Capacidade de destruir construções, desativar estruturas e usar explosivos ou outros meios para abrir caminho ou criar armadilhas.">
    <p>Demolição</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escalada" data-requirement="Agilidade" data-description="Habilidade de escalar superfícies difíceis, como penhascos, paredes ou estruturas, usando técnica, força e equipamentos adequados.">
    <p>Escalada</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Esgrima" data-requirement="Agilidade" data-description="Maestria no uso de espadas leves e técnicas rápidas de ataque e defesa, focando em precisão e agilidade durante o combate.">
    <p>Esgrima</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Herbalismo" data-requirement="Preservação" data-description="Conhecimento sobre plantas e ervas, sua coleta e uso para criar remédios, poções e venenos.">
    <p>Herbalismo</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Vigilância" data-requirement="Libertação" data-description="Habilidade de manter atenção constante em busca de ameaças ou eventos importantes, permitindo detectar perigos iminentes ou movimentos sutis à distância.">
    <p>Vigilância</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>
      
</div>
  


    <!-- Repita a estrutura acima para cada perícia -->
</div>

  

    <!-- Repita a estrutura para outras perícias -->
  </div>
</div>


          
<!-- mudança de menu de vida atual e status e os carai-->

              </div>
            </ul>
        </div>
              <div class="nav-list">
                  <ul>
                    <button class="toggle-button2" onclick="toggleMenu()">Talentos</button>
 
 <!-- Botão para abrir o popup -->
<button id="abrir-status-rpg" class="status-rpg-btn">Editar</button>

<!-- Popup -->
<div id="status-rpg-popup" class="status-rpg-popup oculto">
  <div class="status-rpg-popup-content">
    <span id="fechar-status-rpg" class="status-rpg-close">&times;</span>
    <div id="status-rpg-app"></div>
  </div>
</div>


                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/" class="nav-link" target="_blank">Wiki</a></li>
                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/racas/" class="nav-link" target="_blank">Raças</a></li>
                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/passados/" class="nav-link" target="_blank">Passados</a></li>
                    <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/magias/" class="nav-link" target="_blank">Magias</a></li>
                       <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/" class="nav-link" target="_blank">Passivas</a></li>
                                      <li class="nav-item"><a href="https://bestiario-terrasdecalisto.netlify.app/" class="nav-link" target="_blank">Bestiário</a></li>

 <!-- target="_blank" .....sempre colocar antes do >NOME_DO_LINK é para abrir em outra aba, uma nova aba, não esquecer-->
 <button onclick="menuShow()" class="button-menu">
  <img class="icon" src="imagens/menu.svg" alt="Menu">                      
</button>


              </div> 

                      
                  </ul>
                 
              </div>
<button id="abrirPopupRacaCustom" class="toggle-button-custom">Tokens</button>

<div id="popupRacaCustom" class="popup-overlay-custom">
  <div class="popup-content-custom" id="racaContentCustom"></div>
</div>

<div id="popupImagemRacaCustom" class="popup-overlay-custom">
  <div class="popup-content-custom" id="imagemRacaContentCustom"></div>
</div>
    </nav>
          </div>
          <div class="mobile-menu">

              <ul>
                                        <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/" class="nav-link" target="_blank">Wiki</a></li>

                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/racas/" class="nav-link" target="_blank">Raças</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/passados/" class="nav-link" target="_blank">Passados</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/magias/" class="nav-link" target="_blank">Magias</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/" class="nav-link" target="_blank">Passivas</a></li>
                <li class="nav-item"><a href="https://bestiario-terrasdecalisto.netlify.app/" class="nav-link" target="_blank">Bestiário</a></li>

                  <!-- target="_blank" .....sempre colocar antes do >NOME_DO_LINK é para abrir em outra aba, uma nova aba, não esquecer-->
                  </div>
                  <!-- talvez adicionar
              
              <div class="login-button">
                <button><a href="#">Entrar</a></button> -->

                
            </ul>
        </div>


    </nav>

 
</header>

<body>


  <div id="app">

<!-- Popup tutorial -->
<div id="tutorialPopup" class="popup">
  <div class="popup-content">
<div class="chess-button-container">
  <button id="closeTutorial" class="close" aria-label="Fechar tutorial">&times;</button>
  <button id="openChessPopup" class="chess-btn">Modo Chess</button>
</div>

    <div class="tutorial-flex">

      <div class="tutorial-section">
        <h2>1. Introdução</h2>
        <p>
          Terras de Calisto é um RPG de mesa de fantasia sombria onde os jogadores interpretam personagens em um mundo moldado pelas forças de <strong class="det">Fé</strong>, <strong class="pre">Caos</strong>, <strong class="lib">Poder</strong> e <strong class="cnx">Desconhecido</strong>.
        </p>
        <p>
          Os jogadores tomam decisões que afetam diretamente a narrativa, enquanto o Mestre de Jogo (GM) conduz os eventos, descreve os cenários e interpreta NPCs.
        </p>
        <img src="/imagens/mundo_calisto.png" alt="Mapa sombrio de Calisto com ícones dos quatro elementos" style="width:100%; border-radius:10px;">
      <a href="https://mapa-terras-de-calisto.netlify.app/"
   target="_blank" rel="noopener noreferrer"
   class="btn-mapa">🗺️ Abrir Mapa – Terras de Calisto</a>

<style>
  .btn-mapa{
    display:inline-block;
    padding:12px 18px;
    border-radius:12px;
    border:1px solid #ddd;
    background:#111;
    color:#fff;
    font:600 16px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    text-decoration:none;
    box-shadow:0 4px 12px rgba(0,0,0,.12);
    transition:transform .06s ease, box-shadow .2s ease, opacity .2s ease;
  }
  .btn-mapa:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.18); }
  .btn-mapa:active{ transform:translateY(0); opacity:.9; }
</style>

      </div>

      <div class="tutorial-section">
        <h2>2. Criação</h2>
        <p>Na criação do personagem, o jogador escolhe:</p>

          <li>Uma <strong class="grad-text">Raça</strong></li>
          <li>Um <strong class="grad-text">Passado</strong></li>
          <li>Um <strong class="grad-text">Equipamento Inicial</strong></li>
          <li><strong class="especial">+3 Talentos Extras</strong> (além dos que Raça e Passado concedem)</li>
          <li>Redistribui seus <strong class="grad-text">Atributos</strong></li>

<p>
  O personagem começa com todos os atributos em <span class="bru">14</span>, representando o nível 0.  
  Para iniciar, redistribua esses pontos, garantindo no mínimo <strong>8 em cada atributo</strong>.  
  Durante a redistribuição, o <strong>nível do personagem</strong> pode ser alterado; porém, se os pontos forem distribuídos corretamente, ele se manterá no nível inicial definido com o GM.
</p>

        <p>
          <strong><span class="bru">Brutalidade</span>, <span class="agi">Agilidade</span> e <span class="det">Determinação</span></strong> afetam mais a <span class="pv">Vida (PV)</span>, enquanto <strong><span class="pre">Preservação</span>, <span class="lib">Libertação</span> e <span class="cnx">Conexão</span></strong> influenciam a <span class="san">Sanidade (SAN)</span>.
        </p>
        <img src="/imagens/Atributos.png" alt="Distribuição de atributos do personagem" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>Atributos</h2>
        <div class="tutorial-flex">
         <div class="tutorial-section">
          <p><strong class="bru">Brutalidade (BRU)</strong> – <br>
            Força física e poder bruto em combate. Influencia a <span class="pv">Vida (PV)</span>.
          </p>
          <p><strong class="agi">Agilidade (AGI)</strong> – <br>
            Rapidez, reflexos e precisão em ataques e esquivas. Influencia a <span class="pv">Vida (PV)</span>.
          </p>
          <p><strong class="det">Determinação (DET)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="det">Fé</span></em><br>
            Resistência física e força de vontade. Afeta <span class="pv">PV</span> e defesa mental.
          </p>

          <p><strong class="pre">Preservação (PRE)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="pre">Caos</span></em><br>
            Conhecimento natural, alquimia e estratégias. Influencia a <span class="san">Sanidade (SAN)</span>.
          </p>
          <p><strong class="lib">Libertação (LIB)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="lib">Poder</span></em><br>
            Despertar mágico e percepção espiritual. Afeta magias e <span class="san">SAN</span>.
          </p>
          <p><strong class="cnx">Conexão (CNX)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="cnx">Desconhecido</span></em><br>
            Vínculo com entidades e carisma místico. Fortemente ligado à <span class="san">SAN</span>.
          </p>
        </div>
       </div>
      </div>

      <div class="tutorial-section">
        <h2>3. Combate</h2>
        <p>
          O combate acontece em turnos com ordem definida por Iniciativa (D20). No turno, o jogador pode realizar:
        </p>
        <p><strong>Ação Livre:</strong> Usar passiva, falar, sacar arma etc.</p>
        <p><strong>Ação de Movimento:</strong> Caminhar.</p>
        <p><strong>Ação Completa:</strong> Atacar, lançar magia.</p>
        <p>
          A rolagem de ações usa 1D20 + modificador de atributo contra uma <strong>Dificuldade Temporária (DT)</strong>, gerada por uma rolagem do oponente.
        </p>
        <h3>Exemplo de ataque</h3>
<p>
  Para atacar, o jogador rola <strong>1D20 + bônus de teste</strong> de ataque.  
  Se o resultado for igual ou superior à <strong>DT</strong> do alvo, o ataque acerta.  
  Ao acertar, o dano é determinado pelo tipo de arma ou magia usada, somando os <strong>bônus de dano</strong> adequados.
</p>

<p>
  Exemplo: Uma espada pode causar <strong>1D8 de dano + bônus de dano de</strong> <span class="bru">Brutalidade</span>.
</p>


        <img src="/imagens/batalha_combate.png" alt="Cena de batalha entre personagens e criaturas" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>4. Opções de Reação</h2>
        <p>
          No combate, além da ação principal, o personagem pode reagir de formas específicas ao ataque inimigo:
        </p>
<p>
  <strong>Esquivar:</strong> Para evitar um ataque, role <strong>1D20 + bônus de teste</strong> adequado ao atributo indicado pela habilidade, magia ou passiva (pode ser qualquer um dos seis atributos).  
  Se o resultado for maior que o valor do ataque inimigo, o personagem esquiva com sucesso e não sofre dano.
</p>


      <p>
  <strong>Defender:</strong> O personagem pode entrar em postura defensiva, somando o valor da armadura mais os <strong>bônus de teste</strong> de <em class="det">Determinação</em> e <em class="bru">Brutalidade</em>.  
  Este valor é somado à defesa para resistir ao dano do inimigo, reduzindo o dano recebido.
</p>

<p>
  <strong>Contra-atacar:</strong> O personagem pode declarar um contra-ataque como reação <strong>antes do inimigo rolar para acertar</strong>.  
  Caso o ataque inimigo não supere a armadura do personagem (já considerando os bônus de teste de defesa), ele pode realizar um contra-ataque imediatamente.  
  Esta reação é gratuita e não consome a ação do turno.
</p>


      </div>

      <div class="tutorial-section">
        <h2>5. Magia e Passivas</h2>
<p>
  Magias usam <strong class="san">Sanidade (SAN)</strong> como recurso. O jogador rola <strong>D20</strong> + o <strong>bônus de teste</strong> do atributo da magia, que pode ser <span class="pre">Preservação</span>, <span class="lib">Libertação</span>, <span class="cnx">Conexão</span>, <span class="det">Determinação</span>, <span class="bru">Brutalidade</span>, <span class="agi">Agilidade</span> ou outro permitido pela magia.  
  Caso a rolagem passe na <strong>DT</strong>, o efeito da magia é ativado.
</p>


        <p>
          Passivas usam <strong class="especial">Especial e Sanidade</strong> como recurso. São habilidades ativadas automaticamente e não consomem ação. O personagem pode ter até <strong class="especial">4 passivas</strong> ativas ao mesmo tempo (uma de cada elemento).
        </p>
        <img src="/imagens/efeito_magia_passiva.png" alt="Personagem ativando magia com aura" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>6. Exploração</h2>
        <p>
          O GM narra o ambiente e os jogadores podem investigar, interagir com NPCs, desarmar armadilhas e encontrar itens escondidos.
          Testes de atributos e perícias como <strong>Percepção, Diplomacia, Furtividade</strong> e outras são utilizados para definir o sucesso.
        </p>
        <img src="/imagens/exploracao_npc.png" alt="Aventureiros falando com NPCs em dungeon ou aldeia" style="width:100%; border-radius:10px;">
     
      </div>

      <div class="tutorial-section">
        <h2>7. Evolução</h2>
        <p>
          Os personagens ganham <strong class="especial">pontos de experiência (XP)</strong> ao completar missões, derrotar inimigos ou alcançar marcos na história. A quantidade de XP concedida varia conforme a dificuldade do desafio.
        </p>
        <p><strong>XP por Tipo de Desafio:</strong></p>
        <p>Fáceis: 50–75 XP<br>
           Moderados: 100–150 XP<br>
           Difíceis: 200–300 XP<br>
           Muito Difíceis: 400–500 XP<br>
           Épicos: 1.000+ XP
        </p>
        <p>XP bônus pode ser concedido por conquistas extraordinárias.</p>
        <p>
          Cada 100 XP acumulados equivalem a 1 ponto de nível, que pode ser distribuído para aumentar os atributos do personagem:
        </p>
        <p><strong>Atributos:</strong></p>
        <p>
          <span class="bru">Brutalidade (BRU)</span><br>
          <span class="agi">Agilidade (AGI)</span><br>
          <span class="det">Determinação (DET)</span><br>
          <span class="pre">Preservação (PRE)</span><br>
          <span class="lib">Libertação (LIB)</span><br>
          <span class="cnx">Conexão (CNX)</span>
        </p>
        <p>
          <strong>Exemplo:</strong> Com 300 XP, o personagem ganha 3 pontos de nível para distribuir entre os atributos como desejar (por exemplo, +1 em <span class="bru">Brutalidade</span>, +1 em <span class="agi">Agilidade</span> e +1 em <span class="det">Determinação</span>).
        </p>
        <img src="/imagens/evolucao_nivel.png" alt="Evolução do personagem com XP e atributos" style="width:100%; border-radius:10px;">


      </div>
<div class="tutorial-section">
  <h2>8. Mecânicas de Influência por Afiliação</h2>
  <p>
    Essas mecânicas representam forças maiores que moldam o mundo de <strong>Calisto</strong>. Elas são ativadas em combates especiais contra criaturas alinhadas aos quatro princípios cósmicos: <span class="cnx">Desconhecido</span>, <span class="pre">Caos</span>, <span class="lib">Poder</span> e <span class="det">Fé</span>.
  </p>
  <p>
    Cada uma oferece <strong>regras específicas para o Mestre</strong>, permitindo alterar o cenário, aplicar bônus às criaturas e gerar consequências diretas a partir das escolhas dos jogadores.
  </p>

  <h3 class="cnx">✴️ 1. Ressonância do Desconhecido</h3>
  <p><em>Ativa quando magias ou habilidades sobrenaturais são usadas.</em></p>
    <li>Vantagem em testes para criaturas do Desconhecido (ataque, esquiva, resistência).</li>
    <li>+1 de Armadura Temporária por rodada.</li>
    <li>Resistência contra dano <strong>mental, alma</strong> ou <strong>distorção</strong>.</li>
    <li>1 Ação fora do turno a cada 3 rodadas.</li>
    <li><strong>Distúrbios de Realidade:</strong> salas duplicadas, tempo distorcido, sombras vivas.</li>
  <p><strong>Nota de jogo:</strong> O mundo parece se dobrar ao medo e à magia. Criaturas agem como se já soubessem o futuro.</p>

  <h3 class="pre">🔥 2. Degradação do Caos</h3>
  <p><em>Ativa quando a natureza ou o ambiente são destruídos.</em></p>
    <li>+1 ponto de Degradação ao queimar, poluir ou usar magias destrutivas.</li>
    <li>Cada ponto: +2 de dano físico e +1 de dano elemental para inimigos.</li>
    <li>A cada 2 turnos em terreno degradado: +1 de Armadura.</li>
    <li>Imunidade a medo e controle mental.</li>
    <li>Mutações grotescas: garras, braços extras, pele de pedra.</li>
    <li>Aliados do ambiente podem surgir como reforços.</li>
  <p><strong>Nota de jogo:</strong> A natureza se revolta, e os inimigos se tornam partes vivas da destruição causada pelo grupo.</p>

  <h3 class="lib">💠 3. Acúmulo de Poder Proibido</h3>
  <p><em>Ativa ao usar magias e habilidades do tipo Poder.</em></p>
  <p>O Mestre acompanha um contador de 1 a 12. A cada 2 pontos:</p>
    <li><strong>Nível 2:</strong> +1 dano físico para aliados.</li>
    <li><strong>Nível 4:</strong> +2 dano elemental.</li>
    <li><strong>Nível 6:</strong> 1 reação extra por aliado.</li>
    <li><strong>Nível 8:</strong> +2 de Armadura Temporária e +1 resistência mágica.</li>
    <li><strong>Nível 10:</strong> Vantagem em testes mágicos ofensivos e defensivos.</li>
    <li><strong>Nível 12:</strong> Invocação de uma criatura do Mundo dos Mortos. Ela ataca todos.</li>
  <p><strong>Nota de jogo:</strong> O grupo se sente cada vez mais poderoso — até perder o controle. O Mestre pode sugerir isso com olhos brilhantes, tremores ou efeitos no chão.</p>

  <h3 class="det">✝️ 4. Discórdia das Fés</h3>
  <p><em>Ativa quando magias de fé contrária à região são utilizadas.</em></p>
    <li>Magias da fé local: Vantagem em testes, +2 e duração/área aumentadas.</li>
    <li>Magias de fés opostas: +1 no contador de Discórdia.</li>
    <li>No limite de Discórdia, o mestre escolhe:</li>
  <ul>
  <p>♦  Manifestação de uma entidade sagrada que castiga o grupo.</P>
      <P>♦  Ou invocação de uma criatura do Desconhecido ou do Poder como punição.</P>
</ul>    
  <p><strong>Nota de jogo:</strong> Objetos sagrados reagem, ambientes brilham ou escurecem. Mesmo sem saber a fé da região, o grupo sentirá os sinais.</p>

  <h3>💡 Resumo para o Mestre</h3>
  <table style="width:100%; text-align:left; border-collapse: collapse;">
    <thead>
      <tr style="background-color:#333; color:#fff;">
        <th style="padding: 8px;">Afiliação</th>
        <th style="padding: 8px;">Quando ativa?</th>
        <th style="padding: 8px;">Efeitos para o Mestre</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="padding: 8px;"><span class="cnx">Desconhecido</span></td>
        <td style="padding: 8px;">Uso de magias ou habilidades sobrenaturais</td>
        <td style="padding: 8px;">Altera o cenário, concede bônus às criaturas</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="pre">Caos</span></td>
        <td style="padding: 8px;">Destruição da natureza e uso excessivo de elementos</td>
        <td style="padding: 8px;">Buffs progressivos, mutações e reforços do ambiente</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="lib">Poder</span></td>
        <td style="padding: 8px;">Uso contínuo de magias do tipo Poder</td>
        <td style="padding: 8px;">Grupo ganha bônus temporários até invocar criatura hostil</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="det">Fé</span></td>
        <td style="padding: 8px;">Usar magias contrárias à fé da região</td>
        <td style="padding: 8px;">Cria Discórdia até surgir punição divina ou profana</td>
      </tr>
    </tbody>
  </table>

  <img src="/imagens/afiliacoes_rituais.png" alt="Rituais mágicos e afiliações de Calisto" style="width:100%; border-radius:10px; margin-top:10px;">
</div>

<!-- POPUP MODO CHESS -->
<div id="chessTutorialPopup" class="chess-popup" style="display: none;">
  <div class="chess-popup-content" id="chessPopupContent">
    <span id="closeChessPopup" class="chess-popup-close">&times;</span>
    <div class="chess-popup-flex">

      <!-- SEÇÃO 1 -->
      <div class="chess-popup-section">
        <h2>1. O que é o Modo Chess?</h2>
        <p>
          O <strong>Modo Chess</strong> é uma variação de xadrez baseada em <strong>Roleplay Tático</strong>, onde cada peça representa uma <strong>criatura do Bestiário de Terras de Calisto</strong>.
        </p>
        <ul>
          <li>O combate segue as regras clássicas de Terras de Calisto.</li>
          <li>Magias, habilidades e reações funcionam apenas durante o combate.</li>
          <li>Cada peça possui <strong>pontos de vida próprios</strong>:</li>
        </ul>
          <li><strong>Peão:</strong> 20 de vida</li>
          <li><strong>Torre:</strong> 35 de vida</li>
          <li><strong>Bispo:</strong> 30 de vida</li>
          <li><strong>Cavalo:</strong> 25 de vida</li>
          <li><strong>Rainha:</strong> 50 de vida</li>
          <li><strong>Rei:</strong> 1 de vida (se for morto, a partida termina)</li>
        <p>
          O jogador pode substituir qualquer peça por seu <strong>personagem jogável</strong>, mantendo a vida padrão da posição. Cada lado pode ser controlado por jogadores ou pelo mestre.
        </p>
        <p><a href="https://bestiario-terrasdecalisto.netlify.app/" target="_blank">Acesse o Bestiário</a> para escolher sua criatura.</p>
        <img src="/imagens/exemplo_tabuleiro.png" alt="Exemplo de Tabuleiro" class="chess-img">
      </div>

<!-- SEÇÃO 2 -->
<div class="chess-popup-section">
  <h2>2. Combate e Check</h2>
  <p>
    Quando <strong>duas ou mais peças</strong> (até o limite de <strong>4 por quadrado</strong>) se encontram no mesmo espaço,
    inicia-se um combate por turnos.
  </p>
  <li>O combate utiliza o sistema de Terras de Calisto (turnos, reações, atributos).</li>
  <li>O jogador pode realizar até 3 reações por turno (ex: esquiva, bloqueio, contra-ataque).</li>
  <li>Check (xeque) continua funcionando como no xadrez tradicional.</li>
  <li>Checkmate (xeque-mate) não encerra o jogo: o Rei deve fugir ou outra peça deve intervir no combate.</li>
  <li>A eliminação do Rei em combate é a única forma de vitória.</li>
  <img src="/imagens/exemplo_combate.png" alt="Exemplo de Combate" class="chess-img">
</div>

      <!-- SEÇÃO 3 -->
      <div class="chess-popup-section">
        <h2>3. Estratégia e Customização</h2>
        <p>
          Cada criatura do Bestiário possui <strong>habilidades únicas</strong>, magias e características de combate. Algumas podem se mover por teleporte ou usar efeitos fora do combate, conforme suas passivas.
        </p>
          <li>Apenas <strong>teleporte e habilidades passivas</strong> funcionam fora do combate.</li>
          <li>Você pode montar times com criaturas temáticas, facções ou aliados da história.</li>
          <li>O jogo pode ser PvP entre jogadores, PvM com mestre ou misto.</li>
        <img src="/imagens/exemplo_criatura.png" alt="Exemplo de Criatura" class="chess-img">
      </div>

    </div>
  </div>
</div>

<!-- POPUP COMBATE SECUNDÁRIO -->
<div id="combatPopup" class="chess-popup" style="display: none;">
  <div class="chess-popup-content">
    <span id="closeCombatPopup" class="chess-popup-close">&times;</span>
    <h2>Regras de Combate (Modo Chess)</h2>
    <p>Durante o combate entre peças ou personagens:</p>
    <ul>
      <li><strong>Iniciativa:</strong> Cada peça joga 1d20 para determinar a ordem de ação.</li>
      <li><strong>Ataques:</strong> Baseados nos atributos da criatura (ex: Brutalidade + 1d20 contra DT).</li>
      <li><strong>Reações:</strong> Até 3 por turno (esquiva, contra-ataque, defesa).</li>
      <li><strong>Condições especiais:</strong> queimando, paralisado, amaldiçoado, etc., conforme magias e efeitos do Bestiário.</li>
      <li><strong>Eliminação:</strong> Ao chegar a 0 de vida, a peça é removida do tabuleiro.</li>
    </ul>
    <p>Consulte as <a href="https://terrasdecalistoficha.wordpress.com/como-jogar/" target="_blank">Regras Completas</a> para detalhes sobre reações, atributos e testes.</p>
  </div>
</div>

    </div>
  </div>
</div>



<!-- Botão fixo para abrir tutorial -->
<button id="openTutorialButton">Tutorial</button>

    
    <!-- Seção da esquerda -->
<div id="left-section">
  <div class="status-externo">
    <div class="status-bar">
      <div id="life-fill" class="fill"></div>
      <div id="life-temp-fill" class="temp-fill"></div> <!-- Barra Temporária -->
      <span id="life-view">0 / 0</span>
    </div>
  </div>
  
  <div class="status-externo">
    <div class="status-bar">
      <div id="sanity-fill" class="fill"></div>
      <div id="sanity-temp-fill" class="temp-fill"></div> <!-- Barra Temporária -->
      <span id="sanity-view">0 / 0</span>
    </div>
  </div>
  
  <div class="status-externo">
    <div class="status-bar">
      <div id="special-fill" class="fill"></div>
      <div id="special-temp-fill" class="temp-fill"></div> <!-- Barra Temporária -->
      <span id="special-view">0 / 0</span>
    </div>
  </div>
  



  
<div id="character-stats">
  

          <div class="stats-wrapper">
            <div class="stat-container">
              <span>Armor: <span id="armor-view">0</span></span>
            </div>
            <div class="stat-container">
              <span>Mov: <span id="movement-view">0</span></span>
            </div>
            <div class="stat-container">
              <span>Nível: <span id="level-view">0</span></span>
            </div>
          </div>
          <!-- Nome -->
<!-- Nome (100% largura com label alinhado ao input) -->
<link href="https://fonts.googleapis.com/css2?family=Caveat&display=swap" rel="stylesheet">

<div style="display: flex; align-items: center; margin-bottom: 15px;">
  <label for="char-name" style="font-size: 1.8em; margin-right: 12px; color: #444; min-width: 70px; font-family: 'Caveat', cursive;">
    Nome:
  </label>
  <input type="text" id="char-name" name="char-name" required
         style="flex: 1; padding: 1px 10px; font-size: 2em;
                border: none; border-bottom: 2px solid #888;
                background-color: transparent;
                outline: none; transition: border-color 0.3s;
                font-family: 'Caveat', cursive;">
</div>

<style>
  #char-name:focus {
    border-bottom: 2px solid #0077cc;
  }
</style>

<!-- Raça e Passado (lado a lado no PC, empilhados no mobile) -->
<div style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: nowrap;">

  <!-- Raça -->
  <div style="flex: 1; min-width: 0; display: flex; flex-direction: column;">
    <label for="race" style="font-size: 14px; margin-bottom: 4px; color: rgb(255, 72, 0);">Raça:</label>
    <select id="race" name="race" required
            style="padding: 6px 8px; font-size: 14px; border: 1px solid #aaa; border-radius: 5px; width: 100%;">
      <option value="">Selecione a Raça</option>
      <option value="Elfo">Lyrithil – Elfo</option>
      <option value="Humano">Zhilak – Humano</option>
      <option value="Anão">Grunthrok – Anão</option>
      <option value="Gigante">Thudrok – Gigante</option>
      <option value="Krahzhik">Krahzhik – IgnisAlatus</option>
      <option value="Skywalker">Skywalkers – Flumplux</option>
      <option value="Umbrowalker – Shlurp">Umbrowalker – Shlurp</option>
      <option value="Elfo da profundeza">Glublorp – Elfo da profundeza</option>
      <option value="Tritão">Glubrust – Tritão</option>
      <option value="Shrivvel – Pele Palida">Shrivvel – Pele Palida</option>
      <option value="Gronklech – Durock">Gronklech – Durock</option>
    </select>
  </div>

  <!-- Passado -->
  <div style="flex: 1; min-width: 0; display: flex; flex-direction: column;">
    <label for="past" style="font-size: 14px; margin-bottom: 4px; color: red;">Passado:</label>
    <select id="past" name="past" required
            style="padding: 6px 8px; font-size: 14px; border: 1px solid #aaa; border-radius: 5px; width: 100%;">
      <option value="">Selecione o Passado</option>
      <option value="Aldeão">Aldeão</option>
      <option value="Arauto">Arauto</option>
      <option value="Arqueiro">Arqueiro</option>
      <option value="Assassino">Assassino</option>
      <option value="Assombração">Assombração</option>
      <option value="Atirador">Atirador</option>
      <option value="Barão">Barão</option>
      <option value="Bárbaro">Bárbaro</option>
      <option value="Bardo">Bardo</option>
      <option value="Bruxo">Bruxo</option>
      <option value="Carpinteiro">Carpinteiro</option>
      <option value="Catador">Catador</option>
      <option value="Colosso">Colosso</option>
      <option value="Conjurador">Conjurador</option>
      <option value="Costeiro">Costeiro</option>
      <option value="Criatura">Criatura</option>
      <option value="Duelista">Duelista</option>
      <option value="Escudeiro">Escudeiro</option>
      <option value="Especialista">Especialista</option>
      <option value="Espectro">Espectro</option>
      <option value="Espiritualista">Espiritualista</option>
      <option value="Fera">Fera</option>
      <option value="Ferreiro">Ferreiro</option>
      <option value="Forasteiro">Forasteiro</option>
      <option value="Glacinata">Glacinata</option>
      <option value="Guerreiro">Guerreiro</option>
      <option value="Hemomantico">Hemomantico</option>
      <option value="Imitador">Imitador</option>
      <option value="Juíz">Juíz</option>
      <option value="Lacaio">Lacaio</option>
      <option value="Ladrão">Ladrão</option>
      <option value="Louco">Louco</option>
      <option value="Mago">Mago</option>
      <option value="Malabarista">Malabarista</option>
      <option value="Marinheiro">Marinheiro</option>
      <option value="Masoquista">Masoquista</option>
      <option value="Médico">Médico</option>
      <option value="Mendigo">Mendigo</option>
      <option value="Monge">Monge</option>
      <option value="Naturalista">Naturalista</option>
      <option value="Nobre">Nobre</option>
      <option value="Perseguidor">Perseguidor</option>
      <option value="Pervertido">Pervertido</option>
      <option value="Pescador">Pescador</option>
      <option value="Pirata">Pirata</option>
      <option value="Prefeito">Prefeito</option>
      <option value="Prisioneiro">Prisioneiro</option>
      <option value="Profanado">Profanado</option>
      <option value="Protetor">Protetor</option>
      <option value="Pugilista">Pugilista</option>
      <option value="Revivido">Revivido</option>
      <option value="Samurai">Samurai</option>
      <option value="Sacerdote">Sacerdote</option>
      <option value="Soberano">Soberano</option>
      <option value="Taverneiro">Taverneiro</option>
      <option value="Tormentalista">Tormentalista</option>
    </select>
  </div>

</div>
<div class="stat-container">
  <img id="race-image" src="imagens/Raças/sua raça.png" alt="Raça">
  <img id="past-image" src="imagens/pass/seu passado.png" alt="Passado">
</div>
    <div class="prompt-wrapper">
  <button class="toggle-prompt-btn" onclick="togglePromptBox()">✏️Criar Token</button>

  <div class="prompt-gerador-box hidden" id="promptBox">
    <label for="descricao-personagem">Aparência do Token do personagem:</label>
<p style="background: #fff8e1; color: #8a6d3b; border: 1px solid #ffe0b2;
   padding: 8px 12px; border-radius: 5px; font-size: 12px;
   margin-bottom: 15px; line-height: 1.4; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto;">
  ⚠️ Escolha a <strong>raça</strong> e o <strong>passado</strong> primeiro. Essas escolhas serão consideradas na hora de gerar o visual.
  O botão irá te direcionar para o <strong>ChatGPT</strong>, mas o prompt também funciona no <strong>Copilot</strong>.
</p>


<textarea id="descricao-personagem" placeholder="Ex: Um elfo de pele escarlate, cabelo negro, vestindo armadura de ossos antigos e segurando um arco detalhado... Descreva cores, roupas e objetos para um resultado melhor."></textarea>
    <button onclick="gerarPromptPersonagem()">Gerar Token</button>
  </div>
</div>
          <div class="content">
            
            <!-- outros conteúdos -->
            <div class="bonus-container">
    <h2 class="resistencia-index">Resistência: N/A</h2> 

<div class="bonus-subsection">
  <h3 class="especializacao_titulo5" onclick="alternarTextoBonus(5)" id="tituloBonus5">Bonus de Raça</h3>
  <div class="bonusTexto5 bonus-texto" id="textoBonus5" style="display:block;">
          <h4 class="Bonus-talento-tex" onclick="toggleMenu()">Talento: N/A</h4>

    <h4 class="Bonus-race-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/como-jogar/', '_blank')">Bônus de Raça: N/A</h4>
    <h4 class="Bonus-passiva-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/', '_blank')">Passiva: N/A</h4>
    <h4 class="Bonus-magia-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/magias/', '_blank')">Magia: N/A</h4>
  </div>
</div>





<!-- Essa parte representa os 3 bônus do passado -->
<!-- Botão com texto "Bônus de Passado" -->
 <h4 class="especializacao_titulo" id="tituloBonusPassado">Bônus de Passado: N/A</h4>
     <div id="textoBonusPassado" class="bonus-passado-section"></div>


<div class="bonus-subsection">
  <h3 class="especializacao_titulo4" onclick="alternarTextoBonus(4)" id="tituloBonus4">
Bonus por Níveis Do Personagem  </h3>
  <div class="bonusTexto4 bonus-texto" id="textoBonus4" style="display:none;">
    
<p class="bonus4-paragraph"><strong>Nível 1:</strong> Escolha sua <strong class="gold-gradient">Especialização principal</strong>. Essa escolha define suas habilidades únicas principais e o caminho que seu personagem seguirá.</p>
 <p class="bonus4-paragraph"> Além disso, escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 de dano com sua <strong>arma favorita</strong> (não pode ser trocada depois)</li>
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (nível 1)</li>
    </ul>

    <h4>Escolha sua especialização principal</h4>
<p>Sua especialização principal não pode ser mudada.</p>
<section>

    <div class="bonus-subsection">
      <h3 class="bonusTexto1 especializacao_titulo1" onclick="alternarTextoBonus(1)" id="tituloBonus1"></h3>
      <div class="bonusTexto1 bonus-texto" id="textoBonus1" style="display:none;"></div>
    </div>

    <div class="bonus-subsection">
      <h3 class="especializacao_titulo2" onclick="alternarTextoBonus(2)" id="tituloBonus2"></h3>
      <div class="bonusTexto2 bonus-texto" id="textoBonus2" style="display:none;"></div>
    </div>

    <div class="bonus-subsection">
      <h3 class="especializacao_titulo3" onclick="alternarTextoBonus(3)" id="tituloBonus3"></h3>
      <div class="bonusTexto3 bonus-texto" id="textoBonus3" style="display:none;"></div>
    </div>

  
</section>
    
<div id="popupOverlay" class="popup-overlay" style="display: none;"></div>

<!-- Popup central -->
<div id="popupEspecializacoes" class="popup-especializacoes" style="display: none;">
  <!-- Botão de fechar interno -->
  <button class="fechar-popup" onclick="fecharPopupEspecializacoes()">✕</button>
  <h2>Especializações por Passado</h2>
  <div class="especializacoes-grid" id="especializacoesContainer">
    <!-- Conteúdo JS -->
  </div>
</div>

    <p class="bonus4-paragraph"><strong>Nível 2:</strong> Escolha um atributo entre <strong>Brutalidade, Agilidade, Determinação, Preservação, Libertação ou Conexão</strong>. Você recebe <strong>+2 em testes</strong> com o atributo escolhido.</p>
<p class="bonus4-paragraph"><strong>Nível 3:</strong> <strong class="gold-gradient">Especialização principal</strong></p>

    <p class="bonus4-paragraph"><strong>Nível 4:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">+2 em <strong>Esquiva</strong></li>
      <li class="bonus4-list-item"><strong>Resistência</strong> a um tipo de dano</li>
    </ul>
<p class="bonus4-paragraph">
  <strong>Nível 5:</strong>
  <strong class="gold-gradient">Especialização principal</strong>
</p>    
    <p class="bonus4-paragraph"><strong>Nível 6:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+1d6 de dano com sua <strong>arma favorita</strong> (não pode ser trocada depois)</li>
      <li class="bonus4-list-item">Ganha uma <strong>Passiva</strong> (nível 1 a 3)</li>
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (nível 1 a 3)</li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 7:</strong> Escolha uma habilidade de nível 1 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 8:</strong> Escolha uma habilidade de nível 3 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 9:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 10:</strong> Escolha sua <strong>Vocação:</strong> Fé, Poder, Desconhecido ou Caos. Ganha <strong>2 resistências</strong> a tipos de dano ligados ao elemento escolhido.</p>

    <p class="bonus4-paragraph"><strong>Nível 11:</strong> Escolha uma habilidade de nível 5 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 12:</strong> <strong>Despertar da Raça.</strong> Recebe +2 em testes com <strong>Talentos ou Passivas raciais</strong>.</p>
<p class="bonus4-paragraph"><strong>Nível 13:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 14:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (nível 2 a 4)</li>
      <li class="bonus4-list-item">+2 em <strong>Armadura, Esquiva</strong> ou <strong>Resistência</strong> a um tipo de dano</li>
      <li class="bonus4-list-item">Ganha +1 por turno (<strong>Ataque Extra</strong>, Ação Completa ou Ação de Movimento)</li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 15:</strong> Escolha uma habilidade de nível 9 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 16:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 17:</strong> Escolha uma habilidade de nível 13 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 18:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">+2 em <strong>Esquiva</strong></li>
      <li class="bonus4-list-item"><strong>Resistência</strong> a um tipo de dano</li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 19:</strong> Escolha uma habilidade de nível 16 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 20:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 21:</strong> Escolha uma habilidade de nível 20 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 22:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 23:</strong> Escolha uma habilidade de nível 22 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 24:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">Ganha uma <strong>Passiva</strong> (nível 3 a 7)</li>
      <li class="bonus4-list-item">+1d6 de dano com sua <strong>arma favorita</strong> (não pode ser trocada depois)</li>
      <li class="bonus4-list-item"><strong>Resistência</strong> a um novo tipo de dano</li>
    </ul>
<p class="bonus4-paragraph"><strong>Nível 25:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 26:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">1 <strong>Ataque Extra</strong> por turno</li>
      <li class="bonus4-list-item">1 Magia nova (nível 4–5)</li>
      <li class="bonus4-list-item">+1d12 de dano com <strong>arma favorita</strong></li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 27:</strong> Escolha uma habilidade de nível 25 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 28:</strong> Escolha uma habilidade de nível 1, 3, 5 ou 9 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 29:</strong> Escolha uma habilidade de nível 13, 16, 20 ou 22 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 30:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">1 <strong>Ataque Extra</strong> por turno</li>
      <li class="bonus4-list-item">1 Magia nova (nível 5–9)</li>
      <li class="bonus4-list-item">+1d20 de dano com <strong>arma favorita</strong></li>
    </ul>

  </div>
</div>


              
                       <!-- Botão para abrir o popup de itens -->








              <!-- Popup com grid de itens -->
              <!-- Popup com grid de itens -->
              <div id="itemSelectPopup" class="popup hidden">
                <div class="popup-content scrollable-grid">
                  <button id="closeItemPopup">Fechar</button>
                  <h2>Escolha um Item</h2>
                  
                  <select id="itemFilter">
                    <option value="Todos">Todos os Tipos</option>
                  </select>
              
                  <div class="item-grid" id="itemGrid">
                    <!-- Itens inseridos por JS -->
                  </div>
                </div>
              </div>
              


              
            
              
          </div>

    
          
            
            

     
     
        
            <!-- outros conteúdos -->
          </div>
        </div>
      </div>

    <!-- Seção da direita -->

    <div id="right-section">
<div id="character-info-section-2" style="margin: 20px 0; font-family: Arial, sans-serif;">
  <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
    <!-- Botão 1: AVISO -->
    <button onclick="toggleSectionInfo('expandableSectionInfo2a')"
      style="background: linear-gradient(to right, #ff4d4d, #ff1a1a); color: #fff; padding: 10px 20px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);">
      AVISO!
    </button>

    <!-- Botão 2: APOIAR -->
    <button onclick="toggleSectionInfo('expandableSectionInfo2b')"
      style="background: linear-gradient(to right, #ff4d4d, #ff1a1a); color: #fff; padding: 10px 20px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);">
      APOIAR!
    </button>
  </div>

  <!-- Conteúdo do popup AVISO -->
  <div id="expandableSectionInfo2a"
    style="display: none; margin-top: 15px; background-color: #f9f9f9; padding: 20px; border-radius: 10px; border: 1px solid #ccc;">
          <h1 class="Aviso" style="font-size: 11px;">
      A aparência do seu personagem será uma fusão entre seu passado e sua raça — imagine-o livremente!<br><br>
      No início da criação do personagem, todos os atributos BRU, AGI, DET, PRE, LIB e CNX começam com o valor 14,
      mas você pode redistribuí-los como quiser, respeitando o mínimo de 8 e o máximo de 99 para cada um, mantendo o personagem no nível 1.
    </h1>
  </div>

  <!-- Conteúdo do popup APOIAR -->
  <div id="expandableSectionInfo2b"
    style="display: none; margin-top: 10px; background-color: #fff; padding: 20px; border-radius: 12px; border: 1px solid #ccc; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 520px; font-size: 14px; line-height: 1.6; color: #333;">
    <h1 style="font-size: 14px; color: #444; margin-bottom: 15px;">
      💖 Ajude o projeto com um Pix!<br>
      Aponte a câmera para o QR Code abaixo:
    </h1>
    <img src="imagens/qrcode-inter.png" alt="QR Code de apoio via Pix Inter"
      style="max-width: 200px; display: block; margin: 0 auto 10px; border-radius: 8px; border: 1px solid #ddd;">
    <p
      style="text-align: center; font-size: 13px; color: #111; background-color: #f1f1f1; padding: 8px; border-radius: 6px; margin-top: 10px; word-break: break-word;">
      <strong>Chave Pix:</strong> gustavo.s.silvasantos2@gmail.com
    </p>
  </div>
</div>

       
        
        <form id="character-form">



<!-- Popup de descrição -->
<div id="itemDescPopup" class="popup hidden">
  <img id="itemDescImage" src="" alt="Item">
  <div id="itemDescText"></div>
  <div id="itemDescTitle"></div>

  <!-- Novas informações -->
  <div id="itemDescDamageType"></div>
  <div id="itemDescElementalDamage"></div>
  <div id="itemDescDamageDice"></div>
  <div id="itemDescRange"></div>
  <div id="itemDescCritical"></div>
  <div id="itemDescEquipBonus"></div>

  <button id="equipItem"></button>
  <button id="closeDescPopup">Fechar</button>
</div>



<style>
/* =========================== */
/*   CSS EXCLUSIVO DO POPUP    */
/* =========================== */
#tcOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 20000;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial;
}

#tcOverlay .tc-popup {
  background: #ffffff;
  border-radius: 20px;
  width: 94%;
  max-width: 1000px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 12px 40px rgba(0, 0, 0, .4);
}

/* Cabeçalho fixo */
#tcOverlay .tc-header {
  flex: 0 0 auto;
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  background: #101926;
  color: #fff;
}

/* Filtros fixos */
#tcOverlay .tc-controls {
  flex: 0 0 auto;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  background: #0f1724;
  padding: 10px 14px;
}

/* Área scrollável */
#tcOverlay .tc-body {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 14px;
}

/* Botões e tabs */
#tcOverlay .tc-tabs { display: flex; gap: 8px; }
#tcOverlay .tc-tab {
  border: 0;
  padding: 8px 12px;
  border-radius: 10px;
  background: #22324a;
  color: #dfe7ff;
  font-weight: 700;
  cursor: pointer;
}
#tcOverlay .tc-tab.active { background: #c0191f; color: #fff; }
#tcOverlay .tc-close {
  border: 0;
  background: #2a3a53;
  color: #fff;
  border-radius: 10px;
  padding: 8px 12px;
  cursor: pointer;
}

/* Inputs */
#tcOverlay .tc-select,
#tcOverlay .tc-search {
  appearance: none;
  border: 0;
  border-radius: 10px;
  padding: 10px 12px;
  background: #1a2333;
  color: #eaf0ff;
  min-width: 140px;
  flex: 1;
}
#tcOverlay .tc-content{background:#0f1724;padding:16px;overflow:auto;max-height:calc(90vh - 114px)}
/* grid 2 colunas fixo */
#tcOverlay .tc-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
/* card compacto */
#tcOverlay .tc-card{background:#101a2b;border:1px solid #1f2b44;border-radius:16px;padding:10px;cursor:pointer;transition:transform .1s ease,box-shadow .1s ease;color:#e7eeff}
#tcOverlay .tc-card:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.3)}
#tcOverlay .tc-img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:12px;background:#0b1220}
#tcOverlay .tc-name{margin:8px 0 4px;font-weight:800;font-size:15px;line-height:1.2}
#tcOverlay .tc-meta{font-size:12px;color:#b7c4e1}

#tcOverlay .tc-pagination{display:flex;justify-content:center;gap:6px;margin-top:14px}
#tcOverlay .tc-page{border:0;background:#1a2333;color:#eaf0ff;border-radius:8px;padding:8px 10px;cursor:pointer}
#tcOverlay .tc-page.active{background:#c0191f}

/* Detalhe */
#tcOverlay .tc-detail{position:fixed;inset:0;background:rgba(0,0,0,.66);display:none;align-items:center;justify-content:center;z-index:10000}
#tcOverlay .tc-box{background:#ffffff;border-radius:22px;width:92%;max-width:760px;max-height:88vh;overflow:auto;color:#1a1a1a}
#tcOverlay .tc-box-head{padding:18px 18px 0}
#tcOverlay .tc-detail-img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:18px}
#tcOverlay .tc-title{margin:14px auto 6px;text-align:center;background:#9b0b0f;color:#fff;border-radius:999px;padding:10px 16px;font-size:22px;font-weight:800;width:fit-content}
#tcOverlay .tc-sub{margin:0 auto 14px;text-align:center;color:#9b0b0f;font-style:italic}
#tcOverlay .tc-section{padding:0 18px 16px}
#tcOverlay .tc-h2{margin:10px 0 8px;font-size:16px;color:#0f172a}
#tcOverlay .tc-desc{color:#222;line-height:1.55}

#tcOverlay .tc-table{width:100%;border-collapse:collapse;margin-top:10px}
#tcOverlay .tc-table th,#tcOverlay .tc-table td{border:1px solid #e5e7eb;padding:10px;text-align:left}
#tcOverlay .tc-table th{background:#f4f6fb;font-weight:700;color:#111827}

#tcOverlay .tc-good{color:#16a34a;font-weight:900;margin:8px 0 4px}
#tcOverlay .tc-bad{color:#dc2626;font-weight:900;margin:14px 0 4px}

#tcOverlay .tc-actions{display:flex;gap:8px;padding:0 18px 18px}
#tcOverlay .tc-btn{border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
#tcOverlay .tc-btn.primary{background:#c0191f;color:#fff}
#tcOverlay .tc-btn.ghost{background:#eef2ff;color:#0f172a}

@media (max-width:420px){
  #tcOverlay .tc-title{font-size:18px}
}
  .magias-btn {
    background-image: url('https://raw.githubusercontent.com/GustavoTerrasDeCalisto/RPG_Ficha_Terras_De_Calisto/master/imagens/BotaoMagias.png'); /* link RAW do PNG */
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    width: 220px;   /* ajuste conforme o tamanho real da sua imagem */
    height: 70px;

    border: none;
    padding: 0;
    margin: 16px;
    cursor: pointer;
    background-color: transparent;
    transition: transform 0.1s ease, filter 0.1s ease;
}

.magias-btn:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
}

.magias-btn:active {
    transform: scale(0.95);
    filter: brightness(0.9);
}
/* grid fluido (web) */
#tcOverlay .tc-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 14px;
}
@media (max-width: 640px) {
  #tcOverlay .tc-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
  #tcOverlay .tc-title { font-size: 18px; padding: 8px 14px; }
  #tcOverlay .tc-detail-img { max-width: 160px; }
}

  /* Ajuste para web (largura maior que 640px) */
@media (min-width: 641px) {
  #tcOverlay .tc-box {
    width: 45%; /* ou 45% se preferir */
  }
  .tc-detail-img{
    width: 65%;
  }
}
</style>




<button onclick="TC.open()" class="magias-btn"></button>


  
<!-- POPUP -->
<div id="tcOverlay" aria-hidden="true">
  <div class="tc-popup" role="dialog" aria-modal="true">
    <div class="tc-header">
      <div class="tc-tabs">
        <button class="tc-tab active" data-tab="magias">Magias</button>
        <button class="tc-tab" data-tab="passivas">Passivas</button>
        <button class="tc-tab" data-tab="aprendidas">Aprendidas</button>
      </div>
      <button class="tc-close" onclick="TC.close()">Fechar</button>
    </div>

    <div class="tc-controls">
      <select id="tcFiltroElemento" class="tc-select" title="Elemento">
        <option value="">Elemento</option><!-- preenchido via JS -->
      </select>
      <select id="tcFiltroDano" class="tc-select" title="Tipo de dano">
        <option value="">Tipo de dano</option><!-- preenchido via JS -->
      </select>
      <input id="tcBusca" class="tc-search" type="search" placeholder="Buscar por nome (opcional)">
    </div>

    <div id="tcList" class="tc-content">
      <div class="tc-grid" id="tcGrid"></div>
      <div class="tc-pagination" id="tcPaginacao"></div>
    </div>
  </div>

  <!-- Detalhe -->
  <div id="tcDetail" class="tc-detail" onclick="event.target.id==='tcDetail'&&TC.hideDetail()">
    <div class="tc-box" id="tcDetailBox"></div>
  </div>
  
</div>


<!-- SUBSTITUA APENAS O <script> ABAIXO. Deixe seu CSS/HTML e seu DATASET como já estão. -->
<script>

  /* =========================== */
/*           DATASET           */
/*  (mantenha/ajuste o seu)    */
/* =========================== */

const DATASET = {
  magias: [
    {
      id: "m1",
      nome: "Controle de sangue",
      sub: "Sanguis imperium",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/b3e68955d9f8a0e03e204e80a408e760acffb882_high.webp",
      elemento: "Fé",
      tipoDano: "Sangue",
      descricao: "Controla sangue ao seu alcance e é necessário estar vendo o sangue, acertando o inimigo e causando 1d12 de dano de Sangue. Caso o inimigo já tenha sido acertado, pode mover o próprio sangue dele causando +1d8.",
      duracao: "Gasta ação",
      tagLevel: "Hemomante",
      tagLevelResposta: "Nível 1 – Iniciado do Sangue",
      alcance: "5m",
      testeConjurador: "Determinação",
      testeAlvo: "Determinação"
    },
    {
      id: "m2",
      nome: "Fechar feridas",
      sub: "Prope vulnera",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-31.png",
      elemento: "Fé",
      tipoDano: "Sangue",
      descricao: "Controla a ferida do alvo podendo fechar errado (“Profano”) para causar 1d8 + 1d6 de sangue. Se for em um aliado, pode escolher a ferida e tentar fechar curando 1d12 de dano. Pode gastar 1 Especial para tentar curar +1d6, ou no máximo o dano da ferida.",
      duracao: "Gasta ação",
      tagLevel: "Hemomante",
      tagLevelResposta: "Nível 1 – Iniciado do Sangue",
      alcance: "7m",
      testeConjurador: "Determinação",
      testeAlvo: "Determinação"
    },
    {
      id: "m3",
      nome: "Sangue fervido",
      sub: "Coctum sanguinem",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/46c76fb20b8fb9c9ad039f8cf447b2eedd42de81_high.webp",
      elemento: "Fé",
      tipoDano: "Sangue",
      descricao: "Olha para o alvo e o sangue dele começa a evaporar. Necessário estar olhando no olho do alvo para causar 2d10 de dano de Sangue. Toda vez que reconjurar essa magia no mesmo alvo e acertar, causa mais 1d4.",
      duracao: "Gasta ação",
      tagLevel: "Hemomante",
      tagLevelResposta: "Nível 2 – Guardião Rubro",
      alcance: "2m",
      testeConjurador: "Determinação",
      testeAlvo: "Agilidade"
    },
    {
      id: "m66",
      nome: "Olho do Desespero",
      sub: "Oculus Desperatio",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/c2769191832f2f0cbaa350d57f699594073a9ef1_high-1.png",
      elemento: "Fé",
      tipoDano: "Maldição",
      descricao: "O alvo é atingido por uma maldição que causa desespero profundo. Enquanto estiver sob essa maldição, o alvo sofre desvantagem em todos os testes de Libertação e Preservação.\n\n“Para quebrar a maldição, o alvo deve se autoafirmar, dizendo uma frase positiva sobre si mesmo em voz alta, mas deve também realizar um teste de Conexão com dificuldade 15.“",
      duracao: "Até ser quebrado",
      tagLevel: "Maldizente",
      tagLevelResposta: "Nível 1 – Aprendiz da Maldição",
      alcance: "6m",
      testeConjurador: "Conexão",
      testeAlvo: "Determinação"
    },{
    id: "m166",
nome: "Telefone Temporal",
sub: "Tidsmessig Telefon",
img: "/imagens/telefonetemporal.png",
elemento: "Desconhecido",
tipoDano: "Sono",
descricao: `
Um telefone sobrenatural se materializa diante do conjurador, permitindo discar para um ponto em outra época. Quem atender a ligação é envolvido por ecos do tempo e deve realizar um teste de <strong>Libertação</strong> contra o conjurador. Se falhar, adormece por <strong>1 turno</strong> e sofre <strong>1d6 de dano de Sono</strong> causado pelos ecos oníricos.  


<strong>Efeitos do Telefone Temporal:</strong><br>
<strong>• Ligação Fantasma:</strong> O conjurador pode transmitir uma mensagem curta para um ser do passado ou futuro.<br>
<strong>• Sonho Invasivo:</strong> Se o atendente dormir, o conjurador pode plantar uma visão ou memória ilusória, que permanece após o despertar.<br>
<strong>• Interferência Temporal:</strong> Caso o teste seja um <em>fracasso crítico</em>, uma entidade perdida no tempo responde ao chamado, obrigando o conjurador a realizar um teste de <strong>Libertação</strong>. Se falhar, o conjurador sofre <strong>4d10 de dano psíquico</strong> devido ao contato instável.
`,
duracao: "1d4 turnos",
tagLevel: "Apanhador",
tagLevelResposta: "Nível 5 – Profeta das Visões Oníricas",
alcance: "Ilimitado (através do tempo)",
testeConjurador: "Conexão",
testeAlvo: "Libertação"
},
     {
      id: "m4",
      nome: "Reflexão de Eclipse",
      sub: "Eklipsens Refleksjon",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/4fe807a14c95007000191d1e5ed588e0d965b75a_high.png",
      elemento: "Desconhecido",
      tipoDano: "Eclipse",
      descricao: `
O conjurador cria uma imagem reflexiva de si mesmo que ataca o alvo. O alvo deve fazer um teste de <strong>Libertação</strong>. Se falhar, o alvo sofre <strong>1d10 de dano de Eclipse</strong> e recebe um bônus de <strong>+1d6 em ataques</strong> durante <strong>2 turnos</strong>. O clone pode atacar os aliados no próximo turno, obrigando-os a fazer um teste de <strong>Agilidade</strong> para não sofrerem dano.

<strong>Condições durante o eclipse:</strong>
<ul>
  <li><strong>Invocação Sombria Adicional:</strong> Durante o eclipse, o conjurador pode criar um segundo clone reflexivo que ataca os inimigos por um turno adicional.</li>
  <li><strong>Distorção de Percepção:</strong> Todos os alvos próximos ao clone têm dificuldade de foco, recebendo <strong>-1 em Conexão</strong> para resistir aos ataques do clone.</li>
</ul>
`,
      duracao: "2 turnos",
      tagLevel: "Aspirante do Crepúsculo",
      tagLevelResposta: "Nível 1 – Aspirante do Crepúsculo",
      alcance: "30m",
      testeConjurador: "Conexão",
      testeAlvo: "Libertação"
    }
    ,
    {
  id: "m165",
  nome: "Lâminas do Eclipse",
  sub: "Eklipsens Klinger",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/ed4d7bbcd227eec5b900e31a45b636c71433a9c1_high.png?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador imbuí suas espadas, cimitarras e foices com energia do eclipse, aumentando sua eficácia. Os ataques com armas cortantes recebem <strong>+2 de dano</strong>. Além disso, ao acertar um ataque, o conjurador pode escolher entre causar <strong>1d10</strong> de dano adicional de Eclipse ou deixar o alvo com desvantagem em seu próximo ataque.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Lâmina Dupla:</strong> As armas imbuídas duplicam-se temporariamente durante o ataque, atingindo dois alvos simultaneamente.<br>
  <strong>• Escudo da Escuridão:</strong> O conjurador ganha um escudo de sombras que reduz o dano recebido em <strong>2d6</strong> por turno.<br>
  `,
  duracao: "3 turnos",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 2 – Tecelão da Penumbra",
  alcance: "Toque",
  testeConjurador: "Conexão",
  testeAlvo: "—"
},

    {
  id: "m172",
  nome: "Clone das Sombras",
  sub: "Clonum Umbra",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/cb56164b7c6f8e1a4f70a84d85d309e61d809b84_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador convoca um clone sombrio que pode atacar os inimigos. No início de cada turno, o clone pode atacar aliados aleatórios, causando o dano da arma empunhada + <strong>2d6 de dano de Eclipse</strong>. Os aliados atacados podem fazer um teste de <strong>Agilidade</strong> para evitar o golpe. Se não houver alvos, o clone pode atacar o próprio conjurador.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Multiplicação Sombria:</strong> Durante um eclipse, surgem <strong>dois clones adicionais</strong> com metade do dano original.<br>
  <strong>• Frenesi de Eclipse:</strong> Os clones recebem <strong>+1d4 em Agilidade</strong> e causam pavor entre os aliados do alvo, que recebem <strong>-1</strong> em ataques.<br>
  <em>O clone sempre prioriza atacar com a arma em mãos e age de forma independente.</em><br>
  `,
  duracao: "4 turnos ou até sofrer 1d8 golpes",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 3 – Guardião da Meia-Noite",
  alcance: "50m",
  testeConjurador: "Conexão",
  testeAlvo: "Agilidade"
}


    
    ,
    {
  id: "m167",
  nome: "Fragmento do Tempo",
  sub: "Fragmentum Tempus",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/b4a36f19fa6869978aa29d1f6dabfdf67548093a_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Nenhum",
  descricao: `
  <p>O conjurador busca um objeto do passado ou do futuro, fazendo com que um fragmento apareça ao seu redor. O objeto escolhido pode ter propriedades mágicas ou úteis, proporcionando um <strong>bônus de +3</strong> a uma habilidade relacionada ao objeto. O alvo deve fazer um teste de <strong>Conexão</strong> para resistir à atração do fragmento.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>1. Fluxo Temporal Amplificado:</strong> Permite que o conjurador traga até três objetos temporais do passado ou do futuro simultaneamente, cada um com bônus aleatórios.<br>
  <strong>2. Congelamento do Momento:</strong> O tempo ao redor do alvo congela brevemente, e o alvo fica paralisado por um turno ou até que outro ataque o atinja.<br><br>

  <strong>Exemplo de objetos Temporais e bônus:</strong><br>
  <em>PARA OUTROS, FALAR COM MESTRE!!!</em><br><br>

  <strong>Ponteiro de Calisto:</strong> Possui um traço de energia que acelera um movimento específico, permitindo uma ação extra em um único turno para quem o carrega.<br>
  <strong>Relógio da Eternidade:</strong> Permite ao usuário prever o próximo ataque do alvo e reagir com mais agilidade (<strong>+3</strong> em testes de Agilidade por um turno).<br>
  <strong>Areia das Eras:</strong> Quando usada em combate, desacelera o tempo para o alvo escolhido, reduzindo seus ataques por turno em <strong>1</strong>.<br>
  <strong>Ampulheta do Recomeço:</strong> Gera uma área de influência em que o conjurador pode “reverter” uma ação recente, como um movimento ou um ataque fracassado, para um segundo intento.<br>
  <strong>Bússola da Paradoxa:</strong> Aponta para um momento favorável no futuro imediato, concedendo <strong>+2</strong> em Determinação para o conjurador.<br>
  `,
  duracao: "Gasta ação",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 4 – Mestre do Eclipse",
  alcance: "100m",
  testeConjurador: "Conexão",
  testeAlvo: "Conexão",
  testeDt: "10, 15, 20, 25, 30 define a qualidade do item"
}
,
 {
  id: "m168",
  nome: "Ilusão Lunar",
  sub: "Illusio Lunae",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/5719ee14f89ab3f8dc5a2c5aea697dfaf292524d_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Nenhum",
  descricao: `
  <p>O conjurador cria uma duplicação da lua no céu, causando um efeito de ilusão em uma área de 50m. Todos os inimigos nessa área devem fazer um teste de <strong>Libertação</strong>. Se falharem, ficam confusos, reduzindo seu movimento em <strong>5m</strong> e recebendo <strong>-1d4</strong> em todos os ataques por <strong>2 turnos</strong>.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Reflexo Duplicado:</strong> A duplicação da lua se torna uma miragem múltipla, desorientando ainda mais os inimigos, que perdem <strong>-2</strong> em todos os testes de Determinação.<br>
  <strong>• Luz Ilusória:</strong> A ilusão confunde os sentidos, reduzindo a visibilidade dos alvos em <strong>10m</strong>, dificultando sua reação aos ataques do conjurador e aliados.<br>
  `,
  duracao: "2 turnos",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 5 – Oráculo das Sombras",
  alcance: "30m",
  testeConjurador: "Conexão",
  testeAlvo: "Libertação"
}
,

    {
  id: "m169",
  nome: "Dano do Eclipse",
  sub: "Eklipseskade",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/29cb86e267a96b8a93a8a5e27ea2c863ff911f06_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador canaliza a energia do eclipse, causando <strong>3d12</strong> de dano ao alvo. O alvo deve fazer um teste de <strong>Libertação</strong>. Se falhar, o dano aumenta em <strong>+2d12</strong> e o alvo ganha o lado negativo de “Mutação”.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Armadura Sombria:</strong> O conjurador ganha uma resistência temporária ao dano de Eclipse, absorvendo até <strong>3d10</strong> de dano de ataques.<br>
  <strong>• Amplificação de Eclipse:</strong> Durante um eclipse, o dano aumenta em <strong>+3d6</strong> e causa uma desvantagem de <strong>-1d4</strong> em testes de Libertação para o alvo.<br>
  `,
  duracao: "Instantânea",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 6 – Vidente do Véu",
  alcance: "15m",
  testeConjurador: "Conexão",
  testeAlvo: "Libertação"
}
,
 {
  id: "m170",
  nome: "Mutação Sombria",
  sub: "Mutatio Obscura",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/45b8e4fe971fb2ac776d04bf14e0401628d7236d_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>A magia causa uma transformação em um alvo, que deve fazer um teste de <strong>Conexão</strong>. Se falhar, ele sofre <strong>5d12</strong> de dano de Eclipse e se torna vulnerável a ataques do conjurador por <strong>1d6 turnos</strong>. O conjurador também ganha apenas o lado positivo de “Mutação”.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Mutação Melhorada:</strong> Durante o eclipse, o conjurador recebe um bônus positivo de “Mutação” permanente, concedendo <strong>+1 em Conexão</strong>.<br>
  <strong>• Redução de Tamanho:</strong> O alvo encolhe temporariamente, reduzindo seu alcance de ataque pela metade e perdendo <strong>2 de Força</strong> por turno.<br>
  <em>Cria um eclipse no céu automaticamente ao conjurar.</em><br>
  `,
  duracao: "Instantânea, 1d6 turnos",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 7 – Sábio do Oculto",
  alcance: "20m",
  testeConjurador: "Conexão",
  testeAlvo: "Conexão"
}
,
    
    {
  id: "m171",
  nome: "Cataclismo do Eclipse",
  sub: "Cataclysmus Eclipse",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/7b2765874d33197e7303f605e2dfd57f65287eab_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador provoca um cataclismo que reverbera pela terra, criando ondas de escuridão e destruição. Todos os alvos em um raio de <strong>200m</strong> devem fazer um teste de <strong>Libertação</strong>. Se falharem, sofrem <strong>8d10</strong> de dano de Eclipse e Sanidade. A mutação pode alterar a aparência de todos dentro da área sem custo, podendo adicionar traços únicos em cada um.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Onda de Eclipse:</strong> O alcance do cataclismo dobra para <strong>400m</strong>, causando <strong>+3d10</strong> de dano adicional de Eclipse.<br>
  <strong>• Véu Sombrio:</strong> O conjurador pode escolher até <strong>três alvos</strong> e torná-los invisíveis temporariamente, confundindo os inimigos e permitindo ataques furtivos.<br>
  <em>Cria um eclipse no céu automaticamente ao conjurar.</em><br>
  `,
  duracao: "Instantânea",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 8 – Arconte do Infinito",
  alcance: "200m",
  testeConjurador: "Conexão",
  testeAlvo: "Libertação"
}

  ],
  passivas: [
{
  id:"p1",
  nome:"Consumir",
  sub:"Consumere",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/f1c4787c84ea8bb72ad3f8f3e77976ee8976e146_high.webp?w=768&h=768",
  elemento:"Fé",
  tipoDano:"Sangue",
  descricao:`<p><strong>Seu personagem é tomado por uma fome insaciável</strong> e se alimenta do alvo, drenando sua essência vital. Ao fazê-lo, pode <em>curar um valor de Vida ou Sanidade</em>, conforme a natureza da presa.</p>`,
  positivo:`<p><strong>Postura Assassina:</strong> O personagem avança e morde o alvo, tentando dilacerá-lo e consumir o valor do dano (opcional). Causa <strong>1d12 + 1d4</strong> de dano em <em>Vida</em> e <strong>1d6 + 1d4</strong> em <em>Sanidade</em>. Pode converter o dano causado em cura para si mesmo.</p>`,
  negativo:`<p><strong>Falha:</strong> O dano e a cura são resolvidos separadamente. Em caso de erro, o conjurador sofre metade do dano causado e pode ficar <em>bêbado ou tonto</em> pelo gosto amargo do sangue.</p>`,
  duracao:"Um turno",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Sobrevivência",
  testeAlvo:"Agilidade"
}
,
{
  id:"p2",
  nome:"Alegria",
  sub:"Beatitudo",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/a8c0678e4a46aef77c2dbb9a7c6fa0f68ac0bd6c_high.webp?w=768&h=768", 
  elemento:"Fé",
  tipoDano:"Sagrado",
  descricao:`<p><strong>O personagem fica visivelmente mais contente</strong>, rindo de tudo que acontece. Seu sorriso se torna o traço mais marcante dessa bênção, permanecendo constantemente em seu rosto como se fosse impossível conter a felicidade.</p>`,
  positivo:`<p><strong>Êxtase Contagiante:</strong> O personagem recebe <strong>+1d8</strong> em testes de <em>Conexão</em>. Além disso, qualquer criatura que presenciar alguém com essa passiva deve realizar um teste para determinar se será <em>contagiada pela alegria</em>. O personagem também ganha <strong>+5 de movimento</strong> enquanto o efeito durar.</p>`,
  negativo:`<p><strong>Falha ou Excesso:</strong> Algo <em>Desconhecido</em> tenta consumir o personagem ao fim do combate. Ele deve realizar um teste de resistência: <strong>1d20 + bônus de (Preservação, Libertação ou Conexão + Sanidade Atual)</strong>. Em caso de falha, o personagem fica <strong>possuído por 1d4 dias</strong>.</p>`,
  duracao:"Até o fim da cena ou 1d4 dias",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Conexão",
  testeAlvo:"Conexão"
}
,{
  id:"p3",
  nome:"Bêbado",
  sub:"Ebrius",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/4c01b7cdecaa62343d2979ce5bde7994df12dc8f_high-1.png?w=768&h=768",
  elemento:"Caos",
  tipoDano:"Ácido",
  descricao:"O personagem consome algo alcoólico e assume uma postura desorientada, oscilando entre genialidade e descontrole. <em>Bebidas alcoólicas são proibidas para menores de 18 anos.🚫</em>",
  positivo:"Recebe <strong>+5 fixo em testes de Conexão</strong>. Não pode ser <strong>agarrado</strong>. Ganha uma <strong>armadura invisível</strong> que protege contra acidentes e ataques físicos, <strong>reduzindo o dano em 1D12</strong>. O valor da redução é determinado na <strong>primeira vez que for testado</strong> e permanece até o fim do combate.",
  negativo:"<strong>Perde 5 metros de movimento</strong>. Em <strong>testes de Libertação</strong>, só pode <strong>tentar esquivar</strong>. Recebe <strong>1D6 de desvantagem em testes de Agilidade</strong>.",
  duracao:"Até o fim do combate ou cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Agilidade",
  testeAlvo:"Percepção"
},{
  id:"p4",
  nome:"Armadura Sobrenatural",
  sub:"Superno Armis",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-27.png?w=768&h=768",
  elemento:"Variável",
  tipoDano:"Variável",
  descricao:"Faz surgir uma armadura no seu alvo do elemento escolhido.",
  positivo:"Cria em volta do alvo uma entre 4 armaduras:\n- Tipo 1 – Sangue Sagrado: sangue cristalizado com brilho sagrado.\n- Tipo 2 – Energia de Plasma: sombras incandescentes envolvendo o alvo.\n- Tipo 3 – Névoa Sombria: escudo de pele com névoa umbral cobrindo o corpo.\n- Tipo 4 – Revolta da Natureza: elementos da natureza alternando ao redor do corpo.\nO alvo recebe <strong>1D20 de armadura</strong> e pode gastar o custo de conjuração desta habilidade para trocar sua armadura para <strong>5D6</strong> e alterar o elemento.",
  negativo:"Se for atingido por um elemento diferente da sua armadura, recebe <strong>dobro de dano extra</strong>. Apenas para os elementos Caos, Fé, Poder e Desconhecido. Se o dano for do mesmo elemento, mas diferente do escolhido, apenas não negará o dano. O valor tirado no dado é subtraído do dano recebido; se o alvo tiver resistência, receberá metade deste valor já subtraído.",
  duracao:"Até o fim da cena ou fim do combate",
  nivel:"5",
  alcance:"Visível",
  elementoArmadura:"1 – Fé: Sangue ou Sagrado\n2 – Poder: Plasma ou Laser\n3 – Desconhecido: Névoa ou Distorção\n4 – Caos: Fogo, Eletricidade, Tempestade ou Gelo",
  testeConjurador:"Determinação",
  testeAlvo:"Determinação"
},{
  id:"p5",
  nome:"Sorriso Contemplativo",
  sub:"Contemplativus Risus",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-25.png?w=768&h=768",
  elemento:"Variável",
  tipoDano:"Variável (Escuridão, Maldição, Névoa ou Tempestade)",
  descricao:`<p><strong>Um sorriso macabro se forma no rosto do personagem</strong>, irradiando uma energia que distorce a percepção dos que o observam. Com esse gesto enigmático, o personagem escolhe um alvo e canaliza nele um poder sobrenatural que amplifica sua fúria e destruição.</p>`,
  positivo:`<p><strong>Sopro do Observador:</strong> O personagem escolhe um alvo e aumenta o dano dele em <strong>+1d12</strong> de um dos seguintes tipos de dano à escolha: <em>Escuridão</em>, <em>Maldição</em>, <em>Névoa</em> ou <em>Tempestade</em>. Enquanto permanecer imóvel, mantendo o sorriso voltado ao alvo, a melhoria continua ativa.</p>
  <p>Além disso, o personagem pode gastar mais <em>Especial</em> e conjurar novamente no próximo turno, pagando o custo de conjuração mais uma vez para adicionar outro <strong>+1d12</strong> ao dano do alvo.</p>`,
  negativo:`<p><strong>Riso Paralizante:</strong> Ao ativar essa habilidade, o personagem torna-se imóvel — senta-se no chão, cruza os braços e ri em direção ao alvo, completamente vulnerável a ataques. O alcance máximo dessa habilidade é de <strong>16 metros</strong>.</p>`,
  duracao:"Até o fim do combate ou até ser desativada",
  nivel:"4",
  alcance:"Visível",
  testeConjurador:"Libertação",
  testeAlvo:"Determinação"
},{
  id:"p6",
  nome:"Emanar Energia",
  sub:"Procedunt Navitas",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/emanar.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Aura",
  descricao:`<p><strong>Sua energia começa a vazar do corpo</strong>, exalando uma presença sufocante e uma vontade assassina que distorce o ar ao redor. O chão vibra sob seus pés, e uma aura intensa se espalha, tornando impossível ignorar sua existência.</p>`,
  positivo:`<p><strong>Presença Dominante:</strong> O personagem recebe <strong>+1d8</strong> em testes de <em>Intimidação</em>, <strong>+1d8</strong> de dano de <em>Aura</em> em ataques corpo a corpo e <strong>+1d4</strong> em testes de <em>Agarrar</em>. Sua energia bruta também pode <em>empurrar objetos próximos</em>, e sua <strong>Armadura</strong> é aumentada em <strong>+5 fixo</strong>.</p>`,
  negativo:`<p><strong>Fúria Incontrolável:</strong> O personagem se torna incapaz de agir furtivamente e passa a ser facilmente irritável. Se for <em>provocado</em> por inimigos ou aliados, entra imediatamente em estado de <strong>Ódio</strong>. Além disso, sempre que realizar um teste, deve <strong>rolar os dados duas vezes e ficar com o pior resultado</strong>.</p>`,
  duracao:"Até o fim da cena",
  nivel:"4",
  alcance:"Visível",
  testeConjurador:"Intimidação",
  testeAlvo:"Intuição"
},{
  id:"p7",
  nome:"Ódio",
  sub:"Odium",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/32d88826aabd8d02aaa302d31942f834abbf6545_high-1.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Distorção",
  descricao:`<p><strong>Uma variação extrema da Raiva domina o personagem</strong> quando ele entra em fúria. Seus olhos tornam-se negros, a pele exala uma energia escura e a postura se torna animalesca. O autocontrole desaparece por completo, substituído por um instinto de destruição pura. Sua presença pode ser sentida a quase um quilômetro de distância, enquanto o ódio acumulado por toda a vida desperta em um único surto devastador.</p>`,
  positivo:`<p><strong>Fúria Devastadora:</strong> Cada ataque corpo a corpo causa <strong>1d12 + 1d6</strong> de dano, refletindo o poder bruto e o descontrole total do personagem.</p>`,
  negativo:`<p><strong>Descontrole Total:</strong> O personagem só pode realizar <em>ataques corpo a corpo</em>, mas o faz de maneira implacável, atacando <strong>duas vezes</strong> o alvo mais próximo — <em>seja ele aliado ou inimigo</em>.</p>`,
  duracao:"Só acaba quando o personagem é derrubado",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Brutalidade",
  testeAlvo:"Agilidade"
},{
  id:"p8",
  nome:"Vingança",
  sub:"Vindicta",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/2abfa416b623d5166b1913a4c444bb25febe4352_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Distorção",
  descricao:`<p><strong>O personagem entra em um estado de alerta absoluto</strong>, com os olhos atentos e a respiração controlada. Sua postura se torna defensiva, mas impregnada por um instinto de retaliação sobrenatural — cada golpe recebido desperta uma resposta imediata e implacável.</p>`,
  positivo:`<p><strong>Retribuição Imediata:</strong> Sempre que o personagem for atingido, ele devolve <strong>o mesmo dano recebido + 2d8</strong> de dano de <em>Distorção</em> ao agressor. Pode ser usada como <em>Reação</em>, exigindo um teste de <strong>Contra-ataque</strong>.</p>`,
  negativo:`<p><strong>Imobilidade da Ira:</strong> Enquanto permanecer nesse estado, o personagem <strong>não pode se mover</strong>, tornando-se uma fortaleza estática de pura vingança.</p>`,
  duracao:"Até decidir se mover ou até o fim do combate",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Percepção",
  testeAlvo:"Agilidade"
},{
  id:"p9",
  nome:"Medo Oculto",
  sub:"Occulta Timor",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/515a5fa66786036a9c6faa70b23b173dea0d6c63_high.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Aura",
  descricao:`<p><strong>Seus olhos passam a brilhar com um tom ameaçador</strong>, irradiando uma força que desperta o pavor mais profundo no coração do alvo. Uma presença invisível o sufoca, como se a própria morte o observasse de perto, silenciosa e inevitável.</p>`,
  positivo:`<p><strong>Terror Espiritual:</strong> O alvo é afetado pela passiva <strong>PAVOR</strong> e evita o combate por <strong>1d6 turnos</strong>. O efeito se mantém até o <em>fim do combate</em>, fazendo com que o medo o paralise completamente diante do conjurador.</p>`,
  negativo:`<p><strong>Medo Invertido:</strong> Se o teste falhar, o alvo vê apenas o conjurador na arena. Deve rolar <strong>1d6</strong> para determinar quantos turnos ficará <strong>focado exclusivamente em atacá-lo</strong>, tomado por uma obsessão destrutiva.</p>`,
  duracao:"1d6 turnos",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Intimidação",
  testeAlvo:"Libertação"
},{
  id:"p10",
  nome:"Preguiça",
  sub:"Segnities",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/248c2c6b18ccad137aeb5b4e4a971ad51d366204_high.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Escuridão",
  descricao:`<p><strong>O personagem se torna lento e relutante em agir</strong>, movendo-se com calma quase provocativa. Cada gesto parece carregado de peso, mas, paradoxalmente, essa apatia o protege — nada parece urgente, nada o abala.</p>`,
  positivo:`<p><strong>Letargia Protetora:</strong> O personagem torna-se <strong>imune a testes de Conexão</strong>, pois sua preguiça supera qualquer tentativa de manipulação ou influência inimiga. Além disso, ele <em>atrasará sua jogada</em> para o final da fila e pode <strong>escolher seu maior dado de dano</strong>, somando <strong>metade do valor dos dados extras</strong> ao dano total, reduzindo a necessidade de múltiplas rolagens.</p>`,
  negativo:`<p><strong>Sonolência Incontrolável:</strong> No início de cada turno, o personagem deve rolar <strong>1d20</strong>. Se o resultado for menor que o bônus de sua <em>Determinação</em>, ele <strong>adormece</strong> instantaneamente, perdendo o turno.</p>`,
  duracao:"Até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Determinação",
  testeAlvo:"Determinação"
},{
  id:"p11",
  nome:"Sonambulismo",
  sub:"Somnus ambulans",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/7753a7f9f7a2e54472b8cf7c3f4d93ec21dc39f4_high.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Aura",
  descricao:`<p><strong>O personagem anda dormindo</strong>, agindo e tomando decisões sem plena consciência, como se movesse entre o mundo dos sonhos e a realidade.</p>`,
  positivo:`<p><strong>Movimento Sonambúlico:</strong> Ganha <strong>+1D6</strong> em rolagens de <em>Reação</em> ou <em>Agilidade</em>. Seus ataques não podem causar crítico, mas cada ataque causa <strong>+1D12</strong> de dano de <em>Aura</em>.</p>`,
  negativo:`<p><strong>Ação Indecisa:</strong> Não pode realizar ataques elaborados. Sempre que for agir, o jogador deve escolher duas ações possíveis, narrar ambas para o mestre, e então jogar <em>cara ou coroa</em> para decidir qual será realizada. Quando acordar, o personagem entra automaticamente em estado de <strong>PAVOR</strong>.</p>`,
  duracao:"Até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Percepção",
  testeAlvo:"Agilidade"
},{
  id:"p12",
  nome:"Invadir a Mente",
  sub:"Invadere mentem",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/9a7ae1816f115fcb465a167d88d7ed5ab756bc1c_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Psicológico",
  descricao:`<p><strong>Você encara a alma do inimigo</strong> e tenta induzir um desejo ou vontade diretamente em sua mente, manipulando seus pensamentos de forma quase imperceptível.</p>`,
  positivo:`<p><strong>Controle Mental:</strong> Escolha uma ação negativa (ex: atacar um aliado, se ajoelhar, fugir etc.) para o inimigo. Ele deve realizar um teste contra seu personagem (<strong>1d20</strong>). Se falhar, será obrigado a tentar realizar a ação durante sua rodada. Mesmo induzido, o inimigo ainda pode falhar ao executar a ação. Caso a ação seja realizada com sucesso, ele ganha <strong>+5</strong> em testes pelo restante do turno.</p>`,
  negativo:`<p><strong>Resistência do Alvo:</strong> Se o inimigo resistir ao efeito, ele focará em você por <strong>1d6 rodadas</strong>, e ainda assim receberá <strong>+5</strong> em testes contra você durante esse período.</p>`,
  duracao:"Até o fim do combate ou cena",
  nivel:"4",
  alcance:"Visível",
  testeConjurador:"Preservação",
  testeAlvo:"Identificar Magia"
},{
  id:"p13",
  nome:"Pavor",
  sub:"Formido",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/a9541e446b1f6fb1bc2a078afad1d02825d0b37f_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Mental",
  descricao:`<p><strong>O personagem sente um medo profundo</strong>, chegando a temer até sua própria sombra. Esse estado pode ser autoinfligido ao reviver lembranças de traumas e medos antigos.</p>`,
  positivo:`<p><strong>Alerta Amedrontado:</strong> Recebe <strong>1D6</strong> de bônus em ações de <em>Iniciativa</em> e <em>Observação</em>. O valor rolado permanece ativo até o <em>fim do combate ou da cena</em>.</p>`,
  negativo:`<p><strong>Paralisia do Medo:</strong> Sempre que realizar uma rolagem, jogue <strong>dois dados</strong> e escolha o pior resultado.</p>`,
  duracao:"Até o fim do combate",
  nivel:"1",
  alcance:"Visível",
  testeConjurador:"Conexão",
  testeAlvo:"Conexão"
},{
  id:"p14",
  nome:"Raiva",
  sub:"Ira",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/a57bc0e5da3e86c981def526dfd826e3212340c3_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"–",
  descricao:`<p><strong>O personagem entra em um estado de fúria descontrolada</strong>, descarregando sua raiva nas pessoas ao redor. Sua expressão se torna ameaçadora, dominada pelo ódio.</p>`,
  positivo:`<p><strong>Fúria Agressiva:</strong> Recebe <strong>+1D8</strong> de dano físico extra em todos os ataques.</p>`,
  negativo:`<p><strong>Descontrole Letal:</strong> Durante o combate, todas as ações devem ser ofensivas e causar dano. Ao declarar sua jogada, o jogador deve fazer <em>cara ou coroa</em> com o aliado mais próximo. Se vencer, o ataque segue normalmente; se perder, deve redirecionar o ataque para o aliado.</p>`,
  duracao:"Até o fim do combate",
  nivel:"1",
  alcance:"Visível",
  testeConjurador:"Conexão",
  testeAlvo:"Conexão"
},{
  id:"p15",
  nome:"Ansiedade",
  sub:"Anxietatem",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/62bac6da3f0e757594c1698d75fa4a80ce246211_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Psicológico",
  descricao:`<p><strong>O personagem fica visivelmente inquieto</strong>, com o coração acelerado, fala rápida e movimentos impacientes. Essa condição também pode ser induzida em outras pessoas.</p>`,
  positivo:`<p><strong>Agilidade Nervosa:</strong> Adiciona <strong>+1D6</strong> em ações de <em>Agilidade</em>. O valor rolado é fixo e permanece até o fim do combate.</p>`,
  negativo:`<p><strong>Ansiedade Paralisante:</strong> Sofre <strong>1D6</strong> de dano psicológico sempre que for sua vez de agir, até o fim do combate.</p>`,
  duracao:"Até o fim do combate",
  nivel:"1",
  alcance:"Visível",
  testeConjurador:"Conexão ou Agilidade",
  testeAlvo:"Intuição"
},{
  id:"p16",
  nome:"Inveja",
  sub:"Invidia",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/429998cab768c561bc27d063b72afa6a64ffe749_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Mental",
  descricao:`<p><strong>O personagem assume uma postura analítica e crítica</strong>, observando com atenção cada decisão de aliados e inimigos, desejando o que não possui.</p>`,
  positivo:`<p><strong>Imitação Instantânea:</strong> Pode copiar um benefício ou magia que tenha sido conjurada anteriormente no combate, no exato momento da ativação desta passiva. O efeito copiado ocorre de forma imediata e <strong>não consome os recursos do efeito original</strong>.</p>`,
  negativo:`<p><strong>Obstáculo Mental:</strong> Em testes de <em>Conexão</em>, deve rolar dois dados e escolher o pior resultado. Dados bônus ou adicionais para testes de Conexão não funcionam enquanto a passiva estiver ativa.</p>`,
  duracao:"Positivo instantâneo; negativo até o fim do combate ou cena (efeitos não acumulam)",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Identificar Magia",
  testeAlvo:"Conexão"
},{
  id:"p17",
  nome:"Tristeza Oculta",
  sub:"Occulta tristitia",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/4c01b7cdecaa62343d2979ce5bde7994df12dc8f_high.png?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Mental",
  descricao:`<p><strong>Toda tristeza acumulada durante a jornada desperta de forma silenciosa</strong>, envolvendo o personagem em uma aura melancólica que transparece em seus olhos.</p>`,
  positivo:`<p><strong>Aura de Percepção:</strong> O personagem ganha uma aura mágica ao redor dos olhos, permitindo enxergar as dores e fraquezas internas dos inimigos. Seu acerto crítico passa a ocorrer com rolagens de <strong>18 ou mais</strong>.</p>`,
  negativo:`<p><strong>Desânimo Restritivo:</strong> Seu deslocamento é reduzido em <strong>5 metros</strong>. Em testes de <em>Conexão</em>, deve rolar dois dados e escolher o pior resultado, e dados bônus para Conexão não funcionam enquanto a passiva estiver ativa.</p>`,
  duracao:"Até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Intuição",
  testeAlvo:"Conexão"
},{
  id:"p18",
  nome:"Furtividade Sombria",
  sub:"Furtim tenebris",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/d12b94e12a3d36b6ba8953a49b2ff269fc52f6f2_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Névoa",
  descricao:`<p><strong>O personagem mergulha nas sombras</strong>, desaparecendo diante dos olhos de todos como se fosse engolido pela escuridão.</p>`,
  positivo:`<p><strong>Desaparecimento Total:</strong> O personagem realiza um teste de <strong>1d10 + Teste de Furtividade</strong> contra a <em>DT Sobrenatural</em> (<strong>1d20 puro</strong>, rolado pelo mestre). Se for bem-sucedido, desaparece da percepção de todos os aliados e inimigos. Seu próximo ataque ou magia será crítico se acertar com rolagem de <strong>15 ou mais</strong>, e causará <strong>+1D6</strong> de dano de <em>Névoa</em>.</p>`,
  negativo:`<p><strong>Exposição Parcial:</strong> Inimigos que testemunharem o desaparecimento podem fazer um teste de <em>Percepção</em> como ação livre para tentar localizá-lo. Se forem bem-sucedidos e acertarem um ataque com rolagem de <strong>17 ou mais</strong>, causam crítico. Se nenhum inimigo estiver observando, esse efeito é anulado. Além disso, o personagem tem o movimento reduzido em <strong>3 metros</strong> enquanto a furtividade estiver ativa.</p>`,
  duracao:"2 turnos ou até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Furtividade",
  testeAlvo:"Percepção"
}

















  ]
};
// ===========================
//  LÓGICA DO UI  (corrigida)
// ===========================
const TC = (() => {
  // LocalStorage com namespace por host+path para não conflitar com outros saves do seu site
  const STORAGE_NS = "tdc:grimorio";
  const LS_KEY = `${STORAGE_NS}:${location.host}${location.pathname}:ids`;

  // Migração automática do chave antiga, se existir
  try {
    const legacy = localStorage.getItem("tc_grimorio_ids");
    if (legacy && !localStorage.getItem(LS_KEY)) {
      localStorage.setItem(LS_KEY, legacy);
    }
  } catch (e) { /* ignore */ }

  let state = {
    tab: "magias",
    page: 1,
    perPage: 20,
    elemento: "",
    dano: "",
    busca: ""
  };

  // Helpers LocalStorage
  const getLearned = () => {
    try { return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); }
    catch { return []; }
  };
  const setLearned = (arr) => localStorage.setItem(LS_KEY, JSON.stringify(arr));
  const isLearned  = (id) => getLearned().includes(id);
  const toggleLearn = (id) => {
    const cur = new Set(getLearned());
    cur.has(id) ? cur.delete(id) : cur.add(id);
    setLearned([...cur]);
    render();           // atualiza listas
    showDetailById(id); // mantém botão do detalhe sincronizado
  };

  // Open / Close
  function open(){
    document.getElementById("tcOverlay").style.display = "flex";
    mountFilters();
    render();
  }
  function close(){
    document.getElementById("tcOverlay").style.display = "none";
    hideDetail();
  }

  // Mount dynamic filter options
  function mountFilters(){
    const elSel = document.getElementById("tcFiltroElemento");
    const dnSel = document.getElementById("tcFiltroDano");
    const all = [...DATASET.magias, ...DATASET.passivas];

    const elementos = Array.from(new Set(all.map(x=>x.elemento).filter(Boolean))).sort();
    const danos = Array.from(new Set(all.map(x=>x.tipoDano).filter(Boolean))).sort();

    elSel.innerHTML = '<option value="">Elemento</option>' + elementos.map(v=>`<option>${v}</option>`).join('');
    dnSel.innerHTML = '<option value="">Tipo de dano</option>' + danos.map(v=>`<option>${v}</option>`).join('');
  }

  // Data source by tab
  function currentList(){
    if(state.tab === "magias") return DATASET.magias;
    if(state.tab === "passivas") return DATASET.passivas;
    // aprendidas
    const learned = new Set(getLearned());
    return [...DATASET.magias, ...DATASET.passivas].filter(x=>learned.has(x.id));
  }

  // Filters
  function applyFilters(list){
    const q = state.busca.toLowerCase();
    return list.filter(it=>{
      if(state.elemento && it.elemento !== state.elemento) return false;
      if(state.dano && it.tipoDano !== state.dano) return false;
      if(q && !it.nome.toLowerCase().includes(q)) return false;
      return true;
    });
  }

  // Render grid & pagination
  function render(){
    const grid = document.getElementById("tcGrid");
    const pag  = document.getElementById("tcPaginacao");

    const base = currentList();
    const list = applyFilters(base);
    const totalPages = Math.max(1, Math.ceil(list.length / state.perPage));
    if(state.page > totalPages) state.page = 1;

    const slice = list.slice((state.page-1)*state.perPage, state.page*state.perPage);

    grid.innerHTML = slice.map(it => `
      <article class="tc-card" onclick="TC.showDetail('${it.id}')">
        <img class="tc-img" src="${it.img || ''}" alt="">
        <div class="tc-name">${it.nome}</div>
        <div class="tc-meta">${it.tipoDano || '-'} • ${it.elemento || '-'}</div>
      </article>
    `).join("");

    // pagination
    pag.innerHTML = "";
    for(let i=1;i<=totalPages;i++){
      const b = document.createElement("button");
      b.className = "tc-page" + (i===state.page ? " active" : "");
      b.textContent = i;
      b.onclick = () => { state.page = i; render(); };
      pag.appendChild(b);
    }

    // tabs active state
    document.querySelectorAll("#tcOverlay .tc-tab").forEach(b=>b.classList.remove("active"));
    document.querySelector(`#tcOverlay .tc-tab[data-tab="${state.tab}"]`)?.classList.add("active");
  }

  // DETAIL
  function showDetailById(id){
    const it = [...DATASET.magias, ...DATASET.passivas].find(x=>x.id===id);
    if(it) showDetail(id);
  }
  function showDetail(id){
    const it = [...DATASET.magias, ...DATASET.passivas].find(x=>x.id===id);
    if(!it) return;

    const isPassiva = DATASET.passivas.some(p=>p.id===id);
    const box = document.getElementById("tcDetailBox");
    const learned = isLearned(id);

    const top =
      `<div class="tc-box-head">
         <img class="tc-detail-img" src="${it.img||''}" alt="">
         <div class="tc-title">${it.nome}</div>
         ${it.sub ? `<div class="tc-sub">${it.sub}</div>` : ""}
       </div>`;

   const main = `
<div class="tc-section">
  <div class="tc-h2">${isPassiva ? "Descrição" : "O que acontece quando usa?"}</div>
  <div class="tc-desc">${it.descricao || ""}</div>

  <table class="tc-table" style="margin-top:14px">
    <thead>
      <tr>
        <th>Duração</th>
        <th>${isPassiva ? "Nível" : (it.tagLevel || "Nível")}</th>
        <th>Alcance</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>${it.duracao || "-"}</td>
        <td>${isPassiva ? it.nivel : (it.tagLevelResposta || it.nivel) || "-"}</td>
        <td>${it.alcance || "-"}</td>
      </tr>
    </tbody>
  </table>

  ${isPassiva ? `
    <div class="tc-good">Positivo</div>
    <div class="tc-desc">${it.positivo || "-"}</div>
    <div class="tc-bad">Negativo</div>
    <div class="tc-desc">${it.negativo || "-"}</div>
  ` : ""}

  <div class="tc-h2">Informações</div>
  <div class="tc-desc"><b>Tipo de dano:</b> ${it.tipoDano || "-"}</div>
  <div class="tc-desc"><b>Elemento:</b> ${it.elemento || "-"}</div>
  <div class="tc-desc"><b>Teste do conjurador:</b> ${it.testeConjurador || "-"}</div>
  <div class="tc-desc"><b>Teste do Alvo:</b> ${it.testeAlvo || "-"}</div>
</div>`;

    const actions =
      `<div class="tc-actions">
         <button class="tc-btn primary" onclick="TC.toggleLearn('${id}')">${learned ? "Remover do Grimório" : "Aprender"}</button>
         <button class="tc-btn ghost" onclick="TC.hideDetail()">Fechar</button>
       </div>`;

    box.innerHTML = top + main + actions;
    document.getElementById("tcDetail").style.display = "flex";
    setHash(id);
  }
  function hideDetail(){
    document.getElementById("tcDetail").style.display = "none";
    clearHash(); // <-- corrigido (era clearhash)
  }

  // Listeners (tabs + filtros + busca)
  document.addEventListener("click", (e)=>{
    const t = e.target.closest("#tcOverlay .tc-tab");
    if(!t) return;
    state.tab = t.dataset.tab; state.page = 1; render();
  });
  document.getElementById("tcFiltroElemento").addEventListener("change", e=>{ state.elemento = e.target.value; state.page=1; render(); });
  document.getElementById("tcFiltroDano").addEventListener("change", e=>{ state.dano = e.target.value; state.page=1; render(); });
  document.getElementById("tcBusca").addEventListener("input", e=>{ state.busca = e.target.value; state.page=1; render(); });

  // ===========================
  //   SUPORTE A HYPERLINK
  //   #tc=<id>   ou   ?tc=<id>
  //   (fallback: #<id>, ?id=<id>, ?magia=<id>, ?passiva=<id>)
  // ===========================

  function normalizeId(str){
    if(!str) return "";
    return String(str)
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "")
      .trim()
      .toLowerCase();
  }

  function idFromURL(){
    const h = window.location.hash.replace(/^#/, "");
    const qs = new URLSearchParams(window.location.search);

    let id = null;
    if (h) {
      id = h.startsWith("tc=") ? decodeURIComponent(h.slice(3)) : decodeURIComponent(h);
    }
    id = id || qs.get("tc") || qs.get("id") || qs.get("magia") || qs.get("passiva");
    return id || null;
  }

  function setHash(id){
    const url = new URL(location.href);
    url.hash = `tc=${encodeURIComponent(id)}`;
    history.replaceState(null, "", url.href);
  }

  function clearHash(){
    if (location.hash.startsWith("#tc=")) {
      history.replaceState(null, "", location.pathname + location.search);
    }
  }

  function openById(id){
    if(!id) return;
    const allItems = [...DATASET.magias, ...DATASET.passivas];
    const norm = normalizeId(id);

    const candidates = [
      norm,
      norm.replace(/\s+/g, "_"),
      norm.replace(/\s+/g, ""),
      norm.replace(/_/g, "")
    ];

    const item = allItems.find(x =>
      candidates.some(c => normalizeId(x.id) === c || normalizeId(x.nome) === c)
    );

    if(!item){
      console.warn("TC: item não encontrado para id:", id);
      return;
    }

    // Define aba correta
    if(DATASET.magias.some(m => m.id === item.id)){
      state.tab = "magias";
    } else if(DATASET.passivas.some(p => p.id === item.id)){
      state.tab = "passivas";
    } else {
      state.tab = "aprendidas";
    }

    open();
    showDetail(item.id);

    document.querySelectorAll("#tcOverlay .tc-tab").forEach(b=>b.classList.remove("active"));
    document.querySelector(`#tcOverlay .tc-tab[data-tab="${state.tab}"]`)?.classList.add("active");
  }

  function syncFromURL(){
    const id = idFromURL();
    if (id) openById(id);
  }

  // --- Inicialização ---
  window.addEventListener("DOMContentLoaded", () => {
    syncFromURL();

    // Captura clique em qualquer link com #tc= ou #id ou ?tc=
    document.body.addEventListener("click", e => {
      const a = e.target.closest("a[href]");
      if (!a) return;

      try {
        const url = new URL(a.href, location.href);
        let tc = null;

        // Prioriza hash: #tc=valor  ou #valor
        if (url.hash) {
          if (url.hash.startsWith("#tc=")) tc = url.hash.slice(4);
          else tc = url.hash.replace(/^#/, "");
        }

        // fallback para query params
        tc = tc || url.searchParams.get("tc") || url.searchParams.get("id") || url.searchParams.get("magia") || url.searchParams.get("passiva");

        if (tc) {
          e.preventDefault();          // não recarrega a página
          tc = decodeURIComponent(tc);
          setHash(tc);                 // atualiza o hash da URL
          openById(tc);                // abre na hora
        }
      } catch (err) {
        console.error("TC: erro ao processar link:", err);
      }
    });
  });

  // Mudança manual no hash (voltar/avançar)
  window.addEventListener("hashchange", syncFromURL);

  // API pública
  return { open, close, showDetail, hideDetail, toggleLearn, openById };
})();
</script>

<!-- LINKS / BOTÕES PARA TESTE -->
<!-- <button data-criatura="Musplum" class="bestiario-btn">Abrir Bestiário</button> -->
<!-- <button data-criatura="Raposa Selvagem" class="bestiario-btn">Abrir Raposa Selvagem</button> -->
<!-- <a href="#" data-criatura="Andaluz" class="bestiario-btn">Abrir Andaluz</a> -->


<!-- POPUP DO BESTIÁRIO -->
<div id="popup-bestiario" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center;">
  <div style="position:relative;width:90%;max-width:1200px;height:80%;background:#111;border-radius:12px;overflow:hidden;">
    <iframe id="iframe-bestiario"
      src=""
      width="100%"
      height="100%"
      style="border:none;">
    </iframe>
    <button onclick="closeBestiario()" style="position:absolute;top:10px;right:10px;background:red;color:white;border:none;padding:10px 15px;border-radius:6px;cursor:pointer;">X</button>
  </div>
</div>

<script>
  // Função para abrir o popup
  function openBestiario(nome) {
    const url = "https://bestiario-terrasdecalisto.netlify.app/?criatura=" + encodeURIComponent(nome);
    document.getElementById("iframe-bestiario").src = url;
    document.getElementById("popup-bestiario").style.display = "flex";
  }

  // Função para fechar o popup
  function closeBestiario() {
    document.getElementById("popup-bestiario").style.display = "none";
    document.getElementById("iframe-bestiario").src = ""; // limpa para não pesar
  }

  // Ativa automaticamente todos os elementos com a classe .bestiario-btn
  document.querySelectorAll(".bestiario-btn").forEach(el => {
    el.addEventListener("click", e => {
      e.preventDefault();
      const nome = el.dataset.criatura;
      if (nome) {
        openBestiario(nome);
      }
    });
  });
</script>

          
<button id="openItemPopup" class="mochila-btn"></button>


<style>
  .mochila-btn {
    background-image: url('imagens/BotaoMochila.png'); /* nome da sua imagem PNG */
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    width: 200px;   /* ajuste conforme o tamanho real da imagem */
    height: 70px;

    border: none;
    padding: 0;
    margin: 0;
    cursor: pointer;
    background-color: transparent;
  }

  .mochila-btn:hover {
    filter: brightness(1.1);
    transform: scale(1.02);
  }

  .mochila-btn:active {
    filter: brightness(0.9);
    transform: scale(0.98);
  }
</style>
<!-- Visual do item equipado -->
<div id="equippedItemDisplay">
  <h4>Item Equipado:</h4>
  <div id="equippedItemSlot">

  </div>
</div>
<!-- Botão para abrir o popup -->
<button id="openPopup">Abrir Rolagem de Dano</button>

<!-- Popup -->
<div id="dicePopup" class="popup">
  <div class="popup-content">
    <span class="close">&times;</span>
    <h2>Rolagem de Dano</h2>

    <div id="infoContainer">

    </div>

    <label>Digite sua fórmula de dano:</label>
    <input type="text" id="diceInput" placeholder="ex: 2d8+1d6+4d12">
<button type="button" onclick="rollDice()">Rolar Dados</button>
<div id="modoRegraContainer">
  <button id="ativarRegraBtn">🎲 Melhores/Piores</button>
  <button id="usarModificadorBtn">➕ Modificador</button>
</div>
    <div id="diceResultArea">
      <div id="diceGifContainer">
<img id="diceGif" src="" alt="Rolando..." style="display: none;" />
        <div id="diceOverlay"></div>
      </div>
      <div id="detailedResults"></div>
    </div>
  </div>
</div>
  
          <div class="form-row">
            <div class="form-group2">
              <label for="for">Brutalidade:</label>
              <input type="number" id="for" name="for" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="for-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="for-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="des">Agilidade:</label>
              <input type="number" id="des" name="des" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="des-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="des-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="con">Determinação:</label>
              <input type="number" id="con" name="con" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="con-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="con-bonus-damage">0</span></span>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group2">
              <label for="int">Preservação:</label>
              <input type="number" id="int" name="int" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="int-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="int-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="sab">Libertação:</label>
              <input type="number" id="sab" name="sab" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="sab-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="sab-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="car">Conexão:</label>
              <input type="number" id="car" name="car" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="car-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="car-bonus-damage">0</span></span>
              </div>
            </div>
          </div>
  
          <div class="ButonsSave">
            <form id="character-form">
                <div class="button-group">
                    <button type="submit">Salvar Personagem</button>
                    <button type="button" id="load-character">Carregar Personagem</button>
                </div>
                <!--<div class="button-group">
                    <button type="button" id="download-character">Salvar Personagem</button>
                    <input type="file" id="upload-character" accept=".json" style="display: none;">
                    <button type="button" id="load-file-character">Carregar Personagem de Arquivo</button>
                </div> -->
            </form>
        
            <div id="character-select-section" style="display: none;">
                <span id="close-select-section" class="close-button">X</span>
                <h2>Escolha seu Personagem</h2>
                <select id="character-select"></select>
                <button type="button" id="confirm-load">Carregar</button>
            </div>
        </div>

        <div id="save-message" style="display: none;"></div>

        <!-- gerar imagem-->
        
        
        
<!-- Habilita mapa interativo -->
<!-- Habilita mapa interativo -->
<!-- Habilita mapa interativo -->
<div id="mapa-interativo" style="width:100%;max-width:1000px;margin:auto;aspect-ratio:16/12;overflow:hidden;">
  <iframe 
    src="https://mapa-terras-de-calisto.netlify.app/" 
    width="100%" 
    height="100%" 
    style="border:none;border-radius:12px;touch-action:none;" 
    allowfullscreen>
  </iframe>
</div>

<style>
  /* Impede que a página role quando o dedo está sobre o iframe */
  #mapa-interativo {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }
</style>
<!-- isso aqui é responsável por espaço no final do site-->
        <div style="height:clamp(10px,2.5vw,20px);width:100%;" aria-hidden="true"></div>




    <!-- gerar imagem-->

        <!-- gerar imagem-->
        
          
        
  
      <div id="character-view-section" style="display: none;">
        <h2>Seu Personagem</h2>
        <div id="character-details">
          <p>Nome: <span id="char-name-view"></span></p>
          <p>Raça: <span id="char-race-view"></span></p>
          <p>Passado: <span id="char-past-view"></span></p>
        </div>
      </div>
    </div>
    
    <div id="save-message" style="display: none; position: fixed; top: 10px; left: 10px; background-color: #4CAF50; color: white; padding: 10px; border-radius: 5px;"></div>
  </div>
  <script src="script.js"></script>
</body>
</html>
































