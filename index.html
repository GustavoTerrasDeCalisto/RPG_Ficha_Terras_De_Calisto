<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terras de Calisto - RPG</title>
  <link rel="stylesheet" href="style.css">

  <!-- Ícone do navegador -->
  <link rel="icon" href="/imagens/logo.png" type="image/png">

  <!-- Canonical -->
  <link rel="canonical" href="https://terras-de-calisto-ficha-rpg.netlify.app/">

  <!-- Primary Meta Tags -->
  <meta name="title" content="Terras de Calisto - RPG">
  <meta name="description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore histórias épicas e mergulhe em aventuras inesquecíveis no nosso RPG.">
  <meta name="keywords" content="RPG, Terras de Calisto, ficha RPG, aventuras, fantasia, role-playing game">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://terras-de-calisto-ficha-rpg.netlify.app/">
  <meta property="og:title" content="Terras de Calisto - RPG">
  <meta property="og:description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore histórias épicas e mergulhe em aventuras inesquecíveis no nosso RPG.">
  <meta property="og:image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">

  <!-- Google-specific -->
  <meta itemprop="name" content="Terras de Calisto RPG">
  <meta itemprop="description" content="Descubra o mundo de Terras de Calisto. Crie personagens e explore aventuras incríveis no RPG de fantasia.">
  <meta itemprop="image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://terras-de-calisto-ficha-rpg.netlify.app/">
  <meta name="twitter:title" content="Terras de Calisto - RPG">
  <meta name="twitter:description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore histórias épicas e mergulhe em aventuras inesquecíveis no nosso RPG.">
  <meta name="twitter:image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">
</head>


<body>
          <header>
          <nav class="nav-bar">
            <div class="logo">
              <a href="https://terrasdecalistoficha.wordpress.com/" target="_blank">
                  <img src="imagens/logo.png" alt="Logo Terras de Calisto">
              </a>
          </div>
          <div id="side-menu" class="side-menu">
            <!-- Botão para resetar perícias (exemplo simples) -->

            <ul>
              <button class="close-button" onclick="toggleMenu()">Fechar</button> <!-- Botão de Fechar -->
<!-- mudança de menu de vida atual e status e os carai virouuuuuuuuuu periciasss-->

<div class="container-centralizado">
  <!--<h1>Perícias</h1> -->
  <p class="descrição_pericias">
    
    <strong>Perícias, Talentos e Armas (P.T.A.) </strong>
    
    <p>Escolha três P.T.A. para receber um bônus de <span id="pta-bonus-value">+2</span>.</p>
    <p>Além disso, pode adicionar <span id="past-bonus-value">+2</span> às perícias concedidas pelo seu passado ou raça.</p>
    <div id="character-info-section-1" style="margin: 0px 0;">
      <button class="toggle-button2" onclick="toggleSectionInfo('expandableSectionInfo1')" 
        style="background-color: red; color: white; padding: 4px 10px; border: none; border-radius: 8px; font-size: 12px; cursor: pointer;">
        Importante!
      </button><button id="resetSkillsButton">Resetar Perícias</button>

    
      <div id="expandableSectionInfo1" style="display: none; margin-top: 15px; background-color: #555151; padding: 20px; border-radius: 10px; border: 1px solid #292727;">
        <h1 class="descrição_pericias" style="font-size: 11px;">
          <strong>Observação:</strong>
          <p>
            Cada talento escolhido concede +2 nos testes relacionados à perícia. Alguns talentos também desbloqueiam o uso de certos tipos de equipamento. Caso o personagem tente usar um equipamento sem o talento correspondente, ele sofre desvantagem nos testes de acerto.
          </p>
        </h1>
      </div>
    </div>
    
      </p>
  <div class="pericias_arrumado">
    <div class="pericias">
      <div class="pericia" data-name="Espadas" data-requirement="Brutalidade" data-description="Desbloqueia o uso de: Espada curta, Florete, Punhal, Adaga, Espada longa, Espada bastarda, Espadão, Claymore, Cimitarra e Sabre.">
        <p>Espadas</p>
       <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Brutalidade</span>
        <span class="description">Desbloqueia o uso de: Espada curta, Florete, Punhal, Adaga, Espada longa, Espada bastarda, Espadão, Claymore, Cimitarra e Sabre.</span>
      </div>
      
      <div class="pericia" data-name="Machados e Martelos" data-requirement="Brutalidade" data-description="Desbloqueia o uso de: Machado de batalha, Machado de guerra, Machado de arremesso, Martelo de guerra, Maça, Clava simples, Clava com espinhos e Mangual.">
        <p>Machados e Martelos</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Brutalidade</span>
        <span class="description">Desbloqueia o uso de: Machado de batalha, Machado de guerra, Machado de arremesso, Martelo de guerra, Maça, Clava simples, Clava com espinhos e Mangual.</span>
      </div>
      
      <div class="pericia" data-name="Lanças e Armas com Haste" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Lança curta, Lança longa, Pique, Alabarda, Dardo e Javelin.">
        <p>Lanças e Armas com Haste</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Lança curta, Lança longa, Pique, Alabarda, Dardo e Javelin.</span>
      </div>
      
      <div class="pericia" data-name="Arcos e Bestas" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Arco curto, Arco longo, Arco recurvo, Arco composto, Besta de mão, Besta leve e Besta pesada.">
        <p>Arcos e Bestas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Arco curto, Arco longo, Arco recurvo, Arco composto, Besta de mão, Besta leve e Besta pesada.</span>
      </div>
      
      <div class="pericia" data-name="Katanas" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Katanas, Ninja-tos, Tantos, Nodachis e Nagamakis.">
        <p>Katanas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Katanas, Ninja-tos, Tantos, Nodachis e Nagamakis.</span>
      </div>
      
      <div class="pericia" data-name="Fundas e Estilingues" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Funda e Estilingue.">
        <p>Fundas e Estilingues</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Funda e Estilingue.</span>
      </div>
      
      <div class="pericia" data-name="Armas Exóticas e Diversas" data-requirement="Libertação" data-description="Desbloqueia o uso de: Nunchaku, Kusarigama, Kama, Tessen, Shuriken e Kunai.">
        <p>Armas Exóticas e Diversas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Libertação</span>
        <span class="description">Desbloqueia o uso de: Nunchaku, Kusarigama, Kama, Tessen, Shuriken e Kunai.</span>
      </div>
      
      <div class="pericia" data-name="Armas de Cerco" data-requirement="Libertação" data-description="Desbloqueia o uso de: Catapulta, Balista, Trebuchet e Ariete.">
        <p>Armas de Cerco</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Libertação</span>
        <span class="description">Desbloqueia o uso de: Catapulta, Balista, Trebuchet e Ariete.</span>
      </div>
      
      <div class="pericia" data-name="Escudos" data-requirement="Determinação" data-description="Desbloqueia o uso de: Broquel, Escudo redondo, Escudo de torre e Pavês.">
        <p>Escudos</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Determinação</span>
        <span class="description">Desbloqueia o uso de: Broquel, Escudo redondo, Escudo de torre e Pavês.</span>
      </div>
      



    </div>



    </div>
 <div class="pericias_arrumado">
  <div class="pericias">
    <div class="pericia" data-name="Acrobacia" data-requirement="Agilidade" data-description="Usada para realizar manobras acrobáticas, como saltos, piruetas e manobras evasivas durante o combate.">
        <p>Acrobacia</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement"></span>
        <span class="description"></span>
    </div>
    <div class="pericia" data-name="Adestrar Animais" data-requirement="Conexão" data-description="Permite treinar e controlar animais, além de melhorar a interação com criaturas.">
        <p>Adestrar Animais</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement"></span>
        <span class="description"></span>
    </div>
    <div class="pericia" data-name="Atletismo" data-requirement="Brutalidade" data-description="Foca em atividades físicas intensas, como correr, nadar, escalar ou realizar feitos de força.">
      <p>Atletismo</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Atuação" data-requirement="Conexão" data-description="Envolve a habilidade de entreter uma audiência através de performances artísticas como canto, dança, música ou atuação.">
      <p>Atuação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Cavalgar" data-requirement="Agilidade" data-description="Permite ao personagem montar e controlar animais de montaria com eficiência, tanto em viagens quanto em combate.">
      <p>Cavalgar</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Conhecimento" data-requirement="Preservação" data-description="Reflete a erudição do personagem em diversas áreas, como história, geografia, religião, arcana e outras ciências.">
      <p>Conhecimento</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Cura" data-requirement="Libertação" data-description="Permite ao personagem prestar primeiros socorros, tratar ferimentos e doenças, e utilizar equipamentos médicos de forma eficaz.">
      <p>Cura</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Diplomacia" data-requirement="Conexão" data-description="Habilidade de negociar, fazer acordos e influenciar outras pessoas de maneira amigável e persuasiva.">
      <p>Diplomacia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Enganação" data-requirement="Conexão" data-description="Usada para mentir, blefar ou enganar outros, seja em conversas, jogos de azar, ou outras situações sociais.">
      <p>Enganação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Furtividade" data-requirement="Agilidade" data-description="Habilidade de se mover sem ser percebido, seja para evitar inimigos, realizar ataques furtivos ou se infiltrar em áreas protegidas.">
      <p>Furtividade</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Identificar Magia" data-requirement="Preservação" data-description="Permite ao personagem analisar e identificar magias, itens mágicos e encantamentos.">
      <p>Identificar Magia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Iniciativa" data-requirement="Agilidade" data-description="Determina a rapidez do personagem em reagir em situações de combate, permitindo agir antes de seus oponentes.">
      <p>Iniciativa</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Intimidação" data-requirement="Conexão" data-description="Capacidade de forçar ou coagir outros através de ameaças, postura dominante ou demonstrações de poder.">
      <p>Intimidação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Intuição" data-requirement="Libertação" data-description="Permite ao personagem perceber intenções escondidas, emoções ou mentiras através da observação cuidadosa.">
      <p>Intuição</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Jogatina" data-requirement="Conexão" data-description="Habilidade de participar e vencer jogos de azar, além de manipular as regras e enganar outros jogadores.">
      <p>Jogatina</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Ladinagem" data-requirement="Agilidade" data-description="Habilidade de realizar atos ilícitos, como abrir fechaduras, desarmar armadilhas e roubar objetos discretamente.">
      <p>Ladinagem</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Obter Informação" data-requirement="Conexão" data-description="Capacidade de extrair informações de forma sutil ou direta, seja por conversas casuais ou por interrogatórios.">
      <p>Obter Informação</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Ofício" data-requirement="Preservação" data-description="Reflete a habilidade em profissões e artesanato, como forja, carpintaria, alquimia, entre outras.">
      <p>Ofício</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Percepção" data-requirement="Libertação" data-description="Capacidade de notar detalhes ao seu redor, como sons, cheiros e movimentos sutis, permitindo detectar perigos ou oportunidades ocultas.">
      <p>Percepção</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Sobrevivência" data-requirement="Determinação" data-description="Habilidade de viver em ambientes hostis, caçar, encontrar comida, rastrear criaturas e se orientar na natureza.">
      <p>Sobrevivência</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Alquimia" data-requirement="Preservação" data-description="Habilidade de misturar ingredientes para criar poções, elixires e outros itens alquímicos. Inclui o conhecimento sobre reagentes, catalisadores e processos químicos mágicos.">
      <p>Alquimia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Armadilhas" data-requirement="Agilidade" data-description="Capacidade de criar, detectar e desarmar armadilhas, tanto mecânicas quanto mágicas. Inclui o uso de ferramentas específicas e truques de sabotagem.">
    <p>Armadilhas</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Arquearia/Atirar" data-requirement="Agilidade" data-description="Maestria no uso de armas de fogo,arcos e bestas, tanto para combate quanto para caça. Inclui a precisão no disparo e o conhecimento sobre tipos de flechas, munições e suas aplicações.">
    <p>Arquearia/Atirar</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Disfarces" data-requirement="Conexão" data-description="Habilidade de se passar por outra pessoa através de mudanças na aparência, voz e comportamento. Inclui o uso de roupas, maquiagem e acessórios.">
    <p>Disfarces</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escudaria" data-requirement="Brutalidade" data-description="Uso especializado de escudos em combate, tanto para bloquear ataques quanto para desferir golpes. Inclui técnicas de defesa e contra-ataque.">
    <p>Escudaria</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escavação" data-requirement="Determinação" data-description="Habilidade de minerar e escavar em terrenos difíceis, encontrando materiais valiosos ou abrindo caminho através de obstáculos naturais.">
    <p>Escavação</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Liderança" data-requirement="Conexão" data-description="Capacidade de comandar, inspirar e coordenar grupos em combate ou em outras situações complexas. Inclui estratégias de batalha e organização de equipes.">
    <p>Liderança</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Navegação" data-requirement="Determinação" data-description="Habilidade de se orientar em mar aberto ou em grandes áreas desconhecidas, usando mapas, estrelas ou outros métodos para encontrar o caminho certo.">
    <p>Navegação</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Psicologia" data-requirement="Libertação" data-description="Capacidade de analisar e compreender o comportamento, emoções e motivações das pessoas, ajudando a prever ações e manipular suas emoções.">
    <p>Psicologia</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Tática" data-requirement="Preservação" data-description="Habilidade de planejar estratégias complexas para combates ou desafios, considerando os pontos fortes e fracos de aliados e inimigos.">
    <p>Tática</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Alfaiataria" data-requirement="Preservação" data-description="Habilidade de criar e consertar roupas e armaduras leves, adaptando vestimentas para diversas condições e estilos.">
    <p>Alfaiataria</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Arqueologia" data-requirement="Preservação" data-description="Conhecimento de civilizações antigas e a habilidade de encontrar, estudar e interpretar artefatos e ruínas históricas.">
    <p>Arqueologia</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Aprimoramento de Armas" data-requirement="Brutalidade" data-description="Capacidade de afiar, equilibrar e melhorar armas de combate, aumentando sua eficiência e durabilidade.">
    <p>Aprimoramento de Armas</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Carisma" data-requirement="Conexão" data-description="Habilidade natural de influenciar e atrair outras pessoas com charme, confiança e presença marcante, útil em situações sociais e negociações.">
    <p>Carisma</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Culinária" data-requirement="Preservação" data-description="Habilidade de preparar alimentos nutritivos e pratos elaborados, incluindo o uso de ingredientes raros para efeitos especiais, como regeneração ou resistência a venenos.">
    <p>Culinária</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Demolição" data-requirement="Brutalidade" data-description="Capacidade de destruir construções, desativar estruturas e usar explosivos ou outros meios para abrir caminho ou criar armadilhas.">
    <p>Demolição</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escalada" data-requirement="Agilidade" data-description="Habilidade de escalar superfícies difíceis, como penhascos, paredes ou estruturas, usando técnica, força e equipamentos adequados.">
    <p>Escalada</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Esgrima" data-requirement="Agilidade" data-description="Maestria no uso de espadas leves e técnicas rápidas de ataque e defesa, focando em precisão e agilidade durante o combate.">
    <p>Esgrima</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Herbalismo" data-requirement="Preservação" data-description="Conhecimento sobre plantas e ervas, sua coleta e uso para criar remédios, poções e venenos.">
    <p>Herbalismo</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Vigilância" data-requirement="Libertação" data-description="Habilidade de manter atenção constante em busca de ameaças ou eventos importantes, permitindo detectar perigos iminentes ou movimentos sutis à distância.">
    <p>Vigilância</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>
      
</div>
  


    <!-- Repita a estrutura acima para cada perícia -->
</div>

  

    <!-- Repita a estrutura para outras perícias -->
  </div>
</div>


          
<!-- mudança de menu de vida atual e status e os carai-->

              </div>
            </ul>
        </div>
              <div class="nav-list">
                  <ul>
                    <button class="toggle-button2" onclick="toggleMenu()">Talentos</button>
 
 <!-- Botão para abrir o popup -->
<button id="abrir-status-rpg" class="status-rpg-btn">Editar</button>

<!-- Popup -->
<div id="status-rpg-popup" class="status-rpg-popup oculto">
  <div class="status-rpg-popup-content">
    <span id="fechar-status-rpg" class="status-rpg-close">&times;</span>
    <div id="status-rpg-app"></div>
  </div>
</div>


                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/" class="nav-link" target="_blank">Wiki</a></li>
                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/racas/" class="nav-link" target="_blank">Raças</a></li>
                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/passados/" class="nav-link" target="_blank">Passados</a></li>
                    <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/magias/" class="nav-link" target="_blank">Magias</a></li>
                       <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/" class="nav-link" target="_blank">Passivas</a></li>
                                      <li class="nav-item"><a href="https://bestiario-terrasdecalisto.netlify.app/" class="nav-link" target="_blank">Bestiário</a></li>

 <!-- target="_blank" .....sempre colocar antes do >NOME_DO_LINK é para abrir em outra aba, uma nova aba, não esquecer-->
 <button onclick="menuShow()" class="button-menu">
  <img class="icon" src="imagens/menu.svg" alt="Menu">                      
</button>


              </div> 

                      
                  </ul>
                 
              </div>
<button id="abrirPopupRacaCustom" class="toggle-button-custom">Tokens</button>

<div id="popupRacaCustom" class="popup-overlay-custom">
  <div class="popup-content-custom" id="racaContentCustom"></div>
</div>

<div id="popupImagemRacaCustom" class="popup-overlay-custom">
  <div class="popup-content-custom" id="imagemRacaContentCustom"></div>
</div>
    </nav>
          </div>
          <div class="mobile-menu">

              <ul>
                                        <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/" class="nav-link" target="_blank">Wiki</a></li>

                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/racas/" class="nav-link" target="_blank">Raças</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/passados/" class="nav-link" target="_blank">Passados</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/magias/" class="nav-link" target="_blank">Magias</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/" class="nav-link" target="_blank">Passivas</a></li>
                <li class="nav-item"><a href="https://bestiario-terrasdecalisto.netlify.app/" class="nav-link" target="_blank">Bestiário</a></li>

                  <!-- target="_blank" .....sempre colocar antes do >NOME_DO_LINK é para abrir em outra aba, uma nova aba, não esquecer-->
                  </div>
                  <!-- talvez adicionar
              
              <div class="login-button">
                <button><a href="#">Entrar</a></button> -->

                
            </ul>
        </div>


    </nav>

 
</header>

<body>


  <div id="app">

<!-- Popup tutorial -->
<div id="tutorialPopup" class="popup">
  <div class="popup-content">
<div class="chess-button-container">
  <button id="closeTutorial" class="close" aria-label="Fechar tutorial">&times;</button>
  <button id="openChessPopup" class="chess-btn">Modo Chess</button>
</div>

    <div class="tutorial-flex">

      <div class="tutorial-section">
        <h2>1. Introdução</h2>
        <p>
          Terras de Calisto é um RPG de mesa de fantasia sombria onde os jogadores interpretam personagens em um mundo moldado pelas forças de <strong class="det">Fé</strong>, <strong class="pre">Caos</strong>, <strong class="lib">Poder</strong> e <strong class="cnx">Desconhecido</strong>.
        </p>
        <p>
          Os jogadores tomam decisões que afetam diretamente a narrativa, enquanto o Mestre de Jogo (GM) conduz os eventos, descreve os cenários e interpreta NPCs.
        </p>
        <img src="/imagens/mundo_calisto.png" alt="Mapa sombrio de Calisto com ícones dos quatro elementos" style="width:100%; border-radius:10px;">
      <a href="https://mapa-terras-de-calisto.netlify.app/"
   target="_blank" rel="noopener noreferrer"
   class="btn-mapa">🗺️ Abrir Mapa – Terras de Calisto</a>

<style>
  .btn-mapa{
    display:inline-block;
    padding:12px 18px;
    border-radius:12px;
    border:1px solid #ddd;
    background:#111;
    color:#fff;
    font:600 16px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    text-decoration:none;
    box-shadow:0 4px 12px rgba(0,0,0,.12);
    transition:transform .06s ease, box-shadow .2s ease, opacity .2s ease;
  }
  .btn-mapa:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.18); }
  .btn-mapa:active{ transform:translateY(0); opacity:.9; }
</style>

      </div>

      <div class="tutorial-section">
        <h2>2. Criação</h2>
        <p>Na criação do personagem, o jogador escolhe:</p>

          <li>Uma <strong class="grad-text">Raça</strong></li>
          <li>Um <strong class="grad-text">Passado</strong></li>
          <li>Um <strong class="grad-text">Equipamento Inicial</strong></li>
          <li><strong class="especial">+3 Talentos Extras</strong> (além dos que Raça e Passado concedem)</li>
          <li>Redistribui seus <strong class="grad-text">Atributos</strong></li>

<p>
  O personagem começa com todos os atributos em <span class="bru">14</span>, representando o nível 0.  
  Para iniciar, redistribua esses pontos, garantindo no mínimo <strong>8 em cada atributo</strong>.  
  Durante a redistribuição, o <strong>nível do personagem</strong> pode ser alterado; porém, se os pontos forem distribuídos corretamente, ele se manterá no nível inicial definido com o GM.
</p>

        <p>
          <strong><span class="bru">Brutalidade</span>, <span class="agi">Agilidade</span> e <span class="det">Determinação</span></strong> afetam mais a <span class="pv">Vida (PV)</span>, enquanto <strong><span class="pre">Preservação</span>, <span class="lib">Libertação</span> e <span class="cnx">Conexão</span></strong> influenciam a <span class="san">Sanidade (SAN)</span>.
        </p>
        <img src="/imagens/Atributos.png" alt="Distribuição de atributos do personagem" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>Atributos</h2>
        <div class="tutorial-flex">
         <div class="tutorial-section">
          <p><strong class="bru">Brutalidade (BRU)</strong> – <br>
            Força física e poder bruto em combate. Influencia a <span class="pv">Vida (PV)</span>.
          </p>
          <p><strong class="agi">Agilidade (AGI)</strong> – <br>
            Rapidez, reflexos e precisão em ataques e esquivas. Influencia a <span class="pv">Vida (PV)</span>.
          </p>
          <p><strong class="det">Determinação (DET)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="det">Fé</span></em><br>
            Resistência física e força de vontade. Afeta <span class="pv">PV</span> e defesa mental.
          </p>

          <p><strong class="pre">Preservação (PRE)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="pre">Caos</span></em><br>
            Conhecimento natural, alquimia e estratégias. Influencia a <span class="san">Sanidade (SAN)</span>.
          </p>
          <p><strong class="lib">Libertação (LIB)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="lib">Poder</span></em><br>
            Despertar mágico e percepção espiritual. Afeta magias e <span class="san">SAN</span>.
          </p>
          <p><strong class="cnx">Conexão (CNX)</strong> – <em>Frequentemente usado em magias e passivas do elemento <span class="cnx">Desconhecido</span></em><br>
            Vínculo com entidades e carisma místico. Fortemente ligado à <span class="san">SAN</span>.
          </p>
        </div>
       </div>
      </div>

      <div class="tutorial-section">
        <h2>3. Combate</h2>
        <p>
          O combate acontece em turnos com ordem definida por Iniciativa (D20). No turno, o jogador pode realizar:
        </p>
        <p><strong>Ação Livre:</strong> Usar passiva, falar, sacar arma etc.</p>
        <p><strong>Ação de Movimento:</strong> Caminhar.</p>
        <p><strong>Ação Completa:</strong> Atacar, lançar magia.</p>
        <p>
          A rolagem de ações usa 1D20 + modificador de atributo contra uma <strong>Dificuldade Temporária (DT)</strong>, gerada por uma rolagem do oponente.
        </p>
        <h3>Exemplo de ataque</h3>
<p>
  Para atacar, o jogador rola <strong>1D20 + bônus de teste</strong> de ataque.  
  Se o resultado for igual ou superior à <strong>DT</strong> do alvo, o ataque acerta.  
  Ao acertar, o dano é determinado pelo tipo de arma ou magia usada, somando os <strong>bônus de dano</strong> adequados.
</p>

<p>
  Exemplo: Uma espada pode causar <strong>1D8 de dano + bônus de dano de</strong> <span class="bru">Brutalidade</span>.
</p>


        <img src="/imagens/batalha_combate.png" alt="Cena de batalha entre personagens e criaturas" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>4. Opções de Reação</h2>
        <p>
          No combate, além da ação principal, o personagem pode reagir de formas específicas ao ataque inimigo:
        </p>
<p>
  <strong>Esquivar:</strong> Para evitar um ataque, role <strong>1D20 + bônus de teste</strong> adequado ao atributo indicado pela habilidade, magia ou passiva (pode ser qualquer um dos seis atributos).  
  Se o resultado for maior que o valor do ataque inimigo, o personagem esquiva com sucesso e não sofre dano.
</p>


      <p>
  <strong>Defender:</strong> O personagem pode entrar em postura defensiva, somando o valor da armadura mais os <strong>bônus de teste</strong> de <em class="det">Determinação</em> e <em class="bru">Brutalidade</em>.  
  Este valor é somado à defesa para resistir ao dano do inimigo, reduzindo o dano recebido.
</p>

<p>
  <strong>Contra-atacar:</strong> O personagem pode declarar um contra-ataque como reação <strong>antes do inimigo rolar para acertar</strong>.  
  Caso o ataque inimigo não supere a armadura do personagem (já considerando os bônus de teste de defesa), ele pode realizar um contra-ataque imediatamente.  
  Esta reação é gratuita e não consome a ação do turno.
</p>


      </div>

      <div class="tutorial-section">
        <h2>5. Magia e Passivas</h2>
<p>
  Magias usam <strong class="san">Sanidade (SAN)</strong> como recurso. O jogador rola <strong>D20</strong> + o <strong>bônus de teste</strong> do atributo da magia, que pode ser <span class="pre">Preservação</span>, <span class="lib">Libertação</span>, <span class="cnx">Conexão</span>, <span class="det">Determinação</span>, <span class="bru">Brutalidade</span>, <span class="agi">Agilidade</span> ou outro permitido pela magia.  
  Caso a rolagem passe na <strong>DT</strong>, o efeito da magia é ativado.
</p>


        <p>
          Passivas usam <strong class="especial">Especial e Sanidade</strong> como recurso. São habilidades ativadas automaticamente e não consomem ação. O personagem pode ter até <strong class="especial">4 passivas</strong> ativas ao mesmo tempo (uma de cada elemento).
        </p>
        <img src="/imagens/efeito_magia_passiva.png" alt="Personagem ativando magia com aura" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>6. Exploração</h2>
        <p>
          O GM narra o ambiente e os jogadores podem investigar, interagir com NPCs, desarmar armadilhas e encontrar itens escondidos.
          Testes de atributos e perícias como <strong>Percepção, Diplomacia, Furtividade</strong> e outras são utilizados para definir o sucesso.
        </p>
        <img src="/imagens/exploracao_npc.png" alt="Aventureiros falando com NPCs em dungeon ou aldeia" style="width:100%; border-radius:10px;">
     
      </div>

      <div class="tutorial-section">
        <h2>7. Evolução</h2>
        <p>
          Os personagens ganham <strong class="especial">pontos de experiência (XP)</strong> ao completar missões, derrotar inimigos ou alcançar marcos na história. A quantidade de XP concedida varia conforme a dificuldade do desafio.
        </p>
        <p><strong>XP por Tipo de Desafio:</strong></p>
        <p>Fáceis: 50–75 XP<br>
           Moderados: 100–150 XP<br>
           Difíceis: 200–300 XP<br>
           Muito Difíceis: 400–500 XP<br>
           Épicos: 1.000+ XP
        </p>
        <p>XP bônus pode ser concedido por conquistas extraordinárias.</p>
        <p>
          Cada 100 XP acumulados equivalem a 1 ponto de nível, que pode ser distribuído para aumentar os atributos do personagem:
        </p>
        <p><strong>Atributos:</strong></p>
        <p>
          <span class="bru">Brutalidade (BRU)</span><br>
          <span class="agi">Agilidade (AGI)</span><br>
          <span class="det">Determinação (DET)</span><br>
          <span class="pre">Preservação (PRE)</span><br>
          <span class="lib">Libertação (LIB)</span><br>
          <span class="cnx">Conexão (CNX)</span>
        </p>
        <p>
          <strong>Exemplo:</strong> Com 300 XP, o personagem ganha 3 pontos de nível para distribuir entre os atributos como desejar (por exemplo, +1 em <span class="bru">Brutalidade</span>, +1 em <span class="agi">Agilidade</span> e +1 em <span class="det">Determinação</span>).
        </p>
        <img src="/imagens/evolucao_nivel.png" alt="Evolução do personagem com XP e atributos" style="width:100%; border-radius:10px;">


      </div>
<div class="tutorial-section">
  <h2>8. Mecânicas de Influência por Afiliação</h2>
  <p>
    Essas mecânicas representam forças maiores que moldam o mundo de <strong>Calisto</strong>. Elas são ativadas em combates especiais contra criaturas alinhadas aos quatro princípios cósmicos: <span class="cnx">Desconhecido</span>, <span class="pre">Caos</span>, <span class="lib">Poder</span> e <span class="det">Fé</span>.
  </p>
  <p>
    Cada uma oferece <strong>regras específicas para o Mestre</strong>, permitindo alterar o cenário, aplicar bônus às criaturas e gerar consequências diretas a partir das escolhas dos jogadores.
  </p>

  <h3 class="cnx">✴️ 1. Ressonância do Desconhecido</h3>
  <p><em>Ativa quando magias ou habilidades sobrenaturais são usadas.</em></p>
    <li>Vantagem em testes para criaturas do Desconhecido (ataque, esquiva, resistência).</li>
    <li>+1 de Armadura Temporária por rodada.</li>
    <li>Resistência contra dano <strong>mental, alma</strong> ou <strong>distorção</strong>.</li>
    <li>1 Ação fora do turno a cada 3 rodadas.</li>
    <li><strong>Distúrbios de Realidade:</strong> salas duplicadas, tempo distorcido, sombras vivas.</li>
  <p><strong>Nota de jogo:</strong> O mundo parece se dobrar ao medo e à magia. Criaturas agem como se já soubessem o futuro.</p>

  <h3 class="pre">🔥 2. Degradação do Caos</h3>
  <p><em>Ativa quando a natureza ou o ambiente são destruídos.</em></p>
    <li>+1 ponto de Degradação ao queimar, poluir ou usar magias destrutivas.</li>
    <li>Cada ponto: +2 de dano físico e +1 de dano elemental para inimigos.</li>
    <li>A cada 2 turnos em terreno degradado: +1 de Armadura.</li>
    <li>Imunidade a medo e controle mental.</li>
    <li>Mutações grotescas: garras, braços extras, pele de pedra.</li>
    <li>Aliados do ambiente podem surgir como reforços.</li>
  <p><strong>Nota de jogo:</strong> A natureza se revolta, e os inimigos se tornam partes vivas da destruição causada pelo grupo.</p>

  <h3 class="lib">💠 3. Acúmulo de Poder Proibido</h3>
  <p><em>Ativa ao usar magias e habilidades do tipo Poder.</em></p>
  <p>O Mestre acompanha um contador de 1 a 12. A cada 2 pontos:</p>
    <li><strong>Nível 2:</strong> +1 dano físico para aliados.</li>
    <li><strong>Nível 4:</strong> +2 dano elemental.</li>
    <li><strong>Nível 6:</strong> 1 reação extra por aliado.</li>
    <li><strong>Nível 8:</strong> +2 de Armadura Temporária e +1 resistência mágica.</li>
    <li><strong>Nível 10:</strong> Vantagem em testes mágicos ofensivos e defensivos.</li>
    <li><strong>Nível 12:</strong> Invocação de uma criatura do Mundo dos Mortos. Ela ataca todos.</li>
  <p><strong>Nota de jogo:</strong> O grupo se sente cada vez mais poderoso — até perder o controle. O Mestre pode sugerir isso com olhos brilhantes, tremores ou efeitos no chão.</p>

  <h3 class="det">✝️ 4. Discórdia das Fés</h3>
  <p><em>Ativa quando magias de fé contrária à região são utilizadas.</em></p>
    <li>Magias da fé local: Vantagem em testes, +2 e duração/área aumentadas.</li>
    <li>Magias de fés opostas: +1 no contador de Discórdia.</li>
    <li>No limite de Discórdia, o mestre escolhe:</li>
  <ul>
  <p>♦  Manifestação de uma entidade sagrada que castiga o grupo.</P>
      <P>♦  Ou invocação de uma criatura do Desconhecido ou do Poder como punição.</P>
</ul>    
  <p><strong>Nota de jogo:</strong> Objetos sagrados reagem, ambientes brilham ou escurecem. Mesmo sem saber a fé da região, o grupo sentirá os sinais.</p>

  <h3>💡 Resumo para o Mestre</h3>
  <table style="width:100%; text-align:left; border-collapse: collapse;">
    <thead>
      <tr style="background-color:#333; color:#fff;">
        <th style="padding: 8px;">Afiliação</th>
        <th style="padding: 8px;">Quando ativa?</th>
        <th style="padding: 8px;">Efeitos para o Mestre</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="padding: 8px;"><span class="cnx">Desconhecido</span></td>
        <td style="padding: 8px;">Uso de magias ou habilidades sobrenaturais</td>
        <td style="padding: 8px;">Altera o cenário, concede bônus às criaturas</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="pre">Caos</span></td>
        <td style="padding: 8px;">Destruição da natureza e uso excessivo de elementos</td>
        <td style="padding: 8px;">Buffs progressivos, mutações e reforços do ambiente</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="lib">Poder</span></td>
        <td style="padding: 8px;">Uso contínuo de magias do tipo Poder</td>
        <td style="padding: 8px;">Grupo ganha bônus temporários até invocar criatura hostil</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="det">Fé</span></td>
        <td style="padding: 8px;">Usar magias contrárias à fé da região</td>
        <td style="padding: 8px;">Cria Discórdia até surgir punição divina ou profana</td>
      </tr>
    </tbody>
  </table>

  <img src="/imagens/afiliacoes_rituais.png" alt="Rituais mágicos e afiliações de Calisto" style="width:100%; border-radius:10px; margin-top:10px;">
</div>

<!-- POPUP MODO CHESS -->
<div id="chessTutorialPopup" class="chess-popup" style="display: none;">
  <div class="chess-popup-content" id="chessPopupContent">
    <span id="closeChessPopup" class="chess-popup-close">&times;</span>
    <div class="chess-popup-flex">

      <!-- SEÇÃO 1 -->
      <div class="chess-popup-section">
        <h2>1. O que é o Modo Chess?</h2>
        <p>
          O <strong>Modo Chess</strong> é uma variação de xadrez baseada em <strong>Roleplay Tático</strong>, onde cada peça representa uma <strong>criatura do Bestiário de Terras de Calisto</strong>.
        </p>
        <ul>
          <li>O combate segue as regras clássicas de Terras de Calisto.</li>
          <li>Magias, habilidades e reações funcionam apenas durante o combate.</li>
          <li>Cada peça possui <strong>pontos de vida próprios</strong>:</li>
        </ul>
          <li><strong>Peão:</strong> 20 de vida</li>
          <li><strong>Torre:</strong> 35 de vida</li>
          <li><strong>Bispo:</strong> 30 de vida</li>
          <li><strong>Cavalo:</strong> 25 de vida</li>
          <li><strong>Rainha:</strong> 50 de vida</li>
          <li><strong>Rei:</strong> 1 de vida (se for morto, a partida termina)</li>
        <p>
          O jogador pode substituir qualquer peça por seu <strong>personagem jogável</strong>, mantendo a vida padrão da posição. Cada lado pode ser controlado por jogadores ou pelo mestre.
        </p>
        <p><a href="https://bestiario-terrasdecalisto.netlify.app/" target="_blank">Acesse o Bestiário</a> para escolher sua criatura.</p>
        <img src="/imagens/exemplo_tabuleiro.png" alt="Exemplo de Tabuleiro" class="chess-img">
      </div>

<!-- SEÇÃO 2 -->
<div class="chess-popup-section">
  <h2>2. Combate e Check</h2>
  <p>
    Quando <strong>duas ou mais peças</strong> (até o limite de <strong>4 por quadrado</strong>) se encontram no mesmo espaço,
    inicia-se um combate por turnos.
  </p>
  <li>O combate utiliza o sistema de Terras de Calisto (turnos, reações, atributos).</li>
  <li>O jogador pode realizar até 3 reações por turno (ex: esquiva, bloqueio, contra-ataque).</li>
  <li>Check (xeque) continua funcionando como no xadrez tradicional.</li>
  <li>Checkmate (xeque-mate) não encerra o jogo: o Rei deve fugir ou outra peça deve intervir no combate.</li>
  <li>A eliminação do Rei em combate é a única forma de vitória.</li>
  <img src="/imagens/exemplo_combate.png" alt="Exemplo de Combate" class="chess-img">
</div>

      <!-- SEÇÃO 3 -->
      <div class="chess-popup-section">
        <h2>3. Estratégia e Customização</h2>
        <p>
          Cada criatura do Bestiário possui <strong>habilidades únicas</strong>, magias e características de combate. Algumas podem se mover por teleporte ou usar efeitos fora do combate, conforme suas passivas.
        </p>
          <li>Apenas <strong>teleporte e habilidades passivas</strong> funcionam fora do combate.</li>
          <li>Você pode montar times com criaturas temáticas, facções ou aliados da história.</li>
          <li>O jogo pode ser PvP entre jogadores, PvM com mestre ou misto.</li>
        <img src="/imagens/exemplo_criatura.png" alt="Exemplo de Criatura" class="chess-img">
      </div>

    </div>
  </div>
</div>

<!-- POPUP COMBATE SECUNDÁRIO -->
<div id="combatPopup" class="chess-popup" style="display: none;">
  <div class="chess-popup-content">
    <span id="closeCombatPopup" class="chess-popup-close">&times;</span>
    <h2>Regras de Combate (Modo Chess)</h2>
    <p>Durante o combate entre peças ou personagens:</p>
    <ul>
      <li><strong>Iniciativa:</strong> Cada peça joga 1d20 para determinar a ordem de ação.</li>
      <li><strong>Ataques:</strong> Baseados nos atributos da criatura (ex: Brutalidade + 1d20 contra DT).</li>
      <li><strong>Reações:</strong> Até 3 por turno (esquiva, contra-ataque, defesa).</li>
      <li><strong>Condições especiais:</strong> queimando, paralisado, amaldiçoado, etc., conforme magias e efeitos do Bestiário.</li>
      <li><strong>Eliminação:</strong> Ao chegar a 0 de vida, a peça é removida do tabuleiro.</li>
    </ul>
    <p>Consulte as <a href="https://terrasdecalistoficha.wordpress.com/como-jogar/" target="_blank">Regras Completas</a> para detalhes sobre reações, atributos e testes.</p>
  </div>
</div>

    </div>
  </div>
</div>



<!-- Botão fixo para abrir tutorial -->
<button id="openTutorialButton">Tutorial</button>

    
    <!-- Seção da esquerda -->
<div id="left-section">
  <div class="status-externo">
    <div class="status-bar">
      <div id="life-fill" class="fill"></div>
      <div id="life-temp-fill" class="temp-fill"></div> <!-- Barra Temporária -->
      <span id="life-view">0 / 0</span>
    </div>
  </div>
  
  <div class="status-externo">
    <div class="status-bar">
      <div id="sanity-fill" class="fill"></div>
      <div id="sanity-temp-fill" class="temp-fill"></div> <!-- Barra Temporária -->
      <span id="sanity-view">0 / 0</span>
    </div>
  </div>
  
  <div class="status-externo">
    <div class="status-bar">
      <div id="special-fill" class="fill"></div>
      <div id="special-temp-fill" class="temp-fill"></div> <!-- Barra Temporária -->
      <span id="special-view">0 / 0</span>
    </div>
  </div>
  



  
<div id="character-stats">
  

          <div class="stats-wrapper">
            <div class="stat-container">
              <span>Armor: <span id="armor-view">0</span></span>
            </div>
            <div class="stat-container">
              <span>Mov: <span id="movement-view">0</span></span>
            </div>
            <div class="stat-container">
              <span>Nível: <span id="level-view">0</span></span>
            </div>
          </div>
          <!-- Nome -->
<!-- Nome (100% largura com label alinhado ao input) -->
<link href="https://fonts.googleapis.com/css2?family=Caveat&display=swap" rel="stylesheet">

<div style="display: flex; align-items: center; margin-bottom: 15px;">
  <label for="char-name" style="font-size: 1.8em; margin-right: 12px; color: #444; min-width: 70px; font-family: 'Caveat', cursive;">
    Nome:
  </label>
  <input type="text" id="char-name" name="char-name" required
         style="flex: 1; padding: 1px 10px; font-size: 2em;
                border: none; border-bottom: 2px solid #888;
                background-color: transparent;
                outline: none; transition: border-color 0.3s;
                font-family: 'Caveat', cursive;">
</div>

<style>
  #char-name:focus {
    border-bottom: 2px solid #0077cc;
  }
</style>

<!-- Raça e Passado (lado a lado no PC, empilhados no mobile) -->
<div style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: nowrap;">

  <!-- Raça -->
  <div style="flex: 1; min-width: 0; display: flex; flex-direction: column;">
    <label for="race" style="font-size: 14px; margin-bottom: 4px; color: rgb(255, 72, 0);">Raça:</label>
    <select id="race" name="race" required
            style="padding: 6px 8px; font-size: 14px; border: 1px solid #aaa; border-radius: 5px; width: 100%;">
      <option value="">Selecione a Raça</option>
      <option value="Elfo">Lyrithil – Elfo</option>
      <option value="Humano">Zhilak – Humano</option>
      <option value="Anão">Grunthrok – Anão</option>
      <option value="Gigante">Thudrok – Gigante</option>
      <option value="Krahzhik">Krahzhik – IgnisAlatus</option>
      <option value="Skywalker">Skywalkers – Flumplux</option>
      <option value="Umbrowalker – Shlurp">Umbrowalker – Shlurp</option>
      <option value="Elfo da profundeza">Glublorp – Elfo da profundeza</option>
      <option value="Tritão">Glubrust – Tritão</option>
      <option value="Shrivvel – Pele Palida">Shrivvel – Pele Palida</option>
      <option value="Gronklech – Durock">Gronklech – Durock</option>
    </select>
  </div>

  <!-- Passado -->
  <div style="flex: 1; min-width: 0; display: flex; flex-direction: column;">
    <label for="past" style="font-size: 14px; margin-bottom: 4px; color: red;">Passado:</label>
    <select id="past" name="past" required
            style="padding: 6px 8px; font-size: 14px; border: 1px solid #aaa; border-radius: 5px; width: 100%;">
      <option value="">Selecione o Passado</option>
      <option value="Aldeão">Aldeão</option>
      <option value="Arauto">Arauto</option>
      <option value="Arqueiro">Arqueiro</option>
      <option value="Assassino">Assassino</option>
      <option value="Assombração">Assombração</option>
      <option value="Atirador">Atirador</option>
      <option value="Barão">Barão</option>
      <option value="Bárbaro">Bárbaro</option>
      <option value="Bardo">Bardo</option>
      <option value="Bruxo">Bruxo</option>
      <option value="Carpinteiro">Carpinteiro</option>
      <option value="Catador">Catador</option>
      <option value="Colosso">Colosso</option>
      <option value="Conjurador">Conjurador</option>
      <option value="Costeiro">Costeiro</option>
      <option value="Criatura">Criatura</option>
      <option value="Duelista">Duelista</option>
      <option value="Escudeiro">Escudeiro</option>
      <option value="Especialista">Especialista</option>
      <option value="Espectro">Espectro</option>
      <option value="Espiritualista">Espiritualista</option>
      <option value="Fera">Fera</option>
      <option value="Ferreiro">Ferreiro</option>
      <option value="Forasteiro">Forasteiro</option>
      <option value="Glacinata">Glacinata</option>
      <option value="Guerreiro">Guerreiro</option>
      <option value="Hemomantico">Hemomantico</option>
      <option value="Imitador">Imitador</option>
      <option value="Juíz">Juíz</option>
      <option value="Lacaio">Lacaio</option>
      <option value="Ladrão">Ladrão</option>
      <option value="Louco">Louco</option>
      <option value="Mago">Mago</option>
      <option value="Malabarista">Malabarista</option>
      <option value="Marinheiro">Marinheiro</option>
      <option value="Masoquista">Masoquista</option>
      <option value="Médico">Médico</option>
      <option value="Mendigo">Mendigo</option>
      <option value="Monge">Monge</option>
      <option value="Naturalista">Naturalista</option>
      <option value="Nobre">Nobre</option>
      <option value="Perseguidor">Perseguidor</option>
      <option value="Pervertido">Pervertido</option>
      <option value="Pescador">Pescador</option>
      <option value="Pirata">Pirata</option>
      <option value="Prefeito">Prefeito</option>
      <option value="Prisioneiro">Prisioneiro</option>
      <option value="Profanado">Profanado</option>
      <option value="Protetor">Protetor</option>
      <option value="Pugilista">Pugilista</option>
      <option value="Revivido">Revivido</option>
      <option value="Samurai">Samurai</option>
      <option value="Sacerdote">Sacerdote</option>
      <option value="Soberano">Soberano</option>
      <option value="Taverneiro">Taverneiro</option>
      <option value="Tormentalista">Tormentalista</option>
    </select>
  </div>

</div>
<div class="stat-container">
  <img id="race-image" src="imagens/Raças/sua raça.png" alt="Raça">
  <img id="past-image" src="imagens/pass/seu passado.png" alt="Passado">
</div>
    <div class="prompt-wrapper">
  <button class="toggle-prompt-btn" onclick="togglePromptBox()">✏️Criar Token</button>

  <div class="prompt-gerador-box hidden" id="promptBox">
    <label for="descricao-personagem">Aparência do Token do personagem:</label>
<p style="background: #fff8e1; color: #8a6d3b; border: 1px solid #ffe0b2;
   padding: 8px 12px; border-radius: 5px; font-size: 12px;
   margin-bottom: 15px; line-height: 1.4; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto;">
  ⚠️ Escolha a <strong>raça</strong> e o <strong>passado</strong> primeiro. Essas escolhas serão consideradas na hora de gerar o visual.
  O botão irá te direcionar para o <strong>ChatGPT</strong>, mas o prompt também funciona no <strong>Copilot</strong>.
</p>


<textarea id="descricao-personagem" placeholder="Ex: Um elfo de pele escarlate, cabelo negro, vestindo armadura de ossos antigos e segurando um arco detalhado... Descreva cores, roupas e objetos para um resultado melhor."></textarea>
    <button onclick="gerarPromptPersonagem()">Gerar Token</button>
  </div>
</div>
          <div class="content">
            
            <!-- outros conteúdos -->
            <div class="bonus-container">
    <h2 class="resistencia-index">Resistência: N/A</h2> 

<div class="bonus-subsection">
  <h3 class="especializacao_titulo5" onclick="alternarTextoBonus(5)" id="tituloBonus5">Bonus de Raça</h3>
  <div class="bonusTexto5 bonus-texto" id="textoBonus5" style="display:block;">
          <h4 class="Bonus-talento-tex" onclick="toggleMenu()">Talento: N/A</h4>

    <h4 class="Bonus-race-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/como-jogar/', '_blank')">Bônus de Raça: N/A</h4>
    <h4 class="Bonus-passiva-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/', '_blank')">Passiva: N/A</h4>
    <h4 class="Bonus-magia-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/magias/', '_blank')">Magia: N/A</h4>
  </div>
</div>





<!-- Essa parte representa os 3 bônus do passado -->
<!-- Botão com texto "Bônus de Passado" -->
 <h4 class="especializacao_titulo" id="tituloBonusPassado">Bônus de Passado: N/A</h4>
     <div id="textoBonusPassado" class="bonus-passado-section"></div>


<div class="bonus-subsection">
  <h3 class="especializacao_titulo4" onclick="alternarTextoBonus(4)" id="tituloBonus4">
Bonus por Níveis Do Personagem  </h3>
  <div class="bonusTexto4 bonus-texto" id="textoBonus4" style="display:none;">
    
<p class="bonus4-paragraph"><strong>Nível 1:</strong> Escolha sua <strong class="gold-gradient">Especialização principal</strong>. Essa escolha define suas habilidades únicas principais e o caminho que seu personagem seguirá.</p>
 <p class="bonus4-paragraph"> Além disso, escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 de dano com sua <strong>arma favorita</strong> (não pode ser trocada depois)</li>
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (nível 1)</li>
    </ul>

    <h4>Escolha sua especialização principal</h4>
<p>Sua especialização principal não pode ser mudada.</p>
<section>

    <div class="bonus-subsection">
      <h3 class="bonusTexto1 especializacao_titulo1" onclick="alternarTextoBonus(1)" id="tituloBonus1"></h3>
      <div class="bonusTexto1 bonus-texto" id="textoBonus1" style="display:none;"></div>
    </div>

    <div class="bonus-subsection">
      <h3 class="especializacao_titulo2" onclick="alternarTextoBonus(2)" id="tituloBonus2"></h3>
      <div class="bonusTexto2 bonus-texto" id="textoBonus2" style="display:none;"></div>
    </div>

    <div class="bonus-subsection">
      <h3 class="especializacao_titulo3" onclick="alternarTextoBonus(3)" id="tituloBonus3"></h3>
      <div class="bonusTexto3 bonus-texto" id="textoBonus3" style="display:none;"></div>
    </div>

  
</section>
    
<div id="popupOverlay" class="popup-overlay" style="display: none;"></div>

<!-- Popup central -->
<div id="popupEspecializacoes" class="popup-especializacoes" style="display: none;">
  <!-- Botão de fechar interno -->
  <button class="fechar-popup" onclick="fecharPopupEspecializacoes()">✕</button>
  <h2>Especializações por Passado</h2>
  <div class="especializacoes-grid" id="especializacoesContainer">
    <!-- Conteúdo JS -->
  </div>
</div>

    <p class="bonus4-paragraph"><strong>Nível 2:</strong> Escolha um atributo entre <strong>Brutalidade, Agilidade, Determinação, Preservação, Libertação ou Conexão</strong>. Você recebe <strong>+2 em testes</strong> com o atributo escolhido.</p>
<p class="bonus4-paragraph"><strong>Nível 3:</strong> <strong class="gold-gradient">Especialização principal</strong></p>

    <p class="bonus4-paragraph"><strong>Nível 4:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">+2 em <strong>Esquiva</strong></li>
      <li class="bonus4-list-item"><strong>Resistência</strong> a um tipo de dano</li>
    </ul>
<p class="bonus4-paragraph">
  <strong>Nível 5:</strong>
  <strong class="gold-gradient">Especialização principal</strong>
</p>    
    <p class="bonus4-paragraph"><strong>Nível 6:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+1d6 de dano com sua <strong>arma favorita</strong> (não pode ser trocada depois)</li>
      <li class="bonus4-list-item">Ganha uma <strong>Passiva</strong> (nível 1 a 3)</li>
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (nível 1 a 3)</li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 7:</strong> Escolha uma habilidade de nível 1 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 8:</strong> Escolha uma habilidade de nível 3 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 9:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 10:</strong> Escolha sua <strong>Vocação:</strong> Fé, Poder, Desconhecido ou Caos. Ganha <strong>2 resistências</strong> a tipos de dano ligados ao elemento escolhido.</p>

    <p class="bonus4-paragraph"><strong>Nível 11:</strong> Escolha uma habilidade de nível 5 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 12:</strong> <strong>Despertar da Raça.</strong> Recebe +2 em testes com <strong>Talentos ou Passivas raciais</strong>.</p>
<p class="bonus4-paragraph"><strong>Nível 13:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 14:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (nível 2 a 4)</li>
      <li class="bonus4-list-item">+2 em <strong>Armadura, Esquiva</strong> ou <strong>Resistência</strong> a um tipo de dano</li>
      <li class="bonus4-list-item">Ganha +1 por turno (<strong>Ataque Extra</strong>, Ação Completa ou Ação de Movimento)</li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 15:</strong> Escolha uma habilidade de nível 9 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 16:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 17:</strong> Escolha uma habilidade de nível 13 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 18:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">+2 em <strong>Esquiva</strong></li>
      <li class="bonus4-list-item"><strong>Resistência</strong> a um tipo de dano</li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 19:</strong> Escolha uma habilidade de nível 16 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 20:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 21:</strong> Escolha uma habilidade de nível 20 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>
    
<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

<p class="bonus4-paragraph"><strong>Nível 22:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 23:</strong> Escolha uma habilidade de nível 22 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 24:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">Ganha uma <strong>Passiva</strong> (nível 3 a 7)</li>
      <li class="bonus4-list-item">+1d6 de dano com sua <strong>arma favorita</strong> (não pode ser trocada depois)</li>
      <li class="bonus4-list-item"><strong>Resistência</strong> a um novo tipo de dano</li>
    </ul>
<p class="bonus4-paragraph"><strong>Nível 25:</strong> <strong class="gold-gradient">Especialização principal</strong></p>
    <p class="bonus4-paragraph"><strong>Nível 26:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">1 <strong>Ataque Extra</strong> por turno</li>
      <li class="bonus4-list-item">1 Magia nova (nível 4–5)</li>
      <li class="bonus4-list-item">+1d12 de dano com <strong>arma favorita</strong></li>
    </ul>

    <p class="bonus4-paragraph"><strong>Nível 27:</strong> Escolha uma habilidade de nível 25 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 28:</strong> Escolha uma habilidade de nível 1, 3, 5 ou 9 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 29:</strong> Escolha uma habilidade de nível 13, 16, 20 ou 22 de    <strong>
    outra <span class="prismatic2">especialização</span> (única), de qualquer passado</strong>.</p>

<!-- Botão que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializações</button>

    <p class="bonus4-paragraph"><strong>Nível 30:</strong> Escolha uma entre 3 opções:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">1 <strong>Ataque Extra</strong> por turno</li>
      <li class="bonus4-list-item">1 Magia nova (nível 5–9)</li>
      <li class="bonus4-list-item">+1d20 de dano com <strong>arma favorita</strong></li>
    </ul>

  </div>
</div>


              
                       <!-- Botão para abrir o popup de itens -->








              <!-- Popup com grid de itens -->
              <!-- Popup com grid de itens -->
              <div id="itemSelectPopup" class="popup hidden">
                <div class="popup-content scrollable-grid">
                  <button id="closeItemPopup">Fechar</button>
                  <h2>Escolha um Item</h2>
                  
                  <select id="itemFilter">
                    <option value="Todos">Todos os Tipos</option>
                  </select>
              
                  <div class="item-grid" id="itemGrid">
                    <!-- Itens inseridos por JS -->
                  </div>
                </div>
              </div>
              


              
            
              
          </div>

    
          
            
            

     
     
        
            <!-- outros conteúdos -->
          </div>
        </div>
      </div>

    <!-- Seção da direita -->

    <div id="right-section">
<div id="character-info-section-2" style="margin: 20px 0; font-family: Arial, sans-serif;">
  <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
    <!-- Botão 1: AVISO -->
    <button onclick="toggleSectionInfo('expandableSectionInfo2a')"
      style="background: linear-gradient(to right, #ff4d4d, #ff1a1a); color: #fff; padding: 10px 20px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);">
      AVISO!
    </button>

    <!-- Botão 2: APOIAR -->
    <button onclick="toggleSectionInfo('expandableSectionInfo2b')"
      style="background: linear-gradient(to right, #ff4d4d, #ff1a1a); color: #fff; padding: 10px 20px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);">
      APOIAR!
    </button>
  </div>

  <!-- Conteúdo do popup AVISO -->
  <div id="expandableSectionInfo2a"
    style="display: none; margin-top: 15px; background-color: #f9f9f9; padding: 20px; border-radius: 10px; border: 1px solid #ccc;">
          <h1 class="Aviso" style="font-size: 11px;">
      A aparência do seu personagem será uma fusão entre seu passado e sua raça — imagine-o livremente!<br><br>
      No início da criação do personagem, todos os atributos BRU, AGI, DET, PRE, LIB e CNX começam com o valor 14,
      mas você pode redistribuí-los como quiser, respeitando o mínimo de 8 e o máximo de 99 para cada um, mantendo o personagem no nível 1.
    </h1>
  </div>

  <!-- Conteúdo do popup APOIAR -->
  <div id="expandableSectionInfo2b"
    style="display: none; margin-top: 10px; background-color: #fff; padding: 20px; border-radius: 12px; border: 1px solid #ccc; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 520px; font-size: 14px; line-height: 1.6; color: #333;">
    <h1 style="font-size: 14px; color: #444; margin-bottom: 15px;">
      💖 Ajude o projeto com um Pix!<br>
      Aponte a câmera para o QR Code abaixo:
    </h1>
    <img src="imagens/qrcode-inter.png" alt="QR Code de apoio via Pix Inter"
      style="max-width: 200px; display: block; margin: 0 auto 10px; border-radius: 8px; border: 1px solid #ddd;">
    <p
      style="text-align: center; font-size: 13px; color: #111; background-color: #f1f1f1; padding: 8px; border-radius: 6px; margin-top: 10px; word-break: break-word;">
      <strong>Chave Pix:</strong> gustavo.s.silvasantos2@gmail.com
    </p>
  </div>
</div>

       
        
        <form id="character-form">



<!-- Popup de descrição -->
<div id="itemDescPopup" class="popup hidden">
  <img id="itemDescImage" src="" alt="Item">
  <div id="itemDescText"></div>
  <div id="itemDescTitle"></div>

  <!-- Novas informações -->
  <div id="itemDescDamageType"></div>
  <div id="itemDescElementalDamage"></div>
  <div id="itemDescDamageDice"></div>
  <div id="itemDescRange"></div>
  <div id="itemDescCritical"></div>
  <div id="itemDescEquipBonus"></div>

  <button id="equipItem"></button>
  <button id="closeDescPopup">Fechar</button>
</div>



<style>
/* =========================== */
/*   CSS EXCLUSIVO DO POPUP    */
/* =========================== */
#tcOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 20000;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial;
}

#tcOverlay .tc-popup {
  background: #ffffff;
  border-radius: 20px;
  width: 94%;
  max-width: 1000px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 12px 40px rgba(0, 0, 0, .4);
}

/* Cabeçalho fixo */
#tcOverlay .tc-header {
  flex: 0 0 auto;
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  background: #101926;
  color: #fff;
}

/* Filtros fixos */
#tcOverlay .tc-controls {
  flex: 0 0 auto;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  background: #0f1724;
  padding: 10px 14px;
}

/* Área scrollável */
#tcOverlay .tc-body {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 14px;
}

/* Botões e tabs */
#tcOverlay .tc-tabs { display: flex; gap: 8px; }
#tcOverlay .tc-tab {
  border: 0;
  padding: 8px 12px;
  border-radius: 10px;
  background: #22324a;
  color: #dfe7ff;
  font-weight: 700;
  cursor: pointer;
}
#tcOverlay .tc-tab.active { background: #c0191f; color: #fff; }
#tcOverlay .tc-close {
  border: 0;
  background: #2a3a53;
  color: #fff;
  border-radius: 10px;
  padding: 8px 12px;
  cursor: pointer;
}
#tcOverlay .tc-box-head {
  display: flex;
  flex-direction: column; /* empilha verticalmente */
  align-items: center;    /* opcional: centraliza horizontalmente */
  justify-content: center;/* opcional: centraliza verticalmente */
  gap: 6px;               /* espaço entre os itens */
}

/* Inputs */
#tcOverlay .tc-select,
#tcOverlay .tc-search {
  appearance: none;
  border: 0;
  border-radius: 10px;
  padding: 10px 12px;
  background: #1a2333;
  color: #eaf0ff;
  min-width: 140px;
  flex: 1;
}
#tcOverlay .tc-content{background:#0f1724;padding:16px;overflow:auto;max-height:calc(90vh - 114px)}
/* grid 2 colunas fixo */
#tcOverlay .tc-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
/* card compacto */
#tcOverlay .tc-card{background:#101a2b;border:1px solid #1f2b44;border-radius:16px;padding:10px;cursor:pointer;transition:transform .1s ease,box-shadow .1s ease;color:#e7eeff}
#tcOverlay .tc-card:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.3)}
#tcOverlay .tc-img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:12px;background:#0b1220}
#tcOverlay .tc-name{margin:8px 0 4px;font-weight:800;font-size:15px;line-height:1.2}
#tcOverlay .tc-meta{font-size:12px;color:#b7c4e1}

#tcOverlay .tc-pagination{display:flex;justify-content:center;gap:6px;margin-top:14px}
#tcOverlay .tc-page{border:0;background:#1a2333;color:#eaf0ff;border-radius:8px;padding:8px 10px;cursor:pointer}
#tcOverlay .tc-page.active{background:#c0191f}

/* Detalhe */
#tcOverlay .tc-detail{position:fixed;inset:0;background:rgba(0,0,0,.66);display:none;align-items:center;justify-content:center;z-index:10000}
#tcOverlay .tc-box{background:#ffffff;border-radius:22px;width:92%;max-width:760px;max-height:88vh;overflow:auto;color:#1a1a1a}
#tcOverlay .tc-box-head{padding:18px 18px 0}
#tcOverlay .tc-detail-img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:18px}
#tcOverlay .tc-title{margin:14px auto 6px;text-align:center;background:#9b0b0f;color:#fff;border-radius:999px;padding:10px 16px;font-size:22px;font-weight:800;width:fit-content}
#tcOverlay .tc-sub {
  margin: 0 auto 16px;
  padding: 4px 12px;                     /* adiciona um respiro interno equilibrado */
  text-align: center;
  color: #9b0b0f !important;             /* mantém o tom vermelho-fé */
  font-style: italic;
  font-weight: 600;                      /* dá presença sem perder leveza */
  background: #fff;                      /* garante fundo visível */
  display: inline-block;
  border-radius: 10px;                   /* bordas mais suaves */
  position: relative;
  z-index: 5;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1); /* leve profundidade para destacar */
  letter-spacing: 0.3px;                 /* melhora legibilidade */
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}



#tcOverlay .tc-section{padding:0 18px 16px}
#tcOverlay .tc-h2{margin:10px 0 8px;font-size:16px;color:#0f172a}
#tcOverlay .tc-desc{color:#222;line-height:1.55}

#tcOverlay .tc-table{width:100%;border-collapse:collapse;margin-top:10px}
#tcOverlay .tc-table th,#tcOverlay .tc-table td{border:1px solid #e5e7eb;padding:10px;text-align:left}
#tcOverlay .tc-table th{background:#f4f6fb;font-weight:700;color:#111827}

#tcOverlay .tc-good{color:#16a34a;font-weight:900;margin:8px 0 4px}
#tcOverlay .tc-bad{color:#dc2626;font-weight:900;margin:14px 0 4px}

#tcOverlay .tc-actions{display:flex;gap:8px;padding:0 18px 18px}
#tcOverlay .tc-btn{border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
#tcOverlay .tc-btn.primary{background:#c0191f;color:#fff}
#tcOverlay .tc-btn.ghost{background:#eef2ff;color:#0f172a}
.tc-meta {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 6px;
}

.tc-nivel {
  background: rgba(255, 255, 255, 0.15);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.9em;
}
/* Cabeçalho e botão fechar ajustados */
#tcOverlay .tc-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 12px 16px;
  background: #101926;
  color: #fff;
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
}

/* Tabs centralizadas e flexíveis */
#tcOverlay .tc-tabs {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  flex: 1; /* ocupa o espaço entre bordas e botão fechar */
}

#tcOverlay .tc-tab {
  border: none;
  padding: 8px 14px;
  border-radius: 10px;
  background: #22324a;
  color: #dfe7ff;
  font-weight: 700;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s ease;
}

#tcOverlay .tc-tab:hover {
  background: #2d4567;
}

#tcOverlay .tc-tab.active {
  background: #c0191f;
  color: #fff;
}

/* Botão fechar fixo à direita */
#tcOverlay .tc-close {
  flex-shrink: 0;
  border: none;
  background: #2a3a53;
  color: #fff;
  border-radius: 10px;
  padding: 8px 14px;
  cursor: pointer;
  font-weight: 700;
  transition: all 0.15s ease;
}

#tcOverlay .tc-close:hover {
  background: #c0191f;
}

/* Responsivo: mobile */
@media (max-width: 640px) {
  #tcOverlay .tc-header {
    flex-direction: column;
    align-items: stretch;
    text-align: center;
  }

  #tcOverlay .tc-close {
    align-self: center;
    margin-top: 6px;
    width: 100%;
  }
}

@media (max-width:420px){
  #tcOverlay .tc-title{font-size:18px}
}
  .magias-btn {
    background-image: url('/imagens/BotaoMagias.png');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    width: 220px;   /* ajuste conforme o tamanho real da sua imagem */
    height: 70px;

    border: none;
    padding: 0;
    margin: 16px;
    cursor: pointer;
    background-color: transparent;
    transition: transform 0.1s ease, filter 0.1s ease;
}

.magias-btn:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
}

.magias-btn:active {
    transform: scale(0.95);
    filter: brightness(0.9);
}
/* grid fluido (web) */
#tcOverlay .tc-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 14px;
}
@media (max-width: 640px) {
  #tcOverlay .tc-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
  #tcOverlay .tc-title { font-size: 18px; padding: 8px 14px; }
  #tcOverlay .tc-detail-img { max-width: 160px; }
}

  /* Ajuste para web (largura maior que 640px) */
@media (min-width: 641px) {
  #tcOverlay .tc-box {
    width: 45%; /* ou 45% se preferir */
  }
  #tcOverlay .tc-detail-img {
    width: 65%;
  }
}

/* =========================== */
/* CARDGAME REFINADO — EFEITO DIAGONAL CLARO */
/* Exclusivo para o popup #tcOverlay */
/* =========================== */

#tcOverlay .tc-card {
  position: relative;
  overflow: hidden;
  background: linear-gradient(145deg, #101a2b 0%, #18243d 100%);
  border-radius: 16px;
  border: 2px solid transparent;
  background-clip: padding-box;
  transition: all 0.3s ease;
  box-shadow:
    inset 0 0 18px rgba(255, 255, 255, 0.08),
    0 0 18px rgba(0, 0, 0, 0.5);
}

/* Borda metálica animada */
#tcOverlay .tc-card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 16px;
  padding: 2px;
  background: linear-gradient(135deg,
    #fff 0%,
    #ffd580 20%,
    #ff2f2f 40%,
    #fff 60%,
    #ffd580 80%,
    #ff2f2f 100%);
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  animation: tcgBorderGlow 8s linear infinite;
  opacity: 0.9;
}

/* Reflexo diagonal CLARO e visível */
#tcOverlay .tc-card::before {
  content: "";
  position: absolute;
  inset: -40%;
  background: linear-gradient(
    130deg,
    rgba(255, 255, 255, 0) 35%,
    rgba(255, 255, 255, 0.6) 50%,
    rgba(255, 255, 255, 0) 65%
  );
  transform: translateX(-120%) rotate(10deg);
  transition: transform 1.2s ease;
  pointer-events: none;
  mix-blend-mode: screen;
}

#tcOverlay .tc-card:hover::before {
  transform: translateX(120%) rotate(10deg);
}

/* Movimento cromático da borda */
@keyframes tcgBorderGlow {
  0% { filter: hue-rotate(0deg) brightness(1.2); }
  50% { filter: hue-rotate(180deg) brightness(1.6); }
  100% { filter: hue-rotate(360deg) brightness(1.2); }
}

/* Animação de brilho sutil */
@keyframes tcgShine {
  0% { background-position: 200% 0%; }
  100% { background-position: -200% 0%; }
}

#tcOverlay .tc-card {
  background-image: linear-gradient(
    120deg,
    rgba(255,255,255,0.07) 0%,
    rgba(192,25,31,0.15) 50%,
    rgba(255,255,255,0.07) 100%
  );
  background-size: 200% 200%;
  animation: tcgShine 10s linear infinite;
}

#tcOverlay .tc-card:hover {
  transform: translateY(-4px) scale(1.04);
  box-shadow:
    0 0 28px rgba(255, 255, 255, 0.3),
    0 0 40px rgba(192, 25, 31, 0.4);
}


</style>




<!-- BOTÃO PARA ABRIR O POPUP -->
<button type="button" onclick="TC.open()" class="magias-btn"></button>

<!-- POPUP -->
<div id="tcOverlay" aria-hidden="true">
  <div class="tc-popup" role="dialog" aria-modal="true">

    <div class="tc-header">
      <div class="tc-tabs">
        <button type="button" class="tc-tab active" data-tab="magias">Magias</button>
        <button type="button" class="tc-tab" data-tab="passivas">Passivas</button>
        <button type="button" class="tc-tab" data-tab="aprendidas">Aprendidas</button>
      </div>
      <button type="button" class="tc-close" onclick="TC.close()">Fechar</button>
    </div>

    <div class="tc-controls">
      <select id="tcFiltroElemento" class="tc-select" title="Elemento">
        <option value="">Elemento</option><!-- preenchido via JS -->
      </select>

      <select id="tcFiltroDano" class="tc-select" title="Tipo de dano">
        <option value="">Tipo de dano</option><!-- preenchido via JS -->
      </select>

      <!-- 🔹 NOVO FILTRO DE NÍVEL -->
      <select id="tcFiltroNivel" class="tc-select" title="Nível">
        <option value="">Todos os níveis</option>
        <option value="1">Nível 1</option>
        <option value="2">Nível 2</option>
        <option value="3">Nível 3</option>
        <option value="4">Nível 4</option>
        <option value="5">Nível 5</option>
        <option value="6">Nível 6</option>
        <option value="7">Nível 7</option>
        <option value="8">Nível 8</option>
        <option value="9">Nível 9</option>
        <option value="10">Nível 10</option>
      </select>
      <!-- 🔹 FIM DO NOVO FILTRO -->

      <input id="tcBusca" class="tc-search" type="search" placeholder="Buscar por nome (opcional)">
    </div>

    <div id="tcList" class="tc-content">
      <div class="tc-grid" id="tcGrid"></div>
      <div class="tc-pagination" id="tcPaginacao"></div>
    </div>
  </div>

  <!-- Detalhe -->
  <div id="tcDetail" class="tc-detail" onclick="event.target.id==='tcDetail'&&TC.hideDetail()">
    <div class="tc-box" id="tcDetailBox"></div>
  </div>
</div>



<!-- SUBSTITUA APENAS O <script> ABAIXO. Deixe seu CSS/HTML e seu DATASET como já estão. -->
<script>

  /* =========================== */
/*           DATASET           */
/*  (mantenha/ajuste o seu)    */
/* =========================== */

 window.DATASET = {
  magias: [
    {
      id: "m1",
      nome: "Controle de sangue",
      sub: "Sanguis imperium",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/b3e68955d9f8a0e03e204e80a408e760acffb882_high.webp",
      elemento: "Fé",
      tipoDano: "Sangue",
      descricao: "Controla sangue ao seu alcance e é necessário estar vendo o sangue, acertando o inimigo e causando 1d12 de dano de Sangue. Caso o inimigo já tenha sido acertado, pode mover o próprio sangue dele causando +1d8.",
      duracao: "Gasta ação",
      tagLevel: "Hemomante",
      tagLevelResposta: "Nível 1 – Iniciado do Sangue",
      nivel:"1",
      alcance: "5m",
      testeConjurador: "Determinação",
      testeAlvo: "Determinação"
    },
    {
      id: "m2",
      nome: "Fechar feridas",
      sub: "Prope vulnera",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-31.png",
      elemento: "Fé",
      tipoDano: "Sangue",
      descricao: "Controla a ferida do alvo podendo fechar errado (“Profano”) para causar 1d8 + 1d6 de sangue. Se for em um aliado, pode escolher a ferida e tentar fechar curando 1d12 de dano. Pode gastar 1 Especial para tentar curar +1d6, ou no máximo o dano da ferida.",
      duracao: "Gasta ação",
      tagLevel: "Hemomante",
      tagLevelResposta: "Nível 1 – Iniciado do Sangue",
      nivel:"1",
      alcance: "7m",
      testeConjurador: "Determinação",
      testeAlvo: "Determinação"
    },
    {
      id: "m3",
      nome: "Sangue fervido",
      sub: "Coctum sanguinem",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/46c76fb20b8fb9c9ad039f8cf447b2eedd42de81_high.webp",
      elemento: "Fé",
      tipoDano: "Sangue",
      descricao: "Olha para o alvo e o sangue dele começa a evaporar. Necessário estar olhando no olho do alvo para causar 2d10 de dano de Sangue. Toda vez que reconjurar essa magia no mesmo alvo e acertar, causa mais 1d4.",
      duracao: "Gasta ação",
      tagLevel: "Hemomante",
      tagLevelResposta: "Nível 2 – Guardião Rubro",
      nivel:"2",
      alcance: "2m",
      testeConjurador: "Determinação",
      testeAlvo: "Agilidade"
    },
    
    {
  id: "m888",
  nome: "Símbolo de Sangue",
  sub: "Sanguis Imperium",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/image.psd-3-1.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Sangue",
  descricao: `
  <p>O conjurador faz surgir um símbolo carmesim sob o alvo, prendendo-o em um círculo de sangue que o paralisa completamente. Enquanto estiver dentro do símbolo, o sangue do alvo é drenado, causando <strong>2d8</strong> de dano de Sangue a cada turno.</p>
  <p>O alvo pode gastar sua ação para tentar escapar do círculo. Após o símbolo ser liberado, o próximo ser que pisar sobre ele é curado — para cada turno em que o alvo original permaneceu preso, o curador recupera <strong>6d4</strong> de vida.</p>
  `,
  duracao: "Até conseguir sair",
  tagLevel: "Hemomante",
  tagLevelResposta: "Nível 3 – Portador do Sacrifício",
  nivel:"3",
  alcance: "3m",
  testeConjurador: "Libertação",
  testeAlvo: "Determinação"
},
{
  id: "m5",
  nome: "Conexão Santa",
  sub: "Sanctum Nexum Sacrum",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/03b0ac838c83805627920055fa2fb741a0d91e1c_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Sangue",
  descricao: `
  <p>O conjurador cria um fio de sangue entre si e o alvo, ligando suas existências em um laço sagrado. O alvo não pode se ocultar nem se afastar a mais de <strong>10m</strong> do conjurador, sendo constantemente sentido através da conexão.</p>
  <p>Enquanto a ligação estiver ativa, o alvo sofre <strong>1d10 + 1d4</strong> de dano de Sangue a cada turno, e o conjurador recupera <strong>3x</strong> esse valor em vida. O alvo pode tentar resistir a cada turno como ação livre.</p>
  `,
  duracao: "Até conseguir sair",
  tagLevel: "Hemomante",
  tagLevelResposta: "Nível 3 – Portador do Sacrifício",
  nivel:"3",
  alcance: "10m",
  testeConjurador: "Agilidade",
  testeAlvo: "Determinação"
},
{
  id: "m6",
  nome: "Órgãos Sombrios",
  sub: "Tenebris Organa",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/a91e7210c7b71101e296f35eeb5005f252ad9993_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Sangue",
  descricao: `
  <p>O conjurador consome órgãos de criaturas para obter vigor profano. Cada órgão traz um efeito específico:</p>
  <ul>
    <li><strong>Coração:</strong> Restaura 50% da vida.</li>
    <li><strong>Cérebro:</strong> Restaura 70% da vida.</li>
    <li><strong>Demais órgãos:</strong> Restaura 30% da vida.</li>
  </ul>
  <p>O órgão deve estar em bom estado; consumir tecidos danificados pode causar um <strong>Status Negativo</strong> (Raiva, Selvageria, Preguiça ou Embriaguez).</p>
  `,
  duracao: "Gasta ação",
  tagLevel: "Hemomante",
  tagLevelResposta: "Nível 4 – Sanguinário Consagrado",
  nivel:"4",
  alcance: "1m",
  testeConjurador: "Determinação",
  testeAlvo: "Determinação"
},
{
  id: "m7",
  nome: "Bolhas de Sangue",
  sub: "Sanguis Bulle",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/image.psd-46.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Sangue",
  descricao: `
  <p>O conjurador molda bolhas de sangue que podem ser usadas tanto ofensiva quanto defensivamente.</p>
  <p><strong>Ofensivo:</strong> Ao lançar uma bolha em um inimigo, ela explode causando <strong>3d6</strong> de dano de Sangue e empurra o alvo <strong>1,5m</strong> para trás.</p>
  <p><strong>Defensivo:</strong> Se usada em um aliado, a bolha absorve até <strong>2d10</strong> de dano recebido. Caso seja estourada por um inimigo, o alvo deve realizar um teste de Determinação; se falhar, sofre <strong>1d4</strong> de dano de Sangue por turno até o fim do próximo turno do conjurador.</p>
  `,
  duracao: "Gasta ação",
  tagLevel: "Hemomante",
  tagLevelResposta: "Nível 5 – Sacerdote do Fluxo Vital",
  nivel:"6",
  alcance: "6m",
  testeConjurador: "Agilidade",
  testeAlvo: "Determinação"
},
{
  id: "m8",
  nome: "Vontade de Eldoria",
  sub: "Eldoria Will",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/1-sangue-aleheio.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Sangue",
  descricao: `
  <p>O conjurador invoca a bênção de <strong>Eldoria</strong>, o antigo deus do sangue, concedendo poder divino ao alvo escolhido. O abençoado recebe <strong>vantagem em todos os testes de Determinação</strong> e <strong>100 pontos de vida temporários</strong> por <strong>1d8 turnos</strong>.</p>
  <p>Durante esse período, seus ataques corpo a corpo causam <strong>+6d10</strong> de dano adicional de Sangue, e ele recupera <strong>2d10</strong> de vida sempre que inflige dano a uma criatura. O alvo ganha <strong>imunidade a sangramento</strong> e <strong>resistência a dano de Sangue</strong>.</p>
  <p><strong>Efeito Negativo:</strong> A presença do abençoado corrompe o ambiente: todas as criaturas em um raio de <strong>10m</strong> sofrem <strong>2d8</strong> de dano de Sangue no início de cada turno e têm sua velocidade reduzida em <strong>50%</strong>. Essas criaturas devem realizar um teste de Determinação a cada turno para evitar um efeito de sangramento (<strong>1d4</strong> de dano por turno).</p>
  `,
  duracao: "1d8 turnos",
  tagLevel: "Hemomante",
  tagLevelResposta: "Nível 6 – Arauto de Calisto",
  nivel:"6",
  alcance: "1m",
  testeConjurador: "Determinação",
  testeAlvo: "Determinação"
},{
  id: "m9",
  nome: "Consagrar Divino",
  sub: "Divina Consecrare",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/punho-santo.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Luz",
  descricao: `
  <p>O conjurador cria uma conexão divina com o sobrenatural, emanando uma energia dourada que purifica e ilumina o ambiente. Ao tocar uma criatura revivida, cadáver ou ser não-vivo, o alvo sofre <strong>1d12</strong> de dano de Luz e pode ser <strong>expulso</strong> caso falhe em um teste de <strong>Libertação</strong> (custo: <strong>2 de Especial</strong>).</p>
  <p>Se o toque for direcionado a uma criatura viva, ela é curada em <strong>1d8</strong> de vida.</p>
  `,
  duracao: "Gasta ação",
  tagLevel: "Iluminador",
  tagLevelResposta: "Nível 1 – Sacerdote",
  nivel: "1",
  alcance: "1m",
  testeConjurador: "Libertação",
  testeAlvo: "Determinação"
},
{
  id: "m10",
  nome: "Benção Antiga",
  sub: "Antiqua Benedictio",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/bencao.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Luz",
  descricao: `
  <p>O conjurador escolhe um alvo e cria um <strong>círculo translúcido</strong> de luz ao redor de sua cabeça. Enquanto a magia estiver ativa, o alvo recupera <strong>1d8</strong> de Sanidade e <strong>2d10</strong> de Vida no início de cada turno.</p>
  <p>Esta magia só pode estar ativa em um alvo por vez.</p>
  `,
  duracao: "Gasta ação",
  tagLevel: "Iluminador",
  tagLevelResposta: "Nível 2 – Prior",
  nivel: "2",
  alcance: "4m",
  testeConjurador: "Libertação",
  testeAlvo: "Determinação"
},
{
  id: "m11",
  nome: "Lança da Luz",
  sub: "Hasta Lucis",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/34eeb68d77746491ebe865d8609a606f24a34dea_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Luz",
  descricao: `
  <p>O conjurador invoca uma <strong>lança feita de luz pura</strong> e a arremessa contra um inimigo. A lança causa <strong>3d10</strong> de dano de Luz.</p>
  <p>Se atingir o alvo, este deve realizar um teste de <strong>Determinação</strong>. Em caso de falha, fica <strong>paralisado por 1 turno</strong>.</p>
  `,
  duracao: "Gasta ação",
  tagLevel: "Iluminador",
  tagLevelResposta: "Nível 3 – Abade",
  nivel: "3",
  alcance: "10m",
  testeConjurador: "Preservação",
  testeAlvo: "Determinação"
},
{
  id: "m12",
  nome: "Luz Sagrada",
  sub: "Lumen Sacra",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/e3435efa73e0f30bbd2b7d5a005bf7d41913039c_high-edited.webp",
  elemento: "Fé",
  tipoDano: "Luz",
  descricao: `
  <p>O conjurador emite uma <strong>luz sagrada</strong> que ilumina e purifica a área. Inimigos na área sofrem <strong>2d10</strong> de dano de Luz, enquanto aliados recuperam <strong>1d10</strong> de Vida.</p>
  <p>Criaturas malignas devem realizar um teste de <strong>Determinação</strong> ou serão forçadas a recuar <strong>5 metros</strong>.</p>
  `,
  duracao: "Gasta ação",
  tagLevel: "Iluminador",
  tagLevelResposta: "Nível 4 – Bispo",
  nivel: "4",
  alcance: "6m",
  testeConjurador: "Libertação",
  testeAlvo: "Determinação"
},
{
  id: "m13",
  nome: "Limpar",
  sub: "Mundare",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/limpar.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Luz",
  descricao: `
  <p>O conjurador fecha os olhos e canaliza uma energia purificadora, apontando para um alvo. Um feixe de luz o atinge, <strong>removendo todas as passivas e magias ativas</strong> — tanto positivas quanto negativas.</p>
  <p>O alvo, seja aliado ou inimigo, <strong>adormece imediatamente</strong> após o efeito.</p>
  `,
  duracao: "Gasta ação",
  tagLevel: "Iluminador",
  tagLevelResposta: "Nível 5 – Arcebispo",
  nivel: "5",
  alcance: "5m",
  testeConjurador: "Agilidade",
  testeAlvo: "Agilidade"
},
{
  id: "m14",
  nome: "Benção de Calisto",
  sub: "Segen von Calisto",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/1-escudo.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Luz",
  descricao: `
  <p>O conjurador recebe a <strong>bênção direta de Calisto</strong>, a deusa da Luz. Durante a duração da magia, o conjurador ganha <strong>imunidade a dano de Luz</strong> e regenera <strong>5d10</strong> de Vida no início de cada turno.</p>
  <p>Seus ataques causam <strong>+6d12</strong> de dano adicional de Luz.</p>
  <p>Aliados num raio de <strong>30m</strong> recebem <strong>+4 em testes de Libertação</strong> e curam <strong>2d10</strong> de Vida ao atacar com sucesso.</p>
  <p><strong>Efeito adicional:</strong> inimigos num raio de <strong>20m</strong> ficam <strong>cegos</strong> (−2d8 em testes de ataque, −10 em reações e ações por <strong>1d4 turnos</strong>) e sofrem <strong>3d10</strong> de dano de Luz a cada turno.</p>
  <p>O conjurador pode ainda <strong>reviver permanentemente</strong> um personagem morto durante a história, restaurando <strong>2d100 de Vida</strong>.</p>
  `,
  duracao: "1d4 turnos",
  tagLevel: "Iluminador",
  tagLevelResposta: "Nível 6 – Pontífice",
  nivel: "6",
  alcance: "1m",
  testeConjurador: "Preservação",
  testeAlvo: "Determinação"
}


    
    
    ,
    {
      id: "m66",
      nome: "Olho do Desespero",
      sub: "Oculus Desperatio",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/c2769191832f2f0cbaa350d57f699594073a9ef1_high-1.png",
      elemento: "Fé",
      tipoDano: "Maldição",
      descricao: "O alvo é atingido por uma maldição que causa desespero profundo. Enquanto estiver sob essa maldição, o alvo sofre desvantagem em todos os testes de Libertação e Preservação.\n\n“Para quebrar a maldição, o alvo deve se autoafirmar, dizendo uma frase positiva sobre si mesmo em voz alta, mas deve também realizar um teste de Conexão com dificuldade 15.“",
      duracao: "Até ser quebrado",
      tagLevel: "Maldizente",
      tagLevelResposta: "Nível 1 – Aprendiz da Maldição",
      nivel:"1",
      alcance: "6m",
      testeConjurador: "Conexão",
      testeAlvo: "Determinação"
    },
    
    {
  id: "m67",
  nome: "Marcas da Ignomínia",
  sub: "Notae Ignominiae",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/096959ed6e96bfc57edf3e000bfc52b3b1dd3941_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Maldição",
  descricao: `
  <p>O conjurador marca o alvo com uma <strong>tatuagem maldita</strong> que representa vergonha e desonra. Enquanto a marca estiver ativa, o alvo <strong>não pode usar habilidades que exijam concentração</strong> e sofre <strong>–2 em todos os testes de ataque</strong>.</p>
  <p><strong>Para remover a maldição:</strong> o alvo deve <strong>confessar um erro ou pecado</strong> diante de um grupo de aliados e realizar um teste de <strong>Libertação (Dificuldade 15)</strong>.</p>
  `,
  duracao: "Até ser quebrado",
  tagLevel: "Maldizente",
  tagLevelResposta: "Nível 2 – Portador dos Presságios",
  nivel: "2",
  alcance: "8m",
  testeConjurador: "Libertação",
  testeAlvo: "Determinação"
},
{
  id: "m68",
  nome: "Eco da Dor",
  sub: "Echo Doloris",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/8f26630749cc97ba4f5d7ed1a4ed16534dc139c1_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Maldição",
  descricao: `
  <p>O conjurador envolve o alvo em uma <strong>aura de sofrimento</strong> que amplifica sua dor. Enquanto a maldição estiver ativa, o alvo sofre <strong>1d10</strong> de dano ao final de cada turno e <strong>não pode se curar</strong> por nenhum meio.</p>
  <p><strong>Para quebrar a maldição:</strong> o alvo deve <strong>causar dano a um inimigo</strong> e realizar um teste de <strong>Determinação (Dificuldade 15)</strong>.</p>
  `,
  duracao: "Até ser quebrado",
  tagLevel: "Maldizente",
  tagLevelResposta: "Nível 3 – Mestre dos Anátemas",
  nivel: "3",
  alcance: "10m",
  testeConjurador: "Preservação",
  testeAlvo: "Determinação"
},
{
  id: "m69",
  nome: "Levanta!",
  sub: "Surgiteoooooo!!!",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/levanta.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Maldição",
  descricao: `
  <p>O conjurador profere palavras amaldiçoadas, fazendo um <strong>cadáver levantar-se</strong> sob sua vontade por até <strong>1 dia (24h)</strong>. O ser reanimado age com as condições <strong>Ódio</strong> e <strong>Sonambulismo</strong>, e sua ficha é controlada pelo conjurador.</p>
  <p>O morto-vivo possui <strong>metade da vida original</strong> e segue as ordens do conjurador até ser destruído ou libertado.</p>
  <p><strong>Efeito Negativo:</strong> além do custo inicial de Sanidade, o conjurador acumula <strong>+1 de custo de Sanidade</strong> a cada golpe recebido por seus servos. Todo o custo é pago integralmente quando a magia se desfaz.</p>
  `,
  duracao: "1 dia (24h) ou até ser quebrado",
  tagLevel: "Maldizente",
  tagLevelResposta: "Nível 4 – Profeta da Ruína",
  nivel: "4",
  alcance: "5m",
  testeConjurador: "Conexão",
  testeAlvo: "Determinação"
},
{
  id: "m70",
  nome: "Corrente da Agonia",
  sub: "Catena Doloris",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/949977b6a3399fcf54e0a07590fbf83843662832_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Maldição",
  descricao: `
  <p>O alvo é envolvido por <strong>correntes espectrais</strong> que drenam sua força vital e espiritual. Enquanto estiver sob a maldição, o alvo tem sua <strong>velocidade reduzida pela metade</strong> e <strong>não pode usar magias, passivas ou habilidades</strong>.</p>
  <p><strong>Para quebrar a maldição:</strong> o alvo deve <strong>derrotar um inimigo em combate</strong> e realizar um <strong>sacrifício de vida</strong>, perdendo <strong>4d12</strong> de Vida no processo.</p>
  `,
  duracao: "Até ser quebrado",
  tagLevel: "Maldizente",
  tagLevelResposta: "Nível 5 – Arauto dos Destinos Sombrios",
  nivel: "5",
  alcance: "12m",
  testeConjurador: "Conexão",
  testeAlvo: "Determinação"
},
{
  id: "m71",
  nome: "Devoração da Esperança",
  sub: "Vorago Spes",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Maldição",
  descricao: `
  <p>O conjurador lança uma <strong>maldição final</strong> que consome toda a esperança do alvo, mergulhando-o em um <strong>abismo de desespero</strong>. Enquanto amaldiçoado, o alvo <strong>não pode realizar ações voluntárias</strong>, apenas mover-se lentamente com <strong>–5 de penalidade na velocidade</strong>.</p>
  <p>O alvo não pode receber bônus, curas ou recuperar vida de qualquer forma. Todos os ataques contra ele possuem <strong>vantagem automática</strong>, e ele sofre <strong>3d6</strong> de dano de Maldição ao fim de cada turno.</p>
  <p><strong>Para quebrar a maldição:</strong> o alvo deve <strong>sacrificar uma parte de sua alma</strong>, perdendo permanentemente <strong>1 ponto em um atributo principal</strong> (Brutalidade, Agilidade, Determinação, Preservação, Libertação ou Conexão), e realizar um teste de <strong>Libertação (Dificuldade 25)</strong>. Mesmo quebrada, a perda do atributo é definitiva.</p>
  `,
  duracao: "Até ser quebrado",
  tagLevel: "Maldizente",
  tagLevelResposta: "Nível 6 – Véu do Fim",
  nivel: "6",
  alcance: "20m",
  testeConjurador: "Preservação",
  testeAlvo: "Determinação"
}
,

    {
  id: "m72",
  nome: "Marcas das Cinzas",
  sub: "Skammens Merker",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/9d7fa2fe5254e62f037b575dd06fa3d3892e2e7e_high.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Cinzas",
  descricao: `
  <p>Cobre uma área com <strong>cinzas</strong> que permanecem por <strong>1d6 turnos</strong>. Qualquer criatura que tentar se limpar sofre <strong>1d12</strong> de dano de Cinzas.</p>
  <p>Se usada sobre o conjurador, ele recebe uma <strong>armadura temporária de 6</strong>.</p>
  `,
  duracao: "1d6 turnos",
  tagLevel: "Discípulo da Cinza",
  tagLevelResposta: "Nível 1 – Discípulo da Cinza",
  nivel: "1",
  alcance: "8m",
  testeConjurador: "Libertação",
  testeAlvo: "Determinação"
},
{
  id: "m73",
  nome: "Fuligem Obscura",
  sub: "Mørk Sot",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/312a758eaab0b4345ac2f8f84ad320417f987015_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Cinzas",
  descricao: `
  <p>Uma <strong>nuvem espessa de fuligem</strong> se espalha em uma área circular de <strong>20 metros</strong>, queimando e cegando todos os alvos dentro dela.</p>
  <p>Os inimigos afetados sofrem <strong>cegueira</strong> e queimaduras leves enquanto permanecerem no interior da área.</p>
  `,
  duracao: "1d6 turnos",
  tagLevel: "Guardião das Cinzas",
  tagLevelResposta: "Nível 2 – Guardião das Cinzas",
  nivel: "2",
  alcance: "10m",
  testeConjurador: "Preservação",
  testeAlvo: "Determinação"
},
{
  id: "m74",
  nome: "Cinzeiro Eterno",
  sub: "Evig Aske",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/89f26ec9afcaf1dd167d40def157a159c85a65c6_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Cinzas",
  descricao: `
  <p>Cria um <strong>dome circular de 50m</strong> formado por cinzas. Qualquer criatura que <strong>entrar ou sair</strong> da área sofre <strong>1d8</strong> de dano de Cinzas e fica <strong>execrada</strong>.</p>
  <p>Se tentar atravessar novamente, sofre <strong>4d20</strong> de dano de Cinzas.</p>
  `,
  duracao: "1d8 turnos",
  tagLevel: "Sábio das Cinzas",
  tagLevelResposta: "Nível 3 – Sábio das Cinzas",
  nivel: "3",
  alcance: "6m",
  testeConjurador: "Conexão",
  testeAlvo: "Determinação"
},
{
  id: "m75",
  nome: "Cinzas Ígneas",
  sub: "Glødende Aske",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/a16f744c26e0a59ec9ebe5701dfabb5d652b659a_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Cinzas",
  descricao: `
  <p>Faz um <strong>objeto entrar em combustão</strong> até se tornar cinzas. O objeto deve resistir ou será destruído gradualmente.</p>
  <ul>
    <li><strong>Quente:</strong> 2d8 de dano de Cinzas ao toque. (DT8)</li>
    <li><strong>Queimado:</strong> 4d20 de dano de Cinzas; pode ser salvo se esfriado em <strong>1d6 turnos</strong>. (DT15)</li>
    <li><strong>Cinzas:</strong> Torna-se pó e inutilizável. (DT18)</li>
  </ul>
  `,
  duracao: "Até ser quebrado",
  tagLevel: "Arauto das Cinzas",
  tagLevelResposta: "Nível 4 – Arauto das Cinzas",
  nivel: "4",
  alcance: "8m",
  testeConjurador: "Libertação",
  testeAlvo: "—"
},
{
  id: "m76",
  nome: "Cinzas Primordiais",
  sub: "Primordiale Aske",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/6644e4efddfca898c59c52b68115bd2b280e7b18_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Cinzas",
  descricao: `
  <p>Convoca uma <strong>tempestade de cinzas</strong> que ilumina o céu e eleva a temperatura em um raio de <strong>30 metros</strong>.</p>
  <p>Os que olham diretamente para a tempestade devem fazer um teste de <strong>Determinação</strong> ou ficam <strong>cegos por 1d6 turnos</strong>.</p>
  <p>Todos os alvos dentro da área sofrem <strong>3d10 de dano de Cinzas</strong> devido ao calor extremo.</p>
  `,
  duracao: "1d12 turnos",
  tagLevel: "Não Acesos",
  tagLevelResposta: "Nível 5 – Não Acesos",
  nivel: "5",
  alcance: "30m",
  testeConjurador: "Preservação",
  testeAlvo: "Determinação"
},
{
  id: "m77",
  nome: "Fênix Amalgamada",
  sub: "Amalgamert Føniks",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/2eca2ab71703b775c78931c70a107fa208cb5993_high.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Cinzas",
  descricao: `
  <p>Renasce das cinzas, criando uma <strong>criatura feita de fogo e pó</strong> que toma a forma de uma fênix. Quando morre, ela retorna em <strong>1d6 turnos</strong>, a menos que sofra mais de <strong>80 de dano</strong>.</p>
  <p>Enquanto viva, o conjurador sofre <strong>1d8 de dano de Cinzas</strong> por turno.</p>
  <ul>
    <li><strong>Vida:</strong> 257</li>
    <li><strong>Garras:</strong> 4d12 de dano de Cinzas (alvo único)</li>
    <li><strong>Golpe em área:</strong> 2d20 de dano de Cinzas em 6m à frente</li>
  </ul>
  `,
  duracao: "Até ser morto",
  tagLevel: "Senhor da Ressurreição",
  tagLevelResposta: "Nível 6 – Senhor da Ressurreição",
  nivel: "6",
  alcance: "20m",
  testeConjurador: "Determinação",
  testeAlvo: "Agilidade"
},
{
  id: "m78",
  nome: "Renascer das Chamas",
  sub: "Gjenfødelse fra Flammene",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/d738675223cd65662e391619b2028c09b69f11fb_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Cinzas",
  descricao: `
  <p>O conjurador retorna à sua antiga glória, causando <strong>4d20 de dano</strong> no alvo mais próximo e recebendo <strong>80 de vida temporária</strong>.</p>
  <p>Todas as magias de Cinzas passam a causar <strong>queimaduras</strong>, e criaturas em um raio de <strong>50 metros</strong> ficam <strong>confusas</strong>.</p>
  <p>Um alvo escolhido sofre <strong>2d12 de dano de Cinzas</strong> e é envolto por chamas leves que causam <strong>5 de dano por turno</strong>.</p>
  `,
  duracao: "30 minutos ou 1d10 turnos",
  tagLevel: "Os Renascidos",
  tagLevelResposta: "Nível 7 – Os Renascidos",
  nivel: "7",
  alcance: "5m",
  testeConjurador: "Conexão",
  testeAlvo: "Determinação"
}
,
    
    
    {
    id: "m166",
nome: "Telefone Temporal",
sub: "Tidsmessig Telefon",
img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2025/09/telefonetemporal-1.png?w=768&h=768",
elemento: "Desconhecido",
tipoDano: "Sono",
descricao: `
Um telefone sobrenatural se materializa diante do conjurador, permitindo discar para um ponto em outra época. Quem atender a ligação é envolvido por ecos do tempo e deve realizar um teste de <strong>Libertação</strong> contra o conjurador. Se falhar, adormece por <strong>1 turno</strong> e sofre <strong>1d6 de dano de Sono</strong> causado pelos ecos oníricos.  


<strong>Efeitos do Telefone Temporal:</strong><br>
<strong>• Ligação Fantasma:</strong> O conjurador pode transmitir uma mensagem curta para um ser do passado ou futuro.<br>
<strong>• Sonho Invasivo:</strong> Se o atendente dormir, o conjurador pode plantar uma visão ou memória ilusória, que permanece após o despertar.<br>
<strong>• Interferência Temporal:</strong> Caso o teste seja um <em>fracasso crítico</em>, uma entidade perdida no tempo responde ao chamado, obrigando o conjurador a realizar um teste de <strong>Libertação</strong>. Se falhar, o conjurador sofre <strong>4d10 de dano psíquico</strong> devido ao contato instável.
`,
duracao: "1d4 turnos",
tagLevel: "Apanhador",
tagLevelResposta: "Nível 5 – Profeta das Visões Oníricas",
nivel:"5",
alcance: "Ilimitado (através do tempo)",
testeConjurador: "Conexão",
testeAlvo: "Libertação"
},
     {
      id: "m4",
      nome: "Reflexão de Eclipse",
      sub: "Eklipsens Refleksjon",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/4fe807a14c95007000191d1e5ed588e0d965b75a_high.png",
      elemento: "Desconhecido",
      tipoDano: "Eclipse",
      descricao: `
O conjurador cria uma imagem reflexiva de si mesmo que ataca o alvo. O alvo deve fazer um teste de <strong>Libertação</strong>. Se falhar, o alvo sofre <strong>1d10 de dano de Eclipse</strong> e recebe um bônus de <strong>+1d6 em ataques</strong> durante <strong>2 turnos</strong>. O clone pode atacar os aliados no próximo turno, obrigando-os a fazer um teste de <strong>Agilidade</strong> para não sofrerem dano.

<strong>Condições durante o eclipse:</strong>
<ul>
  <li><strong>Invocação Sombria Adicional:</strong> Durante o eclipse, o conjurador pode criar um segundo clone reflexivo que ataca os inimigos por um turno adicional.</li>
  <li><strong>Distorção de Percepção:</strong> Todos os alvos próximos ao clone têm dificuldade de foco, recebendo <strong>-1 em Conexão</strong> para resistir aos ataques do clone.</li>
</ul>
`,
      duracao: "2 turnos",
      tagLevel: "Aspirante do Crepúsculo",
      tagLevelResposta: "Nível 1 – Aspirante do Crepúsculo",
       nivel:"1",
      alcance: "30m",
      testeConjurador: "Conexão",
      testeAlvo: "Libertação"
    }
    ,
    {
  id: "m165",
  nome: "Lâminas do Eclipse",
  sub: "Eklipsens Klinger",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/ed4d7bbcd227eec5b900e31a45b636c71433a9c1_high.png?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador imbuí suas espadas, cimitarras e foices com energia do eclipse, aumentando sua eficácia. Os ataques com armas cortantes recebem <strong>+2 de dano</strong>. Além disso, ao acertar um ataque, o conjurador pode escolher entre causar <strong>1d10</strong> de dano adicional de Eclipse ou deixar o alvo com desvantagem em seu próximo ataque.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Lâmina Dupla:</strong> As armas imbuídas duplicam-se temporariamente durante o ataque, atingindo dois alvos simultaneamente.<br>
  <strong>• Escudo da Escuridão:</strong> O conjurador ganha um escudo de sombras que reduz o dano recebido em <strong>2d6</strong> por turno.<br>
  `,
  duracao: "3 turnos",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 2 – Tecelão da Penumbra",
  nivel:"2",
  alcance: "Toque",
  testeConjurador: "Conexão",
  testeAlvo: "—"
},

    {
  id: "m172",
  nome: "Clone das Sombras",
  sub: "Clonum Umbra",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/cb56164b7c6f8e1a4f70a84d85d309e61d809b84_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador convoca um clone sombrio que pode atacar os inimigos. No início de cada turno, o clone pode atacar aliados aleatórios, causando o dano da arma empunhada + <strong>2d6 de dano de Eclipse</strong>. Os aliados atacados podem fazer um teste de <strong>Agilidade</strong> para evitar o golpe. Se não houver alvos, o clone pode atacar o próprio conjurador.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Multiplicação Sombria:</strong> Durante um eclipse, surgem <strong>dois clones adicionais</strong> com metade do dano original.<br>
  <strong>• Frenesi de Eclipse:</strong> Os clones recebem <strong>+1d4 em Agilidade</strong> e causam pavor entre os aliados do alvo, que recebem <strong>-1</strong> em ataques.<br>
  <em>O clone sempre prioriza atacar com a arma em mãos e age de forma independente.</em><br>
  `,
  duracao: "4 turnos ou até sofrer 1d8 golpes",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 3 – Guardião da Meia-Noite",
  nivel:"3",
  alcance: "50m",
  testeConjurador: "Conexão",
  testeAlvo: "Agilidade"
}


    
    ,
    {
  id: "m167",
  nome: "Fragmento do Tempo",
  sub: "Fragmentum Tempus",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/b4a36f19fa6869978aa29d1f6dabfdf67548093a_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador busca um objeto do passado ou do futuro, fazendo com que um fragmento apareça ao seu redor. O objeto escolhido pode ter propriedades mágicas ou úteis, proporcionando um <strong>bônus de +3</strong> a uma habilidade relacionada ao objeto. O alvo deve fazer um teste de <strong>Conexão</strong> para resistir à atração do fragmento.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>1. Fluxo Temporal Amplificado:</strong> Permite que o conjurador traga até três objetos temporais do passado ou do futuro simultaneamente, cada um com bônus aleatórios.<br>
  <strong>2. Congelamento do Momento:</strong> O tempo ao redor do alvo congela brevemente, e o alvo fica paralisado por um turno ou até que outro ataque o atinja.<br><br>

  <strong>Exemplo de objetos Temporais e bônus:</strong><br>
  <em>PARA OUTROS, FALAR COM MESTRE!!!</em><br><br>

  <strong>Ponteiro de Calisto:</strong> Possui um traço de energia que acelera um movimento específico, permitindo uma ação extra em um único turno para quem o carrega.<br>
  <strong>Relógio da Eternidade:</strong> Permite ao usuário prever o próximo ataque do alvo e reagir com mais agilidade (<strong>+3</strong> em testes de Agilidade por um turno).<br>
  <strong>Areia das Eras:</strong> Quando usada em combate, desacelera o tempo para o alvo escolhido, reduzindo seus ataques por turno em <strong>1</strong>.<br>
  <strong>Ampulheta do Recomeço:</strong> Gera uma área de influência em que o conjurador pode “reverter” uma ação recente, como um movimento ou um ataque fracassado, para um segundo intento.<br>
  <strong>Bússola da Paradoxa:</strong> Aponta para um momento favorável no futuro imediato, concedendo <strong>+2</strong> em Determinação para o conjurador.<br>
  `,
  duracao: "Gasta ação",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 4 – Mestre do Eclipse",
  nivel:"4",
  alcance: "100m",
  testeConjurador: "Conexão",
  testeAlvo: "Conexão",
  testeDt: "10, 15, 20, 25, 30 define a qualidade do item"
}
,
 {
  id: "m168",
  nome: "Ilusão Lunar",
  sub: "Illusio Lunae",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/5719ee14f89ab3f8dc5a2c5aea697dfaf292524d_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador cria uma duplicação da lua no céu, causando um efeito de ilusão em uma área de 50m. Todos os inimigos nessa área devem fazer um teste de <strong>Libertação</strong>. Se falharem, ficam confusos, reduzindo seu movimento em <strong>5m</strong> e recebendo <strong>-1d4</strong> em todos os ataques por <strong>2 turnos</strong>.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Reflexo Duplicado:</strong> A duplicação da lua se torna uma miragem múltipla, desorientando ainda mais os inimigos, que perdem <strong>-2</strong> em todos os testes de Determinação.<br>
  <strong>• Luz Ilusória:</strong> A ilusão confunde os sentidos, reduzindo a visibilidade dos alvos em <strong>10m</strong>, dificultando sua reação aos ataques do conjurador e aliados.<br>
  `,
  duracao: "2 turnos",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 5 – Oráculo das Sombras",
  nivel:"5",
  alcance: "30m",
  testeConjurador: "Conexão",
  testeAlvo: "Libertação"
}
,

    {
  id: "m169",
  nome: "Dano do Eclipse",
  sub: "Eklipseskade",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/29cb86e267a96b8a93a8a5e27ea2c863ff911f06_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador canaliza a energia do eclipse, causando <strong>3d12</strong> de dano ao alvo. O alvo deve fazer um teste de <strong>Libertação</strong>. Se falhar, o dano aumenta em <strong>+2d12</strong> e o alvo ganha o lado negativo de “Mutação”.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Armadura Sombria:</strong> O conjurador ganha uma resistência temporária ao dano de Eclipse, absorvendo até <strong>3d10</strong> de dano de ataques.<br>
  <strong>• Amplificação de Eclipse:</strong> Durante um eclipse, o dano aumenta em <strong>+3d6</strong> e causa uma desvantagem de <strong>-1d4</strong> em testes de Libertação para o alvo.<br>
  `,
  duracao: "Instantânea",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 6 – Vidente do Véu",
  nivel:"6",
  alcance: "15m",
  testeConjurador: "Conexão",
  testeAlvo: "Libertação"
}
,
 {
  id: "m170",
  nome: "Mutação Sombria",
  sub: "Mutatio Obscura",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/45b8e4fe971fb2ac776d04bf14e0401628d7236d_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>A magia causa uma transformação em um alvo, que deve fazer um teste de <strong>Conexão</strong>. Se falhar, ele sofre <strong>5d12</strong> de dano de Eclipse e se torna vulnerável a ataques do conjurador por <strong>1d6 turnos</strong>. O conjurador também ganha apenas o lado positivo de “Mutação”.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Mutação Melhorada:</strong> Durante o eclipse, o conjurador recebe um bônus positivo de “Mutação” permanente, concedendo <strong>+1 em Conexão</strong>.<br>
  <strong>• Redução de Tamanho:</strong> O alvo encolhe temporariamente, reduzindo seu alcance de ataque pela metade e perdendo <strong>2 de Força</strong> por turno.<br>
  <em>Cria um eclipse no céu automaticamente ao conjurar.</em><br>
  `,
  duracao: "Instantânea, 1d6 turnos",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 7 – Sábio do Oculto",
  nivel:"7",
  alcance: "20m",
  testeConjurador: "Conexão",
  testeAlvo: "Conexão"
}
,
    
    {
  id: "m171",
  nome: "Cataclismo do Eclipse",
  sub: "Cataclysmus Eclipse",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/7b2765874d33197e7303f605e2dfd57f65287eab_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Eclipse",
  descricao: `
  <p>O conjurador provoca um cataclismo que reverbera pela terra, criando ondas de escuridão e destruição. Todos os alvos em um raio de <strong>200m</strong> devem fazer um teste de <strong>Libertação</strong>. Se falharem, sofrem <strong>8d10</strong> de dano de Eclipse e Sanidade. A mutação pode alterar a aparência de todos dentro da área sem custo, podendo adicionar traços únicos em cada um.</p>

  <strong>Condições durante o eclipse:</strong><br>
  <strong>• Onda de Eclipse:</strong> O alcance do cataclismo dobra para <strong>400m</strong>, causando <strong>+3d10</strong> de dano adicional de Eclipse.<br>
  <strong>• Véu Sombrio:</strong> O conjurador pode escolher até <strong>três alvos</strong> e torná-los invisíveis temporariamente, confundindo os inimigos e permitindo ataques furtivos.<br>
  <em>Cria um eclipse no céu automaticamente ao conjurar.</em><br>
  `,
  duracao: "Instantânea",
  tagLevel: "Lunares",
  tagLevelResposta: "Nível 8 – Arconte do Infinito",
  nivel:"8",
  alcance: "200m",
  testeConjurador: "Conexão",
  testeAlvo: "Libertação"
}

  ],
  passivas: [
{
  id:"p1",
  nome:"Consumir",
  sub:"Consumere",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/f1c4787c84ea8bb72ad3f8f3e77976ee8976e146_high.webp?w=768&h=768",
  elemento:"Fé",
  tipoDano:"Sangue",
  descricao:`<p><strong>Seu personagem é tomado por uma fome insaciável</strong> e se alimenta do alvo, drenando sua essência vital. Ao fazê-lo, pode <em>curar um valor de Vida ou Sanidade</em>, conforme a natureza da presa.</p>`,
  positivo:`<p><strong>Postura Assassina:</strong> O personagem avança e morde o alvo, tentando dilacerá-lo e consumir o valor do dano (opcional). Causa <strong>1d12 + 1d4</strong> de dano em <em>Vida</em> e <strong>1d6 + 1d4</strong> em <em>Sanidade</em>. Pode converter o dano causado em cura para si mesmo.</p>`,
  negativo:`<p><strong>Falha:</strong> O dano e a cura são resolvidos separadamente. Em caso de erro, o conjurador sofre metade do dano causado e pode ficar <em>bêbado ou tonto</em> pelo gosto amargo do sangue.</p>`,
  duracao:"Um turno",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Sobrevivência",
  testeAlvo:"Agilidade"
}
,
{
  id:"p2",
  nome:"Alegria",
  sub:"Beatitudo",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/a8c0678e4a46aef77c2dbb9a7c6fa0f68ac0bd6c_high.webp?w=768&h=768", 
  elemento:"Fé",
  tipoDano:"Sagrado",
  descricao:`<p><strong>O personagem fica visivelmente mais contente</strong>, rindo de tudo que acontece. Seu sorriso se torna o traço mais marcante dessa bênção, permanecendo constantemente em seu rosto como se fosse impossível conter a felicidade.</p>`,
  positivo:`<p><strong>Êxtase Contagiante:</strong> O personagem recebe <strong>+1d8</strong> em testes de <em>Conexão</em>. Além disso, qualquer criatura que presenciar alguém com essa passiva deve realizar um teste para determinar se será <em>contagiada pela alegria</em>. O personagem também ganha <strong>+5 de movimento</strong> enquanto o efeito durar.</p>`,
  negativo:`<p><strong>Falha ou Excesso:</strong> Algo <em>Desconhecido</em> tenta consumir o personagem ao fim do combate. Ele deve realizar um teste de resistência: <strong>1d20 + bônus de (Preservação, Libertação ou Conexão + Sanidade Atual)</strong>. Em caso de falha, o personagem fica <strong>possuído por 1d4 dias</strong>.</p>`,
  duracao:"Até o fim da cena ou 1d4 dias",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Conexão",
  testeAlvo:"Conexão"
}
,{
  id:"p3",
  nome:"Bêbado",
  sub:"Ebrius",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/4c01b7cdecaa62343d2979ce5bde7994df12dc8f_high-1.png?w=768&h=768",
  elemento:"Caos",
  tipoDano:"Ácido",
  descricao:"O personagem consome algo alcoólico e assume uma postura desorientada, oscilando entre genialidade e descontrole. <em>Bebidas alcoólicas são proibidas para menores de 18 anos.🚫</em>",
  positivo:"Recebe <strong>+5 fixo em testes de Conexão</strong>. Não pode ser <strong>agarrado</strong>. Ganha uma <strong>armadura invisível</strong> que protege contra acidentes e ataques físicos, <strong>reduzindo o dano em 1D12</strong>. O valor da redução é determinado na <strong>primeira vez que for testado</strong> e permanece até o fim do combate.",
  negativo:"<strong>Perde 5 metros de movimento</strong>. Em <strong>testes de Libertação</strong>, só pode <strong>tentar esquivar</strong>. Recebe <strong>1D6 de desvantagem em testes de Agilidade</strong>.",
  duracao:"Até o fim do combate ou cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Agilidade",
  testeAlvo:"Percepção"
},{
  id:"p4",
  nome:"Armadura Sobrenatural",
  sub:"Superno Armis",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-27.png?w=768&h=768",
  elemento:"Variável",
  tipoDano:"Variável",
  descricao:"Faz surgir uma armadura no seu alvo do elemento escolhido.",
  positivo:"Cria em volta do alvo uma entre 4 armaduras:\n- Tipo 1 – Sangue Sagrado: sangue cristalizado com brilho sagrado.\n- Tipo 2 – Energia de Plasma: sombras incandescentes envolvendo o alvo.\n- Tipo 3 – Névoa Sombria: escudo de pele com névoa umbral cobrindo o corpo.\n- Tipo 4 – Revolta da Natureza: elementos da natureza alternando ao redor do corpo.\nO alvo recebe <strong>1D20 de armadura</strong> e pode gastar o custo de conjuração desta habilidade para trocar sua armadura para <strong>5D6</strong> e alterar o elemento.",
  negativo:"Se for atingido por um elemento diferente da sua armadura, recebe <strong>dobro de dano extra</strong>. Apenas para os elementos Caos, Fé, Poder e Desconhecido. Se o dano for do mesmo elemento, mas diferente do escolhido, apenas não negará o dano. O valor tirado no dado é subtraído do dano recebido; se o alvo tiver resistência, receberá metade deste valor já subtraído.",
  duracao:"Até o fim da cena ou fim do combate",
  nivel:"5",
  alcance:"Visível",
  elementoArmadura:"1 – Fé: Sangue ou Sagrado\n2 – Poder: Plasma ou Laser\n3 – Desconhecido: Névoa ou Distorção\n4 – Caos: Fogo, Eletricidade, Tempestade ou Gelo",
  testeConjurador:"Determinação",
  testeAlvo:"Determinação"
},{
  id:"p5",
  nome:"Sorriso Contemplativo",
  sub:"Contemplativus Risus",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-25.png?w=768&h=768",
  elemento:"Variável",
  tipoDano:"Variável (Escuridão, Maldição, Névoa ou Tempestade)",
  descricao:`<p><strong>Um sorriso macabro se forma no rosto do personagem</strong>, irradiando uma energia que distorce a percepção dos que o observam. Com esse gesto enigmático, o personagem escolhe um alvo e canaliza nele um poder sobrenatural que amplifica sua fúria e destruição.</p>`,
  positivo:`<p><strong>Sopro do Observador:</strong> O personagem escolhe um alvo e aumenta o dano dele em <strong>+1d12</strong> de um dos seguintes tipos de dano à escolha: <em>Escuridão</em>, <em>Maldição</em>, <em>Névoa</em> ou <em>Tempestade</em>. Enquanto permanecer imóvel, mantendo o sorriso voltado ao alvo, a melhoria continua ativa.</p>
  <p>Além disso, o personagem pode gastar mais <em>Especial</em> e conjurar novamente no próximo turno, pagando o custo de conjuração mais uma vez para adicionar outro <strong>+1d12</strong> ao dano do alvo.</p>`,
  negativo:`<p><strong>Riso Paralizante:</strong> Ao ativar essa habilidade, o personagem torna-se imóvel — senta-se no chão, cruza os braços e ri em direção ao alvo, completamente vulnerável a ataques. O alcance máximo dessa habilidade é de <strong>16 metros</strong>.</p>`,
  duracao:"Até o fim do combate ou até ser desativada",
  nivel:"4",
  alcance:"Visível",
  testeConjurador:"Libertação",
  testeAlvo:"Determinação"
},{
  id:"p6",
  nome:"Emanar Energia",
  sub:"Procedunt Navitas",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/emanar.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Aura",
  descricao:`<p><strong>Sua energia começa a vazar do corpo</strong>, exalando uma presença sufocante e uma vontade assassina que distorce o ar ao redor. O chão vibra sob seus pés, e uma aura intensa se espalha, tornando impossível ignorar sua existência.</p>`,
  positivo:`<p><strong>Presença Dominante:</strong> O personagem recebe <strong>+1d8</strong> em testes de <em>Intimidação</em>, <strong>+1d8</strong> de dano de <em>Aura</em> em ataques corpo a corpo e <strong>+1d4</strong> em testes de <em>Agarrar</em>. Sua energia bruta também pode <em>empurrar objetos próximos</em>, e sua <strong>Armadura</strong> é aumentada em <strong>+5 fixo</strong>.</p>`,
  negativo:`<p><strong>Fúria Incontrolável:</strong> O personagem se torna incapaz de agir furtivamente e passa a ser facilmente irritável. Se for <em>provocado</em> por inimigos ou aliados, entra imediatamente em estado de <strong>Ódio</strong>. Além disso, sempre que realizar um teste, deve <strong>rolar os dados duas vezes e ficar com o pior resultado</strong>.</p>`,
  duracao:"Até o fim da cena",
  nivel:"4",
  alcance:"Visível",
  testeConjurador:"Intimidação",
  testeAlvo:"Intuição"
},{
  id:"p7",
  nome:"Ódio",
  sub:"Odium",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/32d88826aabd8d02aaa302d31942f834abbf6545_high-1.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Distorção",
  descricao:`<p><strong>Uma variação extrema da Raiva domina o personagem</strong> quando ele entra em fúria. Seus olhos tornam-se negros, a pele exala uma energia escura e a postura se torna animalesca. O autocontrole desaparece por completo, substituído por um instinto de destruição pura. Sua presença pode ser sentida a quase um quilômetro de distância, enquanto o ódio acumulado por toda a vida desperta em um único surto devastador.</p>`,
  positivo:`<p><strong>Fúria Devastadora:</strong> Cada ataque corpo a corpo causa <strong>1d12 + 1d6</strong> de dano, refletindo o poder bruto e o descontrole total do personagem.</p>`,
  negativo:`<p><strong>Descontrole Total:</strong> O personagem só pode realizar <em>ataques corpo a corpo</em>, mas o faz de maneira implacável, atacando <strong>duas vezes</strong> o alvo mais próximo — <em>seja ele aliado ou inimigo</em>.</p>`,
  duracao:"Só acaba quando o personagem é derrubado",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Brutalidade",
  testeAlvo:"Agilidade"
},{
  id:"p8",
  nome:"Vingança",
  sub:"Vindicta",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2025/10/vingancaa.png?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Distorção",
  descricao:`<p><strong>O personagem entra em um estado de alerta absoluto</strong>, com os olhos atentos e a respiração controlada. Sua postura se torna defensiva, mas impregnada por um instinto de retaliação sobrenatural — cada golpe recebido desperta uma resposta imediata e implacável.</p>`,
  positivo:`<p><strong>Retribuição Imediata:</strong> Sempre que o personagem for atingido, ele devolve <strong>o mesmo dano recebido + 2d8</strong> de dano de <em>Distorção</em> ao agressor. Pode ser usada como <em>Reação</em>, exigindo um teste de <strong>Contra-ataque</strong>.</p>`,
  negativo:`<p><strong>Imobilidade da Ira:</strong> Enquanto permanecer nesse estado, o personagem <strong>não pode se mover</strong>, tornando-se uma fortaleza estática de pura vingança.</p>`,
  duracao:"Até decidir se mover ou até o fim do combate",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Percepção",
  testeAlvo:"Agilidade"
},{
  id:"p9",
  nome:"Medo Oculto",
  sub:"Occulta Timor",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/515a5fa66786036a9c6faa70b23b173dea0d6c63_high.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Aura",
  descricao:`<p><strong>Seus olhos passam a brilhar com um tom ameaçador</strong>, irradiando uma força que desperta o pavor mais profundo no coração do alvo. Uma presença invisível o sufoca, como se a própria morte o observasse de perto, silenciosa e inevitável.</p>`,
  positivo:`<p><strong>Terror Espiritual:</strong> O alvo é afetado pela passiva <strong>PAVOR</strong> e evita o combate por <strong>1d6 turnos</strong>. O efeito se mantém até o <em>fim do combate</em>, fazendo com que o medo o paralise completamente diante do conjurador.</p>`,
  negativo:`<p><strong>Medo Invertido:</strong> Se o teste falhar, o alvo vê apenas o conjurador na arena. Deve rolar <strong>1d6</strong> para determinar quantos turnos ficará <strong>focado exclusivamente em atacá-lo</strong>, tomado por uma obsessão destrutiva.</p>`,
  duracao:"1d6 turnos",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Intimidação",
  testeAlvo:"Libertação"
},{
  id:"p10",
  nome:"Preguiça",
  sub:"Segnities",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/248c2c6b18ccad137aeb5b4e4a971ad51d366204_high.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Escuridão",
  descricao:`<p><strong>O personagem se torna lento e relutante em agir</strong>, movendo-se com calma quase provocativa. Cada gesto parece carregado de peso, mas, paradoxalmente, essa apatia o protege — nada parece urgente, nada o abala.</p>`,
  positivo:`<p><strong>Letargia Protetora:</strong> O personagem torna-se <strong>imune a testes de Conexão</strong>, pois sua preguiça supera qualquer tentativa de manipulação ou influência inimiga. Além disso, ele <em>atrasará sua jogada</em> para o final da fila e pode <strong>escolher seu maior dado de dano</strong>, somando <strong>metade do valor dos dados extras</strong> ao dano total, reduzindo a necessidade de múltiplas rolagens.</p>`,
  negativo:`<p><strong>Sonolência Incontrolável:</strong> No início de cada turno, o personagem deve rolar <strong>1d20</strong>. Se o resultado for menor que o bônus de sua <em>Determinação</em>, ele <strong>adormece</strong> instantaneamente, perdendo o turno.</p>`,
  duracao:"Até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Determinação",
  testeAlvo:"Determinação"
},{
  id:"p11",
  nome:"Sonambulismo",
  sub:"Somnus ambulans",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/7753a7f9f7a2e54472b8cf7c3f4d93ec21dc39f4_high.webp?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Aura",
  descricao:`<p><strong>O personagem anda dormindo</strong>, agindo e tomando decisões sem plena consciência, como se movesse entre o mundo dos sonhos e a realidade.</p>`,
  positivo:`<p><strong>Movimento Sonambúlico:</strong> Ganha <strong>+1D6</strong> em rolagens de <em>Reação</em> ou <em>Agilidade</em>. Seus ataques não podem causar crítico, mas cada ataque causa <strong>+1D12</strong> de dano de <em>Aura</em>.</p>`,
  negativo:`<p><strong>Ação Indecisa:</strong> Não pode realizar ataques elaborados. Sempre que for agir, o jogador deve escolher duas ações possíveis, narrar ambas para o mestre, e então jogar <em>cara ou coroa</em> para decidir qual será realizada. Quando acordar, o personagem entra automaticamente em estado de <strong>PAVOR</strong>.</p>`,
  duracao:"Até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Percepção",
  testeAlvo:"Agilidade"
},{
  id:"p12",
  nome:"Invadir a Mente",
  sub:"Invadere mentem",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/9a7ae1816f115fcb465a167d88d7ed5ab756bc1c_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Psicológico",
  descricao:`<p><strong>Você encara a alma do inimigo</strong> e tenta induzir um desejo ou vontade diretamente em sua mente, manipulando seus pensamentos de forma quase imperceptível.</p>`,
  positivo:`<p><strong>Controle Mental:</strong> Escolha uma ação negativa (ex: atacar um aliado, se ajoelhar, fugir etc.) para o inimigo. Ele deve realizar um teste contra seu personagem (<strong>1d20</strong>). Se falhar, será obrigado a tentar realizar a ação durante sua rodada. Mesmo induzido, o inimigo ainda pode falhar ao executar a ação. Caso a ação seja realizada com sucesso, ele ganha <strong>+5</strong> em testes pelo restante do turno.</p>`,
  negativo:`<p><strong>Resistência do Alvo:</strong> Se o inimigo resistir ao efeito, ele focará em você por <strong>1d6 rodadas</strong>, e ainda assim receberá <strong>+5</strong> em testes contra você durante esse período.</p>`,
  duracao:"Até o fim do combate ou cena",
  nivel:"4",
  alcance:"Visível",
  testeConjurador:"Preservação",
  testeAlvo:"Identificar Magia"
},{
  id:"p13",
  nome:"Pavor",
  sub:"Formido",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/a9541e446b1f6fb1bc2a078afad1d02825d0b37f_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Mental",
  descricao:`<p><strong>O personagem sente um medo profundo</strong>, chegando a temer até sua própria sombra. Esse estado pode ser autoinfligido ao reviver lembranças de traumas e medos antigos.</p>`,
  positivo:`<p><strong>Alerta Amedrontado:</strong> Recebe <strong>1D6</strong> de bônus em ações de <em>Iniciativa</em> e <em>Observação</em>. O valor rolado permanece ativo até o <em>fim do combate ou da cena</em>.</p>`,
  negativo:`<p><strong>Paralisia do Medo:</strong> Sempre que realizar uma rolagem, jogue <strong>dois dados</strong> e escolha o pior resultado.</p>`,
  duracao:"Até o fim do combate",
  nivel:"1",
  alcance:"Visível",
  testeConjurador:"Conexão",
  testeAlvo:"Conexão"
},{
  id:"p14",
  nome:"Raiva",
  sub:"Ira",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/a57bc0e5da3e86c981def526dfd826e3212340c3_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"–",
  descricao:`<p><strong>O personagem entra em um estado de fúria descontrolada</strong>, descarregando sua raiva nas pessoas ao redor. Sua expressão se torna ameaçadora, dominada pelo ódio.</p>`,
  positivo:`<p><strong>Fúria Agressiva:</strong> Recebe <strong>+1D8</strong> de dano físico extra em todos os ataques.</p>`,
  negativo:`<p><strong>Descontrole Letal:</strong> Durante o combate, todas as ações devem ser ofensivas e causar dano. Ao declarar sua jogada, o jogador deve fazer <em>cara ou coroa</em> com o aliado mais próximo. Se vencer, o ataque segue normalmente; se perder, deve redirecionar o ataque para o aliado.</p>`,
  duracao:"Até o fim do combate",
  nivel:"1",
  alcance:"Visível",
  testeConjurador:"Conexão",
  testeAlvo:"Conexão"
},{
  id:"p15",
  nome:"Ansiedade",
  sub:"Anxietatem",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/62bac6da3f0e757594c1698d75fa4a80ce246211_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Psicológico",
  descricao:`<p><strong>O personagem fica visivelmente inquieto</strong>, com o coração acelerado, fala rápida e movimentos impacientes. Essa condição também pode ser induzida em outras pessoas.</p>`,
  positivo:`<p><strong>Agilidade Nervosa:</strong> Adiciona <strong>+1D6</strong> em ações de <em>Agilidade</em>. O valor rolado é fixo e permanece até o fim do combate.</p>`,
  negativo:`<p><strong>Ansiedade Paralisante:</strong> Sofre <strong>1D6</strong> de dano psicológico sempre que for sua vez de agir, até o fim do combate.</p>`,
  duracao:"Até o fim do combate",
  nivel:"1",
  alcance:"Visível",
  testeConjurador:"Conexão ou Agilidade",
  testeAlvo:"Intuição"
},{
  id:"p16",
  nome:"Inveja",
  sub:"Invidia",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/429998cab768c561bc27d063b72afa6a64ffe749_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Mental",
  descricao:`<p><strong>O personagem assume uma postura analítica e crítica</strong>, observando com atenção cada decisão de aliados e inimigos, desejando o que não possui.</p>`,
  positivo:`<p><strong>Imitação Instantânea:</strong> Pode copiar um benefício ou magia que tenha sido conjurada anteriormente no combate, no exato momento da ativação desta passiva. O efeito copiado ocorre de forma imediata e <strong>não consome os recursos do efeito original</strong>.</p>`,
  negativo:`<p><strong>Obstáculo Mental:</strong> Em testes de <em>Conexão</em>, deve rolar dois dados e escolher o pior resultado. Dados bônus ou adicionais para testes de Conexão não funcionam enquanto a passiva estiver ativa.</p>`,
  duracao:"Positivo instantâneo; negativo até o fim do combate ou cena (efeitos não acumulam)",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Identificar Magia",
  testeAlvo:"Conexão"
},{
  id:"p17",
  nome:"Tristeza Oculta",
  sub:"Occulta tristitia",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/4c01b7cdecaa62343d2979ce5bde7994df12dc8f_high.png?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Mental",
  descricao:`<p><strong>Toda tristeza acumulada durante a jornada desperta de forma silenciosa</strong>, envolvendo o personagem em uma aura melancólica que transparece em seus olhos.</p>`,
  positivo:`<p><strong>Aura de Percepção:</strong> O personagem ganha uma aura mágica ao redor dos olhos, permitindo enxergar as dores e fraquezas internas dos inimigos. Seu acerto crítico passa a ocorrer com rolagens de <strong>18 ou mais</strong>.</p>`,
  negativo:`<p><strong>Desânimo Restritivo:</strong> Seu deslocamento é reduzido em <strong>5 metros</strong>. Em testes de <em>Conexão</em>, deve rolar dois dados e escolher o pior resultado, e dados bônus para Conexão não funcionam enquanto a passiva estiver ativa.</p>`,
  duracao:"Até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Intuição",
  testeAlvo:"Conexão"
},{
  id:"p18",
  nome:"Furtividade Sombria",
  sub:"Furtim tenebris",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/d12b94e12a3d36b6ba8953a49b2ff269fc52f6f2_high.webp?w=768&h=768",
  elemento:"Desconhecido",
  tipoDano:"Névoa",
  descricao:`<p><strong>O personagem mergulha nas sombras</strong>, desaparecendo diante dos olhos de todos como se fosse engolido pela escuridão.</p>`,
  positivo:`<p><strong>Desaparecimento Total:</strong> O personagem realiza um teste de <strong>1d10 + Teste de Furtividade</strong> contra a <em>DT Sobrenatural</em> (<strong>1d20 puro</strong>, rolado pelo mestre). Se for bem-sucedido, desaparece da percepção de todos os aliados e inimigos. Seu próximo ataque ou magia será crítico se acertar com rolagem de <strong>15 ou mais</strong>, e causará <strong>+1D6</strong> de dano de <em>Névoa</em>.</p>`,
  negativo:`<p><strong>Exposição Parcial:</strong> Inimigos que testemunharem o desaparecimento podem fazer um teste de <em>Percepção</em> como ação livre para tentar localizá-lo. Se forem bem-sucedidos e acertarem um ataque com rolagem de <strong>17 ou mais</strong>, causam crítico. Se nenhum inimigo estiver observando, esse efeito é anulado. Além disso, o personagem tem o movimento reduzido em <strong>3 metros</strong> enquanto a furtividade estiver ativa.</p>`,
  duracao:"2 turnos ou até o fim da cena",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Furtividade",
  testeAlvo:"Percepção"
},{
  id:"p19",
  nome:"Controle Adestrado",
  sub:"Docta Imperium",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/4c01b7cdecaa62343d2979ce5bde7994df12dc8f_high-2.png?w=768&h=768",
  elemento:"Caos",
  tipoDano:"Caos",
  descricao:`<p><strong>A ligação entre o personagem e seu animal</strong> é colocada à prova. O uso dessa habilidade consome metade da ação de movimento e a ação livre do personagem.</p>`,
  positivo:`<p><strong>Comando Instintivo:</strong> O mascote pode realizar uma ação livre conforme a vontade do dono, escolhendo entre <em>atacar</em>, <em>trazer um item</em>, <em>distrair um inimigo</em> ou <em>proteger o dono</em>. O sucesso depende de um teste definido pela dificuldade da cena e da ação escolhida. O dano do mascote varia conforme sua ficha e tamanho, mas ele não pode ser controlado como um personagem jogador.</p>`,
  negativo:`<p><strong>Risco Compartilhado:</strong> Enquanto o mascote estiver em ação, pode ser contra-atacado. O uso dessa passiva consome metade da ação de movimento e a ação livre do personagem no turno em que for ativada.</p>`,
  duracao:"Por turno",
  nivel:"1",
  alcance:"Visível",
  testeConjurador:"Adestrar Animais",
  testeAlvo:"Preservação"
},
{
  id:"p20",
  nome:"Selvageria",
  sub:"Feritas",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/e3837ba90e1a849ae408bc80875feadc5a23d1ee_high.webp?w=768&h=768",
  elemento:"Caos",
  tipoDano:"Caos",
  descricao:`<p><strong>O personagem age como um animal selvagem</strong>, guiado apenas pelo instinto de sobrevivência. Seus cabelos crescem e sua postura se torna feroz e primitiva.</p>`,
  positivo:`<p><strong>Instinto Primitivo:</strong> Adquire a capacidade de criar ferramentas rústicas e acampamentos improvisados. Fora de combate, pode buscar alimentos com um teste de <strong>1d20</strong>, dificuldade definida pela cena. Durante o combate, armas improvisadas causam <strong>+1D12</strong> de dano extra.</p>`,
  negativo:`<p><strong>Descontrole Instintivo:</strong> Em testes de <em>Preservação</em> e <em>Libertação</em>, deve rolar dois dados e considerar o pior resultado. Dados extras nesses testes não se aplicam.</p>`,
  duracao:"Até o fim da cena",
  nivel:"2",
  alcance:"Visível",
  testeConjurador:"Sobrevivência",
  testeAlvo:"Libertação"
},
{
  id:"p21",
  nome:"Afogar",
  sub:"Ad Paludem",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/af.png?w=768&h=768",
  elemento:"Caos",
  tipoDano:"Água, Sangue, Névoa ou Escuridão",
  descricao:`<p><strong>Um golpe elemental sombrio</strong> que sufoca a essência do inimigo, drenando-lhe o fôlego e a alma.</p>`,
  positivo:`<p><strong>Sufocamento Espiritual:</strong> O conjurador invoca forças sombrias que obstruem a respiração do alvo por uma rodada. O alvo rola <strong>1D12</strong> e sofre dano do elemento do conjurador.</p>`,
  negativo:`<p><strong>Reversão Elemental:</strong> Se o alvo possuir o mesmo elemento do conjurador, é curado com o valor total do dano causado.</p>`,
  duracao:"1 turno",
  nivel:"3",
  alcance:"Visível",
  testeConjurador:"Preservação",
  testeAlvo:"Determinação"
},
{
  id:"p22",
  nome:"Separar a Alma",
  sub:"Separate Animam",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-26.png?w=768&h=768",
  elemento:"Poder",
  tipoDano:"Plasma",
  descricao:`<p><strong>O personagem entra em projeção astral</strong>, separando sua alma do corpo e envolvendo-a por um dos quatro grandes elementos.</p>`,
  positivo:`<p><strong>Projeção Elemental:</strong> A alma atravessa paredes e objetos, não sofre dano físico, e magias lançadas nessa forma recebem <strong>+1D10</strong> de dano de Plasma e <strong>+1D8</strong> em testes de acerto. Se um inimigo morrer por uma dessas magias, ela pode ser replicada automaticamente uma vez.</p>`,
  negativo:`<p><strong>Corpo Vulnerável:</strong> O corpo físico permanece indefeso. Para retornar, o personagem deve passar em um teste de <em>Vontade</em> (<strong>1D20 + Libertação</strong> contra DT Sobrenatural). Se falhar, sofre <strong>3D12</strong> de dano do elemento da alma.</p>`,
  duracao:"Até o fim da cena",
  nivel:"5",
  alcance:"Visível",
  testeConjurador:"Libertação",
  testeAlvo:"Preservação"
},
{
  id:"p23",
  nome:"Teleporte Repentino",
  sub:"Subitus Ianuae",
  img:"https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/75d5a55a725a0a65add7d5dd90ddd9cf46de8cb3_high.webp?w=768&h=768",
  elemento:"Variável",
  tipoDano:"Variável",
  descricao:`<p><strong>O personagem se torna pura energia elemental</strong> por um breve instante, atravessando o espaço de forma instantânea.</p>`,
  positivo:`<p><strong>Movimento Instantâneo:</strong> Pode ser ativado como reação a um ataque, teleportando-se até <strong>6m</strong>. Se usado ofensivamente, causa <strong>1D6</strong> de dano elemental em respingo ao inimigo mais próximo.</p>`,
  negativo:`<p><strong>Eco Sobrenatural:</strong> Após o uso, deve realizar um teste de <em>Libertação</em> (<strong>1D20 + bônus</strong> contra DT Sobrenatural). Em caso de falha, sofre um efeito colateral aleatório: <em>Ansiedade, Raiva, Bêbado</em> ou <em>Pavor</em>.</p>`,
  duracao:"1 turno",
  nivel:"5",
  alcance:"6m",
  testeConjurador:"Acrobacia",
  testeAlvo:"Libertação"
},
   {
  id: "p24",
  nome: "Dilacera e Atacar",
  sub: "Lacrimis et Impetus",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-33.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Sangue",
  descricao: `<p>O personagem oferece parte de si ao Sobrenatural em troca de poder. Escolhendo um membro não vital, ele o amputa, criando um laço brutal com forças além da realidade.</p>`,
  positivo: `<p><strong>Amputação Voluntária:</strong> O personagem amputa um membro não vital e cria um membro fantasma ligado ao seu Elemento. Ele rola <strong>1D20 + 1D12</strong> de dano elemental conforme o Elemento: Fé → Sangue, Caos → Eletricidade, Poder → Laser, Desconhecido → Distorção. Pode reconjurar gastando o dobro do ESPECIAL.</p>`,
  negativo: `<p><strong>Custo Físico:</strong> Sofre dano imediato pela amputação (Pequeno: 1D10 | Médio: 1D12 | Grande: 1D20). Se não tratado, pode sofrer Hemorragia. O laço sobrenatural pode deixar marcas físicas ou mentais.</p>`,
  duracao: "Até o fim do combate",
  nivel: "6",
  alcance: "Visível",
  testeConjurador: "Determinação",
  testeAlvo: "Determinação"
},

{
  id: "p25",
  nome: "Amaldiçoar",
  sub: "Maledictio",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/ea7394e98972bdc11bdb5a455f49e108f17d2545_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Maldição",
  descricao: `<p>O personagem marca um alvo com inscrições vivas, selando um pacto silencioso entre fé e condenação.</p>`,
  positivo: `<p><strong>Maldição Temporal:</strong> Teste de <em>Conexão</em> contra <em>Intuição</em>. Se bem-sucedido, o alvo fica congelado no tempo por <strong>1D6 turnos</strong> e, ao fim, recebe o dano em dobro, convertido em <strong>dano de Maldição</strong>.</p>`,
  negativo: `<p><strong>Reversão Sombria:</strong> O conjurador deve manter contato visual e permanece vulnerável. Se o alvo morrer antes do retorno do dano, a maldição recai sobre o conjurador, causando <strong>17 de dano de Maldição por turno</strong> até o valor total ser atingido.</p>`,
  duracao: "Até o dano duplicado ser aplicado ou quebrado",
  nivel: "7",
  alcance: "Visível",
  testeConjurador: "Conexão",
  testeAlvo: "Intuição"
},

{
  id: "p26",
  nome: "Mutação",
  sub: "Mutatio",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-34.png?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Distorção",
  descricao: `<p>O personagem altera sua forma física conforme a própria vontade, moldando carne e ossos de modo antinatural.</p>`,
  positivo: `<p><strong>Metamorfose Física:</strong> Muda tamanho, forma ou órgãos. Cada alteração concede bônus: Braços (+4 acerto), Rosto (+5 Enganação), Cabeça/membro extra (+4 Intimidação), Órgão vital interno (imunidade a críticos), Pernas (+5 deslocamento). Recebe +5 em Determinação por alteração ativa.</p>`,
  negativo: `<p><strong>Colapso Corporal:</strong> Ao fim do combate, sofre <strong>20 de dano de Distorção</strong> por cada vez que foi atingido.</p>`,
  duracao: "Até o fim da cena (pode desfazer a qualquer momento)",
  nivel: "7",
  alcance: "Visível",
  testeConjurador: "Disfarces",
  testeAlvo: "DT 12"
},

{
  id: "p27",
  nome: "Metamorfose",
  sub: "Metamorphosis",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/ca5ae8448a3abb8916c3b1c6782a0046e2b33834_high.webp?w=768&h=768",
  elemento: "Caos",
  tipoDano: "Caos",
  descricao: `<p>O personagem assume a forma do animal de seu signo, revelando o espírito primordial que habita em si.</p>`,
  positivo: `<p><strong>Forma Zodiacal:</strong> Transforma-se no animal do signo:</p>

  <li>Áries – Onça</li>
  <li>Touro – Elefante</li>
  <li>Gêmeos – Lobo</li>
  <li>Libra – Sapo</li>
  <li>Câncer – Urso</li>
  <li>Leão – Leão</li>
   <li>Virgem – Raposa</li>
  <li>Escorpião – Cobra</li>
  <li>Sagitário – Macaco</li>
  <li>Capricórnio – Castor</li>
  <li>Aquário – Cavalo marinho</li>
  <li>Peixes – Coelho</li>

<p>Ganhando <strong>+10 em Determinação</strong>.</p>`,
  negativo: `<p><strong>Selvageria:</strong> Rola <strong>1D20</strong> contra o Sobrenatural. Em falha, entra em modo Selvagem. Após retornar, sofre <strong>20 de dano de Distorção</strong> por ataque recebido enquanto estava em fúria.</p>`,
  duracao: "Até o fim da cena",
  nivel: "7",
  alcance: "Visível",
  testeConjurador: "Adestrar Animais",
  testeAlvo: "DT 12"
}
,

{
  id: "p28",
  nome: "Amplificar",
  sub: "Amplificare",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-35.png?w=768&h=768",
  elemento: "Poder",
  tipoDano: "Escuridão",
  descricao: `<p>O alvo é envolto por uma energia que amplifica o peso da existência sobre ele, iniciando uma lenta petrificação arcana.</p>`,
  positivo: `<p><strong>Petrificação Progressiva:</strong> Teste de <em>Determinação</em> contra <em>Libertação</em>. Em falha, o alvo petrifica-se em 5 turnos; o conjurador pode controlar o corpo enquanto durar o efeito.</p>`,
  negativo: `<p><strong>Rebote Arcano:</strong> Se o alvo resistir, o conjurador sofre <strong>2D20 de dano de Escuridão</strong>.</p>`,
  duracao: "Até o fim da cena ou permanente",
  nivel: "7",
  alcance: "Visível",
  testeConjurador: "Libertação",
  testeAlvo: "Determinação"
},

{
  id: "p29",
  nome: "Salvaguarda",
  sub: "Tutela",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/6409e4251459cdc4a9c38934efa63c1e88df2d3a_high.png?w=768&h=768",
  elemento: "Fé",
  tipoDano: "—",
  descricao: `<p>Um gesto instintivo de preservação, canalizando o poder da vida para proteger e restaurar aliados.</p>`,
  positivo: `<p><strong>Reação de Cura:</strong> Até o fim do turno, ações de cura recebem +1D6 no teste de Cura e podem ser usadas como reação quando um aliado cair a 0 de vida. Se o teste exceder 20, cura +2D20 adicionais.</p>`,
  negativo: `<p><strong>Imobilização:</strong> O conjurador não pode mover-se mais de 3m neste turno e, se a cura falhar, o alvo sofre Desvantagem.</p>`,
  duracao: "Até o fim do turno",
  nivel: "2",
  alcance: "Visível",
  testeConjurador: "Cura",
  testeAlvo: "Determinação"
},

{
  id: "p30",
  nome: "Escudo Elemental",
  sub: "Scutum Elementorum",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/52eeb0c0ebd1ea9053bd8dbf570763cb02669f4c_high.png?w=768&h=768",
  elemento: "Variável",
  tipoDano: "Defesa Elemental",
  descricao: `<p>Uma armadura temporária se forma ao redor do conjurador, moldando-se ao elemento escolhido para resistir ao dano.</p>`,
  positivo: `<p><strong>Defesa Adaptável:</strong> Escolha um elemento (ex: Fogo, Gelo, Luz, etc.). O escudo concede +1D10 em testes contra ataques desse tipo e reduz 10 de dano recebido por 3 turnos.</p>`,
  negativo: `<p><strong>Ruptura Elemental:</strong> Se o escudo receber 20+ de dano do mesmo tipo, explode, causando <strong>1D8 de dano do elemento</strong> e tornando o usuário vulnerável (+1D6 de dano extra por 1 turno).</p>`,
  duracao: "3 turnos",
  nivel: "6",
  alcance: "Pessoal",
  testeConjurador: "Tática",
  testeAlvo: "—"
},

{
  id: "p31",
  nome: "Luz Desvanecente",
  sub: "Lucem",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/4a4f3bc1d64505465b6490070a9f4c002d744854_high.webp?w=768&h=768",
  elemento: "Fé",
  tipoDano: "Luz",
  descricao: `<p>O personagem emite uma luz branda que ofusca inimigos, revelando intenções ocultas ao custo de se tornar um alvo mais fácil.</p>`,
  positivo: `<p><strong>Clarão Revelador:</strong> Inimigos jogam dois dados em ataques e pegam o menor. O conjurador recebe +3 em Libertação para detectar mentiras e perigos.</p>`,
  negativo: `<p><strong>Exposição:</strong> Torna-se vulnerável a ataques à distância, sofrendo +1D10 de dano adicional até o fim do combate.</p>`,
  duracao: "2 turnos",
  nivel: "3",
  alcance: "9 metros",
  testeConjurador: "Libertação",
  testeAlvo: "Agilidade"
},{
  id: "p32",
  nome: "Dança da Purificação",
  sub: "Saltatio Purificationis",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/financial-concepts-mortgage-fcm.gif?w=150&h=150",
  elemento: "Fé ou Desconhecido",
  tipoDano: "Nenhum (Psicológico ao conjurador) – Sagrado ou Psicológico",
  descricao: `<p>O personagem executa uma dança graciosa, purificando o ambiente ao seu redor e dissipando influências malignas ou negativas.</p>`,
  positivo: `<p><strong>Aura Purificadora:</strong> Remove maldições, venenos e efeitos negativos de aliados em um raio de 6m. Cada aliado recupera <strong>1D10</strong> de vida ao fim de cada turno. Se aliados e inimigos também dançarem no turno deles, recebem <strong>+1D10</strong> extra de cura.</p>`,
  negativo: `<p><strong>Vulnerabilidade:</strong> O personagem não pode realizar outras ações além da dança. Se interrompido, sofre <strong>1D12</strong> de dano Psicológico devido à quebra abrupta da energia purificadora.</p>`,
  duracao: "Enquanto estiver dançando",
  nivel: "5",
  alcance: "6 metros",
  testeConjurador: "Atuação",
  testeAlvo: "Nenhum"
},

{
  id: "p33",
  nome: "Réplica Imperfeita",
  sub: "Imperfectum Effigies",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/294df31807b3b9d264891774f89f8b11b65fb5b6_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Névoa",
  descricao: `<p>O personagem conjura uma réplica imperfeita de um item, duplicando-o com metade das propriedades do original.</p>`,
  positivo: `<p><strong>Cópia Instável:</strong> Cria uma cópia de qualquer item em posse. A réplica possui metade do HP, dano e atributos do original, durando <strong>3 turnos</strong> antes de desaparecer.</p>`,
  negativo: `<p><strong>Falha Material:</strong> O conjurador deve fazer um teste de Preservação a cada turno; se falhar, a réplica se desfaz e ele sofre <strong>1D4</strong> de dano de Névoa pela quebra do vínculo.</p>`,
  duracao: "3 turnos",
  nivel: "6",
  alcance: "Toque",
  testeConjurador: "Ofício",
  testeAlvo: "Nenhum"
},

{
  id: "p34",
  nome: "Sombra da Distopia",
  sub: "Umbra Dystopia",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/image.psd-1.png?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Distorção",
  descricao: `<p>O personagem envolve a si mesmo e seus aliados em uma aura que distorce a realidade, enfraquecendo ataques inimigos e criando ilusões perturbadoras.</p>`,
  positivo: `<p><strong>Distorção da Realidade:</strong> Inimigos dentro da área recebem <strong>-4</strong> em ataques e testes. Aliados ganham <strong>+4</strong> em esquiva à distância. Inimigos na área sofrem <strong>1D10</strong> de dano de Distorção por turno.</p>`,
  negativo: `<p><strong>Instabilidade Mental:</strong> O conjurador deve testar Preservação a cada turno; falha causa <strong>1D12</strong> de dano de Distorção e <strong>-2</strong> temporário em ataques.</p>`,
  duracao: "3 turnos",
  nivel: "5",
  alcance: "15 metros",
  testeConjurador: "Intimidação",
  testeAlvo: "Vigilância"
},

{
  id: "p35",
  nome: "Fruto do Destino",
  sub: "Fructus Fatum",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/c2b4fruto.png?w=768&h=768",
  elemento: "Variável",
  tipoDano: "Variável (Eletricidade, Fogo, Gelo, Água, Ácido, Luz, Escuridão, Plasma, Névoa)",
  descricao: `<p>O usuário consome um Fruto do Destino, transformando-se temporariamente em um dos elementos escolhidos e obtendo poderes únicos.</p>`,
  positivo: `<p><strong>Transmutação Elemental:</strong> Escolha um elemento. O personagem torna-se imune a ele, causa <strong>+1D10</strong> de dano adicional e ganha <strong>+2</strong> em Determinação e Agilidade.</p>`,
  negativo: `<p><strong>Exaustão Elemental:</strong> Após o término, perde <strong>1D10</strong> de vida e torna-se vulnerável ao mesmo elemento até o fim do combate.</p>`,
  duracao: "3 turnos",
  nivel: "4",
  alcance: "Próprio",
  testeConjurador: "Culinária",
  testeAlvo: "Variável (dependendo do elemento)"
},

{
  id: "p36",
  nome: "Sabedoria Natural",
  sub: "Sapientia Naturae",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/sannin.png?w=768&h=768",
  elemento: "Caos",
  tipoDano: "Caos",
  descricao: `<p>O personagem entra em harmonia com a natureza, canalizando energia vital que amplia seus sentidos e poder espiritual, semelhante ao Modo Sábio.</p>`,
  positivo: `<p><strong>Modo Sábio:</strong> Recebe <strong>2D12</strong> de vida temporária + bônus de Libertação, <strong>+4</strong> em testes de Libertação e Percepção, e resistência a dano de Caos.</p>`,
  negativo: `<p><strong>Fragilidade Mental:</strong> Torna-se vulnerável a ataques psíquicos, recebendo <strong>+1D8</strong> de dano adicional de efeitos mentais.</p>`,
  duracao: "4 turnos",
  nivel: "4",
  alcance: "Próprio",
  testeConjurador: "Libertação",
  testeAlvo: "Preservação"
},

{
  id: "p37",
  nome: "Aura Manifestada",
  sub: "Manifestare Auram",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/a6904d0cb5087872e67be0f0ae1ca51e8bd0d445_high.webp?w=768&h=768",
  elemento: "Desconhecido",
  tipoDano: "Aura ou Variável",
  descricao: `<p>O personagem desperta e molda o fluxo de sua aura interior, manifestando-a em diferentes formas que representam seu domínio espiritual.</p>`,
  positivo: `<p><strong>Fluxos da Aura:</strong> Escolha entre:</p>
  
    <li><strong>Fortalecimento:</strong> +4 dano físico e resistência (1D8).</li>
    <li><strong>Emissão:</strong> +3 ataque à distância e <strong>+1D12</strong> de dano.</li>
    <li><strong>Transformação:</strong> Converte dano em outro tipo com <strong>+3</strong> por ataque.</li>
    <li><strong>Manipulação:</strong> Controla objetos ou pessoas (Teste de Conexão).</li>
    <li><strong>Materialização:</strong> Cria arma ou escudo (1D10 dano ou resistência).</li>
    <li><strong>Especialização:</strong> Aumenta um atributo à escolha em +5 temporariamente.</li>
  `,
  negativo: `<p><strong>Desgaste Vital:</strong> O personagem perde <strong>1D8</strong> de vida ao final de cada turno enquanto mantiver a aura ativa.</p>`,
  duracao: "5 turnos",
  nivel: "6",
  alcance: "Toque",
  testeConjurador: "Conexão ou Preservação",
  testeAlvo: "Conexão"
},

{
  id: "p38",
  nome: "Fluxo da Vida",
  sub: "Vitalum et Specter",
  img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/08/stand.png?w=768&h=768",
  elemento: "Desconhecido (Vitalum) / Poder (Specter)",
  tipoDano: "Distorção (Vitalum) / Alma (Specter)",
  descricao: `<p>O personagem manipula sua energia vital, escolhendo entre distorcer o ambiente (Vitalum) ou invocar um espírito guardião (Specter) para auxiliá-lo.</p>`,
  positivo: `<p><strong>Vitalum:</strong> Cria aura distorcida que causa <strong>1D12 + 4</strong> de dano de Distorção e concede <strong>+4</strong> em Libertação por <strong>8 turnos</strong> ou <strong>1 cena</strong>.<br>
  <strong>Specter:</strong> Invoca Espírito Guardião que causa <strong>1D10 + 6</strong> de dano de Alma. Dano sofrido pelo espírito é transferido pela metade ao usuário. Concede <strong>+3</strong> em Conexão.</p>`,
  negativo: `<p><strong>Repercussão Vital:</strong> Ao término, sofre <strong>1D12</strong> de dano de Distorção (Vitalum) ou <strong>1D12</strong> de dano Psicológico (Specter).</p>`,
  duracao: "8 turnos ou 1 cena",
  nivel: "6",
  alcance: "Corpo a corpo (Vitalum) / 10 metros (Specter)",
  testeConjurador: "Libertação (Vitalum) / Conexão (Specter)",
  testeAlvo: "Determinação (Vitalum) / Agilidade (Specter)"
}





















  ]
};
/* ===========================
   LÓGICA DO UI  (corrigida) + CORES DINÂMICAS
   =========================== */
(() => {
  // Namespace storage
  const STORAGE_NS = "tdc:grimorio";
  const LS_KEY = `${STORAGE_NS}:${location.host}${location.pathname}:ids`;

  // MIGRATE old key if present
  try {
    const legacy = localStorage.getItem("tc_grimorio_ids");
    if (legacy && !localStorage.getItem(LS_KEY)) {
      localStorage.setItem(LS_KEY, legacy);
    }
  } catch (e) { /* ignore */ }

  // Initial state
  const state = {
    tab: "magias",
    page: 1,
    perPage: 40,
    elemento: "",
    dano: "",
    nivel: '',
    busca: ""
  };

  const resistenciaColors = {
  elemento: {
    "Fé": {
      background: "linear-gradient(135deg, #D8902D, #DC143C)",
      color: "white"
    },
    "Poder": {
      background: "linear-gradient(135deg, #201d36, #8A2BE2)",
      color: "white"
    },
    "Desconhecido": {
      background: "linear-gradient(135deg, purple, #8A2BE2)",
      color: "white"
    },
    "Caos": {
      background: "linear-gradient(135deg, orange, green)",
      color: "black"
    }
  },

  tipoDano: {
    // ❄️ Elementos e energias
    "Gelo": { background: "#b7e1cd", color: "black" },
    "Ácido": { background: "#38761d", color: "white" },
    "Fogo": { background: "#ff9900", color: "white" },
    "Água": { background: "#46bdc6", color: "black" },
    "Eletricidade": { background: "#ffff00", color: "black" },
    "Tempestade": { background: "#a4f4cf", color: "black" },
    "Sangue": { background: "#980000", color: "white" },
    "Luz": { background: "#ffe599", color: "black" },
    "Maldição": { background: "#4c1130", color: "white" },
    "Sagrado": { background: "#D8902D", color: "white" },
    "Laser": { background: "#3cff92", color: "white" },
    "Alma": { background: "#d5a6bd", color: "white" },
    "Escuridão": { background: "black", color: "white" },
    "Plasma": { background: "#c3dfb3", color: "#005e31" },
    "Tremor": { background: "#311e5b", color: "#8eb8ff" },
    "Aura": { background: "#b4a7d6", color: "black" },
    "Psicológico": { background: "#c164f5", color: "black" },
    "Mental": { background: "#281922", color: "white" },
    "Distorção": { background: "#c27ba0", color: "white" },
    "Névoa": { background: "#9fc5e8", color: "white" },
    "Sono": { background: "#d9d2e9", color: "#666666" },

    // ⚔️ Danos físicos
    "Balístico": { background: "#434343", color: "black" },
    "Perfurante": { background: "#d9d9d9", color: "black" },
    "Cortante": { background: "#191818", color: "white" },
    "Esmagante": { background: "#edfff6", color: "black" },

    // ☠️ Especiais
    "Cinzas": { background: "#B0BEC5", color: "#455A64" },
    "Morte": { background: "#424242", color: "#D32F2F" },
    "Eclipse": { background: "#212121", color: "#FFA000" },
    "N/A": { background: "#f0f0f0", color: "#333333" }
  }
};


  // Small color helpers
  function hexToRgb(hex){
    const h = hex.replace('#','');
    const full = h.length === 3 ? h.split('').map(ch => ch+ch).join('') : h;
    const bigint = parseInt(full, 16);
    return { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
  }
  function rgbToHex(r,g,b){
    return '#' + [r,g,b].map(x => {
      const s = Math.round(x).toString(16);
      return s.length === 1 ? '0' + s : s;
    }).join('');
  }
  function mixAlpha(hex, alpha){
    const rgb = hexToRgb(hex);
    const r = Math.round(rgb.r * (1-alpha) + 255 * alpha);
    const g = Math.round(rgb.g * (1-alpha) + 255 * alpha);
    const b = Math.round(rgb.b * (1-alpha) + 255 * alpha);
    return rgbToHex(r,g,b);
  }
  function adjustColor(hex, amount){
    const rgb = hexToRgb(hex);
    const r = Math.min(255, Math.max(0, rgb.r + amount));
    const g = Math.min(255, Math.max(0, rgb.g + amount));
    const b = Math.min(255, Math.max(0, rgb.b + amount));
    return rgbToHex(r,g,b);
  }

  function getColorsFor(it){
    const tipo = it?.tipoDano || "";
    const elem = it?.elemento || "";
    const byDano = resistenciaColors.tipoDano[tipo];
    const byElem = resistenciaColors.elemento[elem];
    const fallback = { background: "#2f2f2f", color: "#fff" };
    return byDano || byElem || fallback;
  }

  // LocalStorage helpers
  const getLearned = () => {
    try { return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); }
    catch { return []; }
  };
  const setLearned = (arr) => {
    try { localStorage.setItem(LS_KEY, JSON.stringify(arr)); }
    catch(e){ console.warn("tc: erro ao salvar localStorage", e); }
  };
  const isLearned = (id) => getLearned().includes(id);

  // Toggle learned
  const toggleLearn = (id) => {
    const cur = new Set(getLearned());
    if (cur.has(id)) cur.delete(id); else cur.add(id);
    setLearned([...cur]);
    render();           // atualiza grid / paginação
    // atualiza detalhe se aberto
    const detailBox = document.getElementById("tcDetailBox");
    if (detailBox && detailBox.dataset?.currentId === id) {
      // re-render detail to update button
      showDetail(id);
    }
  };

  // Open / Close
  function open(){
    const overlay = document.getElementById("tcOverlay");
    if (!overlay) return;
    overlay.style.display = "flex";
    overlay.setAttribute("aria-hidden","false");
    mountFilters();
    render();
  }
  function close(){
    const overlay = document.getElementById("tcOverlay");
    if (!overlay) return;
    overlay.style.display = "none";
    overlay.setAttribute("aria-hidden","true");
    hideDetail();
  }

  // Mount dynamic filter options (safe: checks existence of DATASET)
  function mountFilters(){
    const elSel = document.getElementById("tcFiltroElemento");
    const dnSel = document.getElementById("tcFiltroDano");
    if (!elSel || !dnSel) return;

    const magias = (window.DATASET && Array.isArray(window.DATASET.magias)) ? window.DATASET.magias : [];
    const passivas = (window.DATASET && Array.isArray(window.DATASET.passivas)) ? window.DATASET.passivas : [];
    const all = [...magias, ...passivas];

    const elementos = Array.from(new Set(all.map(x=>x.elemento).filter(Boolean))).sort();
    const danos = Array.from(new Set(all.map(x=>x.tipoDano).filter(Boolean))).sort();

    // build options safely
    elSel.innerHTML = '';
    const opt0 = document.createElement('option'); opt0.value=''; opt0.textContent = 'Elemento';
    elSel.appendChild(opt0);
    elementos.forEach(v => {
      const o = document.createElement('option'); o.value = v; o.textContent = v; elSel.appendChild(o);
    });

    dnSel.innerHTML = '';
    const opt1 = document.createElement('option'); opt1.value=''; opt1.textContent = 'Tipo de dano';
    dnSel.appendChild(opt1);
    danos.forEach(v => {
      const o = document.createElement('option'); o.value = v; o.textContent = v; dnSel.appendChild(o);
    });

    // apply current state values
    elSel.value = state.elemento || "";
    dnSel.value = state.dano || "";
  }

  // Datasource by tab
  function currentList(){
    const magias = (window.DATASET && Array.isArray(window.DATASET.magias)) ? window.DATASET.magias : [];
    const passivas = (window.DATASET && Array.isArray(window.DATASET.passivas)) ? window.DATASET.passivas : [];

    if (state.tab === "magias") return magias;
    if (state.tab === "passivas") return passivas;
    // aprendidas
    const learned = new Set(getLearned());
    return [...magias, ...passivas].filter(x=>learned.has(x.id));
  }

// Filters
function applyFilters(list) {
  const q = String(state.busca || "").toLowerCase().trim();
  return list.filter(it => {
    if (state.elemento && it.elemento !== state.elemento) return false;
    if (state.dano && it.tipoDano !== state.dano) return false;
    if (state.nivel && String(it.nivel) !== String(state.nivel)) return false; // 🔹 novo filtro de nível
    if (q && !(String(it.nome || "").toLowerCase().includes(q))) return false;
    return true;
  });
}


  // Render grid & pagination (creates nodes safely)
  function render(){
    const grid = document.getElementById("tcGrid");
    const pag  = document.getElementById("tcPaginacao");
    if (!grid || !pag) return;

    const base = currentList();
    const list = applyFilters(base);
    const totalPages = Math.max(1, Math.ceil(list.length / state.perPage));
    if (state.page > totalPages) state.page = 1;

    const start = (state.page - 1) * state.perPage;
    const slice = list.slice(start, start + state.perPage);

    // clear grid
    grid.innerHTML = '';

    if (slice.length === 0) {
      const empty = document.createElement('div');
      empty.style.padding = '18px';
      empty.style.color = '#dfe7ff';
      empty.textContent = list.length === 0 ? 'Nenhum item encontrado.' : 'Nenhuma página disponível.';
      grid.appendChild(empty);
    } else {
      // create cards
      slice.forEach(it => {
        const card = document.createElement('article');
        card.className = 'tc-card';
        card.tabIndex = 0;
        card.dataset.itemId = it.id;

        const img = document.createElement('img');
        img.className = 'tc-img';
        img.alt = it.nome || '';
        img.src = it.img || '';
        card.appendChild(img);

        const name = document.createElement('div');
        name.className = 'tc-name';
        name.textContent = it.nome || '(sem nome)';
        card.appendChild(name);

const meta = document.createElement('div');
meta.className = 'tc-meta';

// cria o span do nível
const nivelSpan = document.createElement('span');
nivelSpan.className = 'tc-nivel';
nivelSpan.textContent = it.nivel ? `Nível ${it.nivel}` : '';
nivelSpan.style.marginRight = '8px';
nivelSpan.style.fontWeight = 'bold';
nivelSpan.style.opacity = '0.9';

// cria o span do tipo de dano + elemento
const infoSpan = document.createElement('span');
infoSpan.textContent = `${it.tipoDano || '-'} • ${it.elemento || '-'}`;

// adiciona ambos dentro do meta
meta.appendChild(nivelSpan);
meta.appendChild(infoSpan);

card.appendChild(meta);


        // apply dynamic colors
        applyStyleToCard(card, it);

        grid.appendChild(card);
      });
    }

    // pagination
    pag.innerHTML = '';
    for (let i = 1; i <= totalPages; i++) {
      const b = document.createElement('button');
      b.className = 'tc-page' + (i === state.page ? ' active' : '');
      b.textContent = String(i);
      b.addEventListener('click', () => { state.page = i; render(); });
      pag.appendChild(b);
    }

    // tabs active state
    document.querySelectorAll("#tcOverlay .tc-tab").forEach(b => b.classList.remove("active"));
    const activeTabBtn = document.querySelector(`#tcOverlay .tc-tab[data-tab="${state.tab}"]`);
    if (activeTabBtn) activeTabBtn.classList.add("active");
  }

  // Styling function for cards (applies inline styles carefully)
  function applyStyleToCard(cardEl, it) {
  if (!cardEl || !it) return;
  const c = getColorsFor(it);
  const elemColor = resistenciaColors.elemento[it.elemento];
  const danoColor = resistenciaColors.tipoDano[it.tipoDano];
  
  // o card usa o tipo de dano como base
  cardEl.style.background = danoColor ? danoColor.background : c.background;
  cardEl.style.color = danoColor ? danoColor.color : c.color;
  cardEl.style.border = `1px solid ${adjustColor(cardEl.style.background, -12)}`;
  cardEl.style.boxShadow = `0 2px 6px rgba(0,0,0,0.14)`;

  const meta = cardEl.querySelector('.tc-meta');
  if (meta) {
    // se o elemento for um dos 4 especiais, usa o degradê dele
    if (elemColor && ['Fé', 'Poder', 'Desconhecido', 'Caos'].includes(it.elemento)) {
      meta.style.background = elemColor.background;
      meta.style.color = elemColor.color;
    } else {
      // senão, usa o tipo de dano, só que com leve transparência
      meta.style.background = mixAlpha(c.background, 0.15);
      meta.style.color = c.color;
    }

    meta.style.padding = '6px 8px';
    meta.style.borderRadius = '6px';
    meta.style.display = 'inline-block';
    meta.style.marginTop = '6px';
  }
}


  // DETAIL
  function showDetailById(id){
    const magias = (window.DATASET && Array.isArray(window.DATASET.magias)) ? window.DATASET.magias : [];
    const passivas = (window.DATASET && Array.isArray(window.DATASET.passivas)) ? window.DATASET.passivas : [];
    const it = [...magias, ...passivas].find(x => x.id === id);
    if (it) showDetail(id);
  }

  function showDetail(id){
    const magias = (window.DATASET && Array.isArray(window.DATASET.magias)) ? window.DATASET.magias : [];
    const passivas = (window.DATASET && Array.isArray(window.DATASET.passivas)) ? window.DATASET.passivas : [];
    const it = [...magias, ...passivas].find(x => x.id === id);
    if (!it) return;

    const isPassiva = passivas.some(p => p.id === id);
    const box = document.getElementById("tcDetailBox");
    if (!box) return;

    // header/top
    box.dataset.currentId = id; // marca qual item está sendo mostrado

    // clear
    box.innerHTML = '';

    // head
    const head = document.createElement('div');
    head.className = 'tc-box-head';

    const img = document.createElement('img');
    img.className = 'tc-detail-img';
    img.alt = it.nome || '';
    img.src = it.img || '';
    head.appendChild(img);

    const title = document.createElement('div');
    title.className = 'tc-title';
    title.textContent = it.nome || '';
    head.appendChild(title);

    if (it.sub) {
      const sub = document.createElement('div');
      sub.className = 'tc-sub';
      sub.textContent = it.sub;
      head.appendChild(sub);
    }

    box.appendChild(head);

    // main content
    const section = document.createElement('div');
    section.className = 'tc-section';

    const h2 = document.createElement('div');
    h2.className = 'tc-h2';
    h2.textContent = isPassiva ? "Descrição" : "O que acontece quando usa?";
    section.appendChild(h2);

    const desc = document.createElement('div');
    desc.className = 'tc-desc';
    desc.innerHTML = String(it.descricao || "-"); // descrição do autor; se houver HTML, permanece
    section.appendChild(desc);

    // table
    const table = document.createElement('table');
    table.className = 'tc-table';

    table.innerHTML = `
      <thead>
        <tr>
          <th>Duração</th>
          <th>${isPassiva ? "Nível" : (it.tagLevel || "Nível")}</th>
          <th>Alcance</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>${it.duracao || "-"}</td>
          <td>${isPassiva ? (it.nivel || "-") : (it.tagLevelResposta || it.nivel || "-")}</td>
          <td>${it.alcance || "-"}</td>
        </tr>
      </tbody>
    `;
    section.appendChild(table);

if (isPassiva) {
  const pos = document.createElement('div');
  pos.className = 'tc-good';
  pos.textContent = 'Positivo';
  section.appendChild(pos);

  const posDesc = document.createElement('div');
  posDesc.className = 'tc-desc';
  // agora renderiza HTML, permitindo <strong>, <i>, <ul> etc.
  posDesc.innerHTML = it.positivo || '-';
  section.appendChild(posDesc);

  const neg = document.createElement('div');
  neg.className = 'tc-bad';
  neg.textContent = 'Negativo';
  section.appendChild(neg);

  const negDesc = document.createElement('div');
  negDesc.className = 'tc-desc';
  negDesc.innerHTML = it.negativo || '-';
  section.appendChild(negDesc);
}


    // info block
    const infoH2 = document.createElement('div');
    infoH2.className = 'tc-h2';
    infoH2.textContent = 'Informações';
    section.appendChild(infoH2);

    const infoList = [
      ['Tipo de dano:', it.tipoDano || '-'],
      ['Elemento:', it.elemento || '-'],
      ['Teste do conjurador:', it.testeConjurador || '-'],
      ['Teste do Alvo:', it.testeAlvo || '-']
    ];
    infoList.forEach(([label, val]) => {
      const d = document.createElement('div');
      d.className = 'tc-desc';
      d.innerHTML = `<b>${label}</b> ${val}`;
      section.appendChild(d);
    });

    box.appendChild(section);

    // actions
    const actions = document.createElement('div');
    actions.className = 'tc-actions';

    const learned = isLearned(id);
    const btnLearn = document.createElement('button');
    btnLearn.className = 'tc-btn primary';
    btnLearn.textContent = learned ? "Remover do Grimório" : "Aprender";
    btnLearn.addEventListener('click', () => {
      toggleLearn(id);
    });
    actions.appendChild(btnLearn);

    const btnClose = document.createElement('button');
    btnClose.className = 'tc-btn ghost';
    btnClose.textContent = 'Fechar';
    btnClose.addEventListener('click', hideDetail);
    actions.appendChild(btnClose);

    box.appendChild(actions);

    // ===============================
// APLICAÇÃO CORRETA DE CORES E LAYOUT
// ===============================
const colors = getColorsFor(it);

// layout vertical
head.style.display = 'flex';
head.style.flexDirection = 'column';
head.style.alignItems = 'center';
head.style.gap = '6px';
head.style.padding = '12px';
head.style.borderRadius = '8px';
head.style.background = 'rgba(255, 255, 255, 0.04)'; // leve fundo neutro

// título colorido
title.style.background = colors.background;
title.style.color = colors.color;
title.style.padding = '6px 10px';
title.style.borderRadius = '6px';
title.style.fontWeight = 'bold';
title.style.textAlign = 'center';
title.style.width = 'fit-content';
title.style.maxWidth = '100%';

// subtítulo harmonizado (mesmo tom de texto, sem fundo)
const subEl = head.querySelector('.tc-sub');
if (subEl) {
  subEl.style.color = colors.color;
  subEl.style.opacity = '0.85';
}


    // show detail overlay
    const detail = document.getElementById("tcDetail");
    if (detail) {
      detail.style.display = 'flex';
      detail.setAttribute('aria-hidden','false');
    }

    setHash(id);
  }

  function hideDetail(){
    const detail = document.getElementById("tcDetail");
    if (detail) {
      detail.style.display = 'none';
      detail.setAttribute('aria-hidden','true');
    }
    // remove hash only if it starts with tc=
    clearHash();
  }

  // -----------------------
  //  URL / hash helpers
  // -----------------------
  function normalizeId(str){
    if(!str) return "";
    return String(str)
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "")
      .trim()
      .toLowerCase();
  }

  function idFromURL(){
    const h = window.location.hash.replace(/^#/, "");
    const qs = new URLSearchParams(window.location.search);

    let id = null;
    if (h) {
      id = h.startsWith("tc=") ? decodeURIComponent(h.slice(3)) : decodeURIComponent(h);
    }
    id = id || qs.get("tc") || qs.get("id") || qs.get("magia") || qs.get("passiva");
    return id || null;
  }

  function setHash(id){
    try {
      const url = new URL(location.href);
      url.hash = `tc=${encodeURIComponent(id)}`;
      history.replaceState(null, "", url.href);
    } catch(e) {
      // fallback
      location.hash = `tc=${encodeURIComponent(id)}`;
    }
  }

  function clearHash(){
    if (location.hash && location.hash.startsWith("#tc=")) {
      history.replaceState(null, "", location.pathname + location.search);
    }
  }

  function openById(id){
    if(!id) return;
    const magias = (window.DATASET && Array.isArray(window.DATASET.magias)) ? window.DATASET.magias : [];
    const passivas = (window.DATASET && Array.isArray(window.DATASET.passivas)) ? window.DATASET.passivas : [];
    const allItems = [...magias, ...passivas];
    const norm = normalizeId(id);

    const candidates = [
      norm,
      norm.replace(/\s+/g, "_"),
      norm.replace(/\s+/g, ""),
      norm.replace(/_/g, "")
    ];

    const item = allItems.find(x =>
      candidates.some(c => normalizeId(x.id) === c || normalizeId(x.nome) === c)
    );

    if(!item){
      console.warn("TC: item não encontrado para id:", id);
      return;
    }

    // define aba correta
    if (magias.some(m => m.id === item.id)) state.tab = "magias";
    else if (passivas.some(p => p.id === item.id)) state.tab = "passivas";
    else state.tab = "aprendidas";

    open();
    showDetail(item.id);

    // update UI tab state
    document.querySelectorAll("#tcOverlay .tc-tab").forEach(b => b.classList.remove("active"));
    document.querySelector(`#tcOverlay .tc-tab[data-tab="${state.tab}"]`)?.classList.add("active");
  }

  function syncFromURL(){
    const id = idFromURL();
    if (id) openById(id);
  }

  // -----------------------
  //  EVENT LISTENERS INIT
  // -----------------------
  function initListeners() {
    // open/close controls
    const openBtn = document.getElementById("openTcButton");
    if (openBtn) openBtn.addEventListener('click', open);

    const closeBtn = document.getElementById("tcCloseBtn");
    if (closeBtn) closeBtn.addEventListener('click', close);

    // tabs (delegation already used on document click below, but we'll support click here too)
    document.querySelectorAll("#tcOverlay .tc-tab").forEach(btn => {
      btn.addEventListener('click', () => {
        const tab = btn.dataset.tab;
        if (!tab) return;
        state.tab = tab;
        state.page = 1;
        render();
      });
    });

    // filters (safe: check element exists)
    const elSel = document.getElementById("tcFiltroElemento");
    const dnSel = document.getElementById("tcFiltroDano");
    const busca = document.getElementById("tcBusca");
    const nvSel = document.getElementById("tcFiltroNivel");


    if (elSel) elSel.addEventListener('change', e => { state.elemento = e.target.value; state.page = 1; render(); });
    if (dnSel) dnSel.addEventListener('change', e => { state.dano = e.target.value; state.page = 1; render(); });
    if (busca) busca.addEventListener('input', e => { state.busca = e.target.value; state.page = 1; render(); });
    if (nvSel) nvSel.addEventListener('change', e => { state.nivel = e.target.value; state.page = 1; render(); });

    

    // click on cards (delegation)
    const grid = document.getElementById("tcGrid");
    if (grid) {
      grid.addEventListener('click', (e) => {
        const card = e.target.closest('.tc-card');
        if (!card) return;
        const id = card.dataset.itemId;
        if (id) showDetail(id);
      });
      // keyboard accessibility (enter on focused card)
      grid.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          const card = e.target.closest('.tc-card');
          if (!card) return;
          const id = card.dataset.itemId;
          if (id) showDetail(id);
        }
      });
    }

    // clicks on links (body) to intercept #tc= or ?tc=
    document.body.addEventListener('click', e => {
      const a = e.target.closest('a[href]');
      if (!a) return;
      try {
        const url = new URL(a.href, location.href);
        let tc = null;

        if (url.hash) {
          if (url.hash.startsWith("#tc=")) tc = url.hash.slice(4);
          else tc = url.hash.replace(/^#/, "");
        }
        tc = tc || url.searchParams.get("tc") || url.searchParams.get("id") || url.searchParams.get("magia") || url.searchParams.get("passiva");
        if (tc) {
          e.preventDefault();
          tc = decodeURIComponent(tc);
          setHash(tc);
          openById(tc);
        }
      } catch (err) {
        console.error("TC: erro ao processar link:", err);
      }
    });

    // close detail when clicking outside box
    const detailOverlay = document.getElementById("tcDetail");
    if (detailOverlay) {
      detailOverlay.addEventListener('click', (e) => {
        if (e.target === detailOverlay) hideDetail();
      });
    }

    // hash change (back/forward)
    window.addEventListener("hashchange", syncFromURL);
  }

  // Inicialização no DOMContentLoaded
  window.addEventListener("DOMContentLoaded", () => {
    // Ensure DATASET shape is present to avoid errors
    if (!window.DATASET) {
      window.DATASET = { magias: [], passivas: [] };
    } else {
      window.DATASET.magias = Array.isArray(window.DATASET.magias) ? window.DATASET.magias : [];
      window.DATASET.passivas = Array.isArray(window.DATASET.passivas) ? window.DATASET.passivas : [];
    }

    initListeners();
    syncFromURL();
    // Pre-mount filters so selects are populated on first open
    mountFilters();
  });

  // PUBLIC API
  window.TC = {
    open,
    close,
    showDetail: showDetailById,
    hideDetail,
    toggleLearn,
    openById
  };

})();


</script>

<!-- LINKS / BOTÕES PARA TESTE -->
<!-- <button data-criatura="Musplum" class="bestiario-btn">Abrir Bestiário</button> -->
<!-- <button data-criatura="Raposa Selvagem" class="bestiario-btn">Abrir Raposa Selvagem</button> -->
<!-- <a href="#" data-criatura="Andaluz" class="bestiario-btn">Abrir Andaluz</a> -->


<!-- POPUP DO BESTIÁRIO -->
<div id="popup-bestiario" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center;">
  <div style="position:relative;width:90%;max-width:1200px;height:80%;background:#111;border-radius:12px;overflow:hidden;">
    <iframe id="iframe-bestiario"
      src=""
      width="100%"
      height="100%"
      style="border:none;">
    </iframe>
    <button onclick="closeBestiario()" style="position:absolute;top:10px;right:10px;background:red;color:white;border:none;padding:10px 15px;border-radius:6px;cursor:pointer;">X</button>
  </div>
</div>

<script>
  // Função para abrir o popup
  function openBestiario(nome) {
    const url = "https://bestiario-terrasdecalisto.netlify.app/?criatura=" + encodeURIComponent(nome);
    document.getElementById("iframe-bestiario").src = url;
    document.getElementById("popup-bestiario").style.display = "flex";
  }

  // Função para fechar o popup
  function closeBestiario() {
    document.getElementById("popup-bestiario").style.display = "none";
    document.getElementById("iframe-bestiario").src = ""; // limpa para não pesar
  }

  // Ativa automaticamente todos os elementos com a classe .bestiario-btn
  document.querySelectorAll(".bestiario-btn").forEach(el => {
    el.addEventListener("click", e => {
      e.preventDefault();
      const nome = el.dataset.criatura;
      if (nome) {
        openBestiario(nome);
      }
    });
  });
</script>

          
<button id="openItemPopup" class="mochila-btn"></button>


<style>
  .mochila-btn {
    background-image: url('imagens/BotaoMochila.png'); /* nome da sua imagem PNG */
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    width: 200px;   /* ajuste conforme o tamanho real da imagem */
    height: 70px;

    border: none;
    padding: 0;
    margin: 0;
    cursor: pointer;
    background-color: transparent;
  }

  .mochila-btn:hover {
    filter: brightness(1.1);
    transform: scale(1.02);
  }

  .mochila-btn:active {
    filter: brightness(0.9);
    transform: scale(0.98);
  }
</style>
<!-- Visual do item equipado -->
<!-- Visual do item equipado -->
<div id="equippedItemDisplay">
  <div id="equippedItemSlot"></div>
</div>
<!-- Botão para abrir o popup -->
<button id="openPopup">Abrir Rolagem de Dano</button>

<!-- Popup -->
<div id="dicePopup" class="popup">
  <div class="popup-content">
    <span class="close">&times;</span>
    <h2>Rolagem de Dano</h2>

    <div id="infoContainer">

    </div>

    <label>Digite sua fórmula de dano:</label>
    <input type="text" id="diceInput" placeholder="ex: 2d8+1d6+4d12">
<button type="button" onclick="rollDice()">Rolar Dados</button>
<div id="modoRegraContainer">
  <button id="ativarRegraBtn">🎲 Melhores/Piores</button>
  <button id="usarModificadorBtn">➕ Modificador</button>
</div>
    <div id="diceResultArea">
      <div id="diceGifContainer">
<img id="diceGif" src="" alt="Rolando..." style="display: none;" />
        <div id="diceOverlay"></div>
      </div>
      <div id="detailedResults"></div>
    </div>
  </div>
</div>
  
          <div class="form-row">
            <div class="form-group2">
              <label for="for">Brutalidade:</label>
              <input type="number" id="for" name="for" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="for-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="for-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="des">Agilidade:</label>
              <input type="number" id="des" name="des" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="des-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="des-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="con">Determinação:</label>
              <input type="number" id="con" name="con" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="con-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="con-bonus-damage">0</span></span>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group2">
              <label for="int">Preservação:</label>
              <input type="number" id="int" name="int" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="int-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="int-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="sab">Libertação:</label>
              <input type="number" id="sab" name="sab" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="sab-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="sab-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="car">Conexão:</label>
              <input type="number" id="car" name="car" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>Bônus de Teste: <span id="car-bonus-test">0</span></span>
                <span>Bônus de Dano: <span id="car-bonus-damage">0</span></span>
              </div>
            </div>
          </div>
  
          <div class="ButonsSave">
            <form id="character-form">
                <div class="button-group">
                    <button type="submit">Salvar Personagem</button>
                    <button type="button" id="load-character">Carregar Personagem</button>
                </div>
                <!--<div class="button-group">
                    <button type="button" id="download-character">Salvar Personagem</button>
                    <input type="file" id="upload-character" accept=".json" style="display: none;">
                    <button type="button" id="load-file-character">Carregar Personagem de Arquivo</button>
                </div> -->
            </form>
        
            <div id="character-select-section" style="display: none;">
                <span id="close-select-section" class="close-button">X</span>
                <h2>Escolha seu Personagem</h2>
                <select id="character-select"></select>
                <button type="button" id="confirm-load">Carregar</button>
            </div>
        </div>

        <div id="save-message" style="display: none;"></div>

        <!-- gerar imagem-->
        
        
        
<!-- Habilita mapa interativo -->
<!-- Habilita mapa interativo -->
<!-- Habilita mapa interativo -->
<div id="mapa-interativo" style="width:100%;max-width:1000px;margin:auto;aspect-ratio:16/12;overflow:hidden;">
  <iframe 
    src="https://mapa-terras-de-calisto.netlify.app/" 
    width="100%" 
    height="100%" 
    style="border:none;border-radius:12px;touch-action:none;" 
    allowfullscreen>
  </iframe>
</div>

<style>
  /* Impede que a página role quando o dedo está sobre o iframe */
  #mapa-interativo {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }
</style>
<!-- isso aqui é responsável por espaço no final do site-->
        <div style="height:clamp(10px,2.5vw,20px);width:100%;" aria-hidden="true"></div>




    <!-- gerar imagem-->

        <!-- gerar imagem-->
        
          
        
  
      <div id="character-view-section" style="display: none;">
        <h2>Seu Personagem</h2>
        <div id="character-details">
          <p>Nome: <span id="char-name-view"></span></p>
          <p>Raça: <span id="char-race-view"></span></p>
          <p>Passado: <span id="char-past-view"></span></p>
        </div>
      </div>
    </div>
    
    <div id="save-message" style="display: none; position: fixed; top: 10px; left: 10px; background-color: #4CAF50; color: white; padding: 10px; border-radius: 5px;"></div>
  </div>
  <script src="script.js"></script>
</body>
</html>




























































