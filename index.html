<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terras de Calisto - RPG</title>
  <link rel="stylesheet" href="style.css">

  <!-- √çcone do navegador -->
  <link rel="icon" href="/imagens/logo.png" type="image/png">

  <!-- Canonical -->
  <link rel="canonical" href="https://terras-de-calisto-ficha-rpg.netlify.app/">

  <!-- Primary Meta Tags -->
  <meta name="title" content="Terras de Calisto - RPG">
  <meta name="description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore hist√≥rias √©picas e mergulhe em aventuras inesquec√≠veis no nosso RPG.">
  <meta name="keywords" content="RPG, Terras de Calisto, ficha RPG, aventuras, fantasia, role-playing game">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://terras-de-calisto-ficha-rpg.netlify.app/">
  <meta property="og:title" content="Terras de Calisto - RPG">
  <meta property="og:description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore hist√≥rias √©picas e mergulhe em aventuras inesquec√≠veis no nosso RPG.">
  <meta property="og:image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">

  <!-- Google-specific -->
  <meta itemprop="name" content="Terras de Calisto RPG">
  <meta itemprop="description" content="Descubra o mundo de Terras de Calisto. Crie personagens e explore aventuras incr√≠veis no RPG de fantasia.">
  <meta itemprop="image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://terras-de-calisto-ficha-rpg.netlify.app/">
  <meta name="twitter:title" content="Terras de Calisto - RPG">
  <meta name="twitter:description" content="Descubra o mundo de Terras de Calisto. Crie personagens, explore hist√≥rias √©picas e mergulhe em aventuras inesquec√≠veis no nosso RPG.">
  <meta name="twitter:image" content="https://terras-de-calisto-ficha-rpg.netlify.app/imagens/livro-de-regras-capa-1.png">
</head>


<body>
          <header>
          <nav class="nav-bar">
            <div class="logo">
              <a href="https://terrasdecalistoficha.wordpress.com/" target="_blank">
                  <img src="imagens/logo.png" alt="Logo Terras de Calisto">
              </a>
          </div>
          <div id="side-menu" class="side-menu">
            <!-- Bot√£o para resetar per√≠cias (exemplo simples) -->

            <ul>
              <button class="close-button" onclick="toggleMenu()">Fechar</button> <!-- Bot√£o de Fechar -->
<!-- mudan√ßa de menu de vida atual e status e os carai virouuuuuuuuuu periciasss-->

<div class="container-centralizado">
  <!--<h1>Per√≠cias</h1> -->
  <p class="descri√ß√£o_pericias">
    
    <strong>Per√≠cias, Talentos e Armas (P.T.A.) </strong>
    
    <p>Escolha tr√™s P.T.A. para receber um b√¥nus de <span id="pta-bonus-value">+2</span>.</p>
    <p>Al√©m disso, pode adicionar <span id="past-bonus-value">+2</span> √†s per√≠cias concedidas pelo seu passado ou ra√ßa.</p>
    <div id="character-info-section-1" style="margin: 0px 0;">
      <button class="toggle-button2" onclick="toggleSectionInfo('expandableSectionInfo1')" 
        style="background-color: red; color: white; padding: 4px 10px; border: none; border-radius: 8px; font-size: 12px; cursor: pointer;">
        Importante!
      </button><button id="resetSkillsButton">Resetar Per√≠cias</button>

    
      <div id="expandableSectionInfo1" style="display: none; margin-top: 15px; background-color: #555151; padding: 20px; border-radius: 10px; border: 1px solid #292727;">
        <h1 class="descri√ß√£o_pericias" style="font-size: 11px;">
          <strong>Observa√ß√£o:</strong>
          <p>
            Cada talento escolhido concede +2 nos testes relacionados √† per√≠cia. Alguns talentos tamb√©m desbloqueiam o uso de certos tipos de equipamento. Caso o personagem tente usar um equipamento sem o talento correspondente, ele sofre desvantagem nos testes de acerto.
          </p>
        </h1>
      </div>
    </div>
    
      </p>
  <div class="pericias_arrumado">
    <div class="pericias">
      <div class="pericia" data-name="Espadas" data-requirement="Brutalidade" data-description="Desbloqueia o uso de: Espada curta, Florete, Punhal, Adaga, Espada longa, Espada bastarda, Espad√£o, Claymore, Cimitarra e Sabre.">
        <p>Espadas</p>
       <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Brutalidade</span>
        <span class="description">Desbloqueia o uso de: Espada curta, Florete, Punhal, Adaga, Espada longa, Espada bastarda, Espad√£o, Claymore, Cimitarra e Sabre.</span>
      </div>
      
      <div class="pericia" data-name="Machados e Martelos" data-requirement="Brutalidade" data-description="Desbloqueia o uso de: Machado de batalha, Machado de guerra, Machado de arremesso, Martelo de guerra, Ma√ßa, Clava simples, Clava com espinhos e Mangual.">
        <p>Machados e Martelos</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Brutalidade</span>
        <span class="description">Desbloqueia o uso de: Machado de batalha, Machado de guerra, Machado de arremesso, Martelo de guerra, Ma√ßa, Clava simples, Clava com espinhos e Mangual.</span>
      </div>
      
      <div class="pericia" data-name="Lan√ßas e Armas com Haste" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Lan√ßa curta, Lan√ßa longa, Pique, Alabarda, Dardo e Javelin.">
        <p>Lan√ßas e Armas com Haste</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Lan√ßa curta, Lan√ßa longa, Pique, Alabarda, Dardo e Javelin.</span>
      </div>
      
      <div class="pericia" data-name="Arcos e Bestas" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Arco curto, Arco longo, Arco recurvo, Arco composto, Besta de m√£o, Besta leve e Besta pesada.">
        <p>Arcos e Bestas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Arco curto, Arco longo, Arco recurvo, Arco composto, Besta de m√£o, Besta leve e Besta pesada.</span>
      </div>
      
      <div class="pericia" data-name="Katanas" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Katanas, Ninja-tos, Tantos, Nodachis e Nagamakis.">
        <p>Katanas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Katanas, Ninja-tos, Tantos, Nodachis e Nagamakis.</span>
      </div>
      
      <div class="pericia" data-name="Fundas e Estilingues" data-requirement="Agilidade" data-description="Desbloqueia o uso de: Funda e Estilingue.">
        <p>Fundas e Estilingues</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Agilidade</span>
        <span class="description">Desbloqueia o uso de: Funda e Estilingue.</span>
      </div>
      
      <div class="pericia" data-name="Armas Ex√≥ticas e Diversas" data-requirement="Liberta√ß√£o" data-description="Desbloqueia o uso de: Nunchaku, Kusarigama, Kama, Tessen, Shuriken e Kunai.">
        <p>Armas Ex√≥ticas e Diversas</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Liberta√ß√£o</span>
        <span class="description">Desbloqueia o uso de: Nunchaku, Kusarigama, Kama, Tessen, Shuriken e Kunai.</span>
      </div>
      
      <div class="pericia" data-name="Armas de Cerco" data-requirement="Liberta√ß√£o" data-description="Desbloqueia o uso de: Catapulta, Balista, Trebuchet e Ariete.">
        <p>Armas de Cerco</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Liberta√ß√£o</span>
        <span class="description">Desbloqueia o uso de: Catapulta, Balista, Trebuchet e Ariete.</span>
      </div>
      
      <div class="pericia" data-name="Escudos" data-requirement="Determina√ß√£o" data-description="Desbloqueia o uso de: Broquel, Escudo redondo, Escudo de torre e Pav√™s.">
        <p>Escudos</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement">Requisito: Determina√ß√£o</span>
        <span class="description">Desbloqueia o uso de: Broquel, Escudo redondo, Escudo de torre e Pav√™s.</span>
      </div>
      



    </div>



    </div>
 <div class="pericias_arrumado">
  <div class="pericias">
    <div class="pericia" data-name="Acrobacia" data-requirement="Agilidade" data-description="Usada para realizar manobras acrob√°ticas, como saltos, piruetas e manobras evasivas durante o combate.">
        <p>Acrobacia</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement"></span>
        <span class="description"></span>
    </div>
    <div class="pericia" data-name="Adestrar Animais" data-requirement="Conex√£o" data-description="Permite treinar e controlar animais, al√©m de melhorar a intera√ß√£o com criaturas.">
        <p>Adestrar Animais</p>
        <button onclick="toggleSkill(this)">0</button>
        <span class="requirement"></span>
        <span class="description"></span>
    </div>
    <div class="pericia" data-name="Atletismo" data-requirement="Brutalidade" data-description="Foca em atividades f√≠sicas intensas, como correr, nadar, escalar ou realizar feitos de for√ßa.">
      <p>Atletismo</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Atua√ß√£o" data-requirement="Conex√£o" data-description="Envolve a habilidade de entreter uma audi√™ncia atrav√©s de performances art√≠sticas como canto, dan√ßa, m√∫sica ou atua√ß√£o.">
      <p>Atua√ß√£o</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Cavalgar" data-requirement="Agilidade" data-description="Permite ao personagem montar e controlar animais de montaria com efici√™ncia, tanto em viagens quanto em combate.">
      <p>Cavalgar</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Conhecimento" data-requirement="Preserva√ß√£o" data-description="Reflete a erudi√ß√£o do personagem em diversas √°reas, como hist√≥ria, geografia, religi√£o, arcana e outras ci√™ncias.">
      <p>Conhecimento</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Cura" data-requirement="Liberta√ß√£o" data-description="Permite ao personagem prestar primeiros socorros, tratar ferimentos e doen√ßas, e utilizar equipamentos m√©dicos de forma eficaz.">
      <p>Cura</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Diplomacia" data-requirement="Conex√£o" data-description="Habilidade de negociar, fazer acordos e influenciar outras pessoas de maneira amig√°vel e persuasiva.">
      <p>Diplomacia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Engana√ß√£o" data-requirement="Conex√£o" data-description="Usada para mentir, blefar ou enganar outros, seja em conversas, jogos de azar, ou outras situa√ß√µes sociais.">
      <p>Engana√ß√£o</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Furtividade" data-requirement="Agilidade" data-description="Habilidade de se mover sem ser percebido, seja para evitar inimigos, realizar ataques furtivos ou se infiltrar em √°reas protegidas.">
      <p>Furtividade</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Identificar Magia" data-requirement="Preserva√ß√£o" data-description="Permite ao personagem analisar e identificar magias, itens m√°gicos e encantamentos.">
      <p>Identificar Magia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Iniciativa" data-requirement="Agilidade" data-description="Determina a rapidez do personagem em reagir em situa√ß√µes de combate, permitindo agir antes de seus oponentes.">
      <p>Iniciativa</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Intimida√ß√£o" data-requirement="Conex√£o" data-description="Capacidade de for√ßar ou coagir outros atrav√©s de amea√ßas, postura dominante ou demonstra√ß√µes de poder.">
      <p>Intimida√ß√£o</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Intui√ß√£o" data-requirement="Liberta√ß√£o" data-description="Permite ao personagem perceber inten√ß√µes escondidas, emo√ß√µes ou mentiras atrav√©s da observa√ß√£o cuidadosa.">
      <p>Intui√ß√£o</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Jogatina" data-requirement="Conex√£o" data-description="Habilidade de participar e vencer jogos de azar, al√©m de manipular as regras e enganar outros jogadores.">
      <p>Jogatina</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Ladinagem" data-requirement="Agilidade" data-description="Habilidade de realizar atos il√≠citos, como abrir fechaduras, desarmar armadilhas e roubar objetos discretamente.">
      <p>Ladinagem</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Obter Informa√ß√£o" data-requirement="Conex√£o" data-description="Capacidade de extrair informa√ß√µes de forma sutil ou direta, seja por conversas casuais ou por interrogat√≥rios.">
      <p>Obter Informa√ß√£o</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Of√≠cio" data-requirement="Preserva√ß√£o" data-description="Reflete a habilidade em profiss√µes e artesanato, como forja, carpintaria, alquimia, entre outras.">
      <p>Of√≠cio</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Percep√ß√£o" data-requirement="Liberta√ß√£o" data-description="Capacidade de notar detalhes ao seu redor, como sons, cheiros e movimentos sutis, permitindo detectar perigos ou oportunidades ocultas.">
      <p>Percep√ß√£o</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Sobreviv√™ncia" data-requirement="Determina√ß√£o" data-description="Habilidade de viver em ambientes hostis, ca√ßar, encontrar comida, rastrear criaturas e se orientar na natureza.">
      <p>Sobreviv√™ncia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Alquimia" data-requirement="Preserva√ß√£o" data-description="Habilidade de misturar ingredientes para criar po√ß√µes, elixires e outros itens alqu√≠micos. Inclui o conhecimento sobre reagentes, catalisadores e processos qu√≠micos m√°gicos.">
      <p>Alquimia</p>
      <button onclick="toggleSkill(this)">0</button>
      <span class="requirement"></span>
      <span class="description"></span>
  </div>
  <div class="pericia" data-name="Armadilhas" data-requirement="Agilidade" data-description="Capacidade de criar, detectar e desarmar armadilhas, tanto mec√¢nicas quanto m√°gicas. Inclui o uso de ferramentas espec√≠ficas e truques de sabotagem.">
    <p>Armadilhas</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Arquearia/Atirar" data-requirement="Agilidade" data-description="Maestria no uso de armas de fogo,arcos e bestas, tanto para combate quanto para ca√ßa. Inclui a precis√£o no disparo e o conhecimento sobre tipos de flechas, muni√ß√µes e suas aplica√ß√µes.">
    <p>Arquearia/Atirar</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Disfarces" data-requirement="Conex√£o" data-description="Habilidade de se passar por outra pessoa atrav√©s de mudan√ßas na apar√™ncia, voz e comportamento. Inclui o uso de roupas, maquiagem e acess√≥rios.">
    <p>Disfarces</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escudaria" data-requirement="Brutalidade" data-description="Uso especializado de escudos em combate, tanto para bloquear ataques quanto para desferir golpes. Inclui t√©cnicas de defesa e contra-ataque.">
    <p>Escudaria</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escava√ß√£o" data-requirement="Determina√ß√£o" data-description="Habilidade de minerar e escavar em terrenos dif√≠ceis, encontrando materiais valiosos ou abrindo caminho atrav√©s de obst√°culos naturais.">
    <p>Escava√ß√£o</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Lideran√ßa" data-requirement="Conex√£o" data-description="Capacidade de comandar, inspirar e coordenar grupos em combate ou em outras situa√ß√µes complexas. Inclui estrat√©gias de batalha e organiza√ß√£o de equipes.">
    <p>Lideran√ßa</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Navega√ß√£o" data-requirement="Determina√ß√£o" data-description="Habilidade de se orientar em mar aberto ou em grandes √°reas desconhecidas, usando mapas, estrelas ou outros m√©todos para encontrar o caminho certo.">
    <p>Navega√ß√£o</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Psicologia" data-requirement="Liberta√ß√£o" data-description="Capacidade de analisar e compreender o comportamento, emo√ß√µes e motiva√ß√µes das pessoas, ajudando a prever a√ß√µes e manipular suas emo√ß√µes.">
    <p>Psicologia</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="T√°tica" data-requirement="Preserva√ß√£o" data-description="Habilidade de planejar estrat√©gias complexas para combates ou desafios, considerando os pontos fortes e fracos de aliados e inimigos.">
    <p>T√°tica</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Alfaiataria" data-requirement="Preserva√ß√£o" data-description="Habilidade de criar e consertar roupas e armaduras leves, adaptando vestimentas para diversas condi√ß√µes e estilos.">
    <p>Alfaiataria</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Arqueologia" data-requirement="Preserva√ß√£o" data-description="Conhecimento de civiliza√ß√µes antigas e a habilidade de encontrar, estudar e interpretar artefatos e ru√≠nas hist√≥ricas.">
    <p>Arqueologia</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Aprimoramento de Armas" data-requirement="Brutalidade" data-description="Capacidade de afiar, equilibrar e melhorar armas de combate, aumentando sua efici√™ncia e durabilidade.">
    <p>Aprimoramento de Armas</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Carisma" data-requirement="Conex√£o" data-description="Habilidade natural de influenciar e atrair outras pessoas com charme, confian√ßa e presen√ßa marcante, √∫til em situa√ß√µes sociais e negocia√ß√µes.">
    <p>Carisma</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Culin√°ria" data-requirement="Preserva√ß√£o" data-description="Habilidade de preparar alimentos nutritivos e pratos elaborados, incluindo o uso de ingredientes raros para efeitos especiais, como regenera√ß√£o ou resist√™ncia a venenos.">
    <p>Culin√°ria</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Demoli√ß√£o" data-requirement="Brutalidade" data-description="Capacidade de destruir constru√ß√µes, desativar estruturas e usar explosivos ou outros meios para abrir caminho ou criar armadilhas.">
    <p>Demoli√ß√£o</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Escalada" data-requirement="Agilidade" data-description="Habilidade de escalar superf√≠cies dif√≠ceis, como penhascos, paredes ou estruturas, usando t√©cnica, for√ßa e equipamentos adequados.">
    <p>Escalada</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Esgrima" data-requirement="Agilidade" data-description="Maestria no uso de espadas leves e t√©cnicas r√°pidas de ataque e defesa, focando em precis√£o e agilidade durante o combate.">
    <p>Esgrima</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Herbalismo" data-requirement="Preserva√ß√£o" data-description="Conhecimento sobre plantas e ervas, sua coleta e uso para criar rem√©dios, po√ß√µes e venenos.">
    <p>Herbalismo</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>

<div class="pericia" data-name="Vigil√¢ncia" data-requirement="Liberta√ß√£o" data-description="Habilidade de manter aten√ß√£o constante em busca de amea√ßas ou eventos importantes, permitindo detectar perigos iminentes ou movimentos sutis √† dist√¢ncia.">
    <p>Vigil√¢ncia</p>
    <button onclick="toggleSkill(this)">0</button>
    <span class="requirement"></span>
    <span class="description"></span>
</div>
      
</div>
  


    <!-- Repita a estrutura acima para cada per√≠cia -->
</div>

  

    <!-- Repita a estrutura para outras per√≠cias -->
  </div>
</div>


          
<!-- mudan√ßa de menu de vida atual e status e os carai-->

              </div>
            </ul>
        </div>
              <div class="nav-list">
                  <ul>
                    <button class="toggle-button2" onclick="toggleMenu()">Talentos</button>
 
 <!-- Bot√£o para abrir o popup -->
<button id="abrir-status-rpg" class="status-rpg-btn">Editar</button>

<!-- Popup -->
<div id="status-rpg-popup" class="status-rpg-popup oculto">
  <div class="status-rpg-popup-content">
    <span id="fechar-status-rpg" class="status-rpg-close">&times;</span>
    <div id="status-rpg-app"></div>
  </div>
</div>


                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/" class="nav-link" target="_blank">Wiki</a></li>
                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/racas/" class="nav-link" target="_blank">Ra√ßas</a></li>
                      <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/passados/" class="nav-link" target="_blank">Passados</a></li>
                    <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/magias/" class="nav-link" target="_blank">Magias</a></li>
                       <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/" class="nav-link" target="_blank">Passivas</a></li>
                                      <li class="nav-item"><a href="https://bestiario-terrasdecalisto.netlify.app/" class="nav-link" target="_blank">Besti√°rio</a></li>

 <!-- target="_blank" .....sempre colocar antes do >NOME_DO_LINK √© para abrir em outra aba, uma nova aba, n√£o esquecer-->
 <button onclick="menuShow()" class="button-menu">
  <img class="icon" src="imagens/menu.svg" alt="Menu">                      
</button>


              </div> 

                      
                  </ul>
                 
              </div>
<button id="abrirPopupRacaCustom" class="toggle-button-custom">Tokens</button>

<div id="popupRacaCustom" class="popup-overlay-custom">
  <div class="popup-content-custom" id="racaContentCustom"></div>
</div>

<div id="popupImagemRacaCustom" class="popup-overlay-custom">
  <div class="popup-content-custom" id="imagemRacaContentCustom"></div>
</div>
    </nav>
          </div>
          <div class="mobile-menu">

              <ul>
                                        <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/" class="nav-link" target="_blank">Wiki</a></li>

                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/racas/" class="nav-link" target="_blank">Ra√ßas</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/passados/" class="nav-link" target="_blank">Passados</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/magias/" class="nav-link" target="_blank">Magias</a></li>
                <li class="nav-item"><a href="https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/" class="nav-link" target="_blank">Passivas</a></li>
                <li class="nav-item"><a href="https://bestiario-terrasdecalisto.netlify.app/" class="nav-link" target="_blank">Besti√°rio</a></li>

                  <!-- target="_blank" .....sempre colocar antes do >NOME_DO_LINK √© para abrir em outra aba, uma nova aba, n√£o esquecer-->
                  </div>
                  <!-- talvez adicionar
              
              <div class="login-button">
                <button><a href="#">Entrar</a></button> -->

                
            </ul>
        </div>


    </nav>

 
</header>

<body>


  <div id="app">

<!-- Popup tutorial -->
<div id="tutorialPopup" class="popup">
  <div class="popup-content">
<div class="chess-button-container">
  <button id="closeTutorial" class="close" aria-label="Fechar tutorial">&times;</button>
  <button id="openChessPopup" class="chess-btn">Modo Chess</button>
</div>

    <div class="tutorial-flex">

      <div class="tutorial-section">
        <h2>1. Introdu√ß√£o</h2>
        <p>
          Terras de Calisto √© um RPG de mesa de fantasia sombria onde os jogadores interpretam personagens em um mundo moldado pelas for√ßas de <strong class="det">F√©</strong>, <strong class="pre">Caos</strong>, <strong class="lib">Poder</strong> e <strong class="cnx">Desconhecido</strong>.
        </p>
        <p>
          Os jogadores tomam decis√µes que afetam diretamente a narrativa, enquanto o Mestre de Jogo (GM) conduz os eventos, descreve os cen√°rios e interpreta NPCs.
        </p>
        <img src="/imagens/mundo_calisto.png" alt="Mapa sombrio de Calisto com √≠cones dos quatro elementos" style="width:100%; border-radius:10px;">
      <a href="https://mapa-terras-de-calisto.netlify.app/"
   target="_blank" rel="noopener noreferrer"
   class="btn-mapa">üó∫Ô∏è Abrir Mapa ‚Äì Terras de Calisto</a>

<style>
  .btn-mapa{
    display:inline-block;
    padding:12px 18px;
    border-radius:12px;
    border:1px solid #ddd;
    background:#111;
    color:#fff;
    font:600 16px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    text-decoration:none;
    box-shadow:0 4px 12px rgba(0,0,0,.12);
    transition:transform .06s ease, box-shadow .2s ease, opacity .2s ease;
  }
  .btn-mapa:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.18); }
  .btn-mapa:active{ transform:translateY(0); opacity:.9; }
</style>

      </div>

      <div class="tutorial-section">
        <h2>2. Cria√ß√£o</h2>
        <p>Na cria√ß√£o do personagem, o jogador escolhe:</p>

          <li>Uma <strong class="grad-text">Ra√ßa</strong></li>
          <li>Um <strong class="grad-text">Passado</strong></li>
          <li>Um <strong class="grad-text">Equipamento Inicial</strong></li>
          <li><strong class="especial">+3 Talentos Extras</strong> (al√©m dos que Ra√ßa e Passado concedem)</li>
          <li>Redistribui seus <strong class="grad-text">Atributos</strong></li>

<p>
  O personagem come√ßa com todos os atributos em <span class="bru">14</span>, representando o n√≠vel 0.  
  Para iniciar, redistribua esses pontos, garantindo no m√≠nimo <strong>8 em cada atributo</strong>.  
  Durante a redistribui√ß√£o, o <strong>n√≠vel do personagem</strong> pode ser alterado; por√©m, se os pontos forem distribu√≠dos corretamente, ele se manter√° no n√≠vel inicial definido com o GM.
</p>

        <p>
          <strong><span class="bru">Brutalidade</span>, <span class="agi">Agilidade</span> e <span class="det">Determina√ß√£o</span></strong> afetam mais a <span class="pv">Vida (PV)</span>, enquanto <strong><span class="pre">Preserva√ß√£o</span>, <span class="lib">Liberta√ß√£o</span> e <span class="cnx">Conex√£o</span></strong> influenciam a <span class="san">Sanidade (SAN)</span>.
        </p>
        <img src="/imagens/Atributos.png" alt="Distribui√ß√£o de atributos do personagem" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>Atributos</h2>
        <div class="tutorial-flex">
         <div class="tutorial-section">
          <p><strong class="bru">Brutalidade (BRU)</strong> ‚Äì <br>
            For√ßa f√≠sica e poder bruto em combate. Influencia a <span class="pv">Vida (PV)</span>.
          </p>
          <p><strong class="agi">Agilidade (AGI)</strong> ‚Äì <br>
            Rapidez, reflexos e precis√£o em ataques e esquivas. Influencia a <span class="pv">Vida (PV)</span>.
          </p>
          <p><strong class="det">Determina√ß√£o (DET)</strong> ‚Äì <em>Frequentemente usado em magias e passivas do elemento <span class="det">F√©</span></em><br>
            Resist√™ncia f√≠sica e for√ßa de vontade. Afeta <span class="pv">PV</span> e defesa mental.
          </p>

          <p><strong class="pre">Preserva√ß√£o (PRE)</strong> ‚Äì <em>Frequentemente usado em magias e passivas do elemento <span class="pre">Caos</span></em><br>
            Conhecimento natural, alquimia e estrat√©gias. Influencia a <span class="san">Sanidade (SAN)</span>.
          </p>
          <p><strong class="lib">Liberta√ß√£o (LIB)</strong> ‚Äì <em>Frequentemente usado em magias e passivas do elemento <span class="lib">Poder</span></em><br>
            Despertar m√°gico e percep√ß√£o espiritual. Afeta magias e <span class="san">SAN</span>.
          </p>
          <p><strong class="cnx">Conex√£o (CNX)</strong> ‚Äì <em>Frequentemente usado em magias e passivas do elemento <span class="cnx">Desconhecido</span></em><br>
            V√≠nculo com entidades e carisma m√≠stico. Fortemente ligado √† <span class="san">SAN</span>.
          </p>
        </div>
       </div>
      </div>

      <div class="tutorial-section">
        <h2>3. Combate</h2>
        <p>
          O combate acontece em turnos com ordem definida por Iniciativa (D20). No turno, o jogador pode realizar:
        </p>
        <p><strong>A√ß√£o Livre:</strong> Usar passiva, falar, sacar arma etc.</p>
        <p><strong>A√ß√£o de Movimento:</strong> Caminhar.</p>
        <p><strong>A√ß√£o Completa:</strong> Atacar, lan√ßar magia.</p>
        <p>
          A rolagem de a√ß√µes usa 1D20 + modificador de atributo contra uma <strong>Dificuldade Tempor√°ria (DT)</strong>, gerada por uma rolagem do oponente.
        </p>
        <h3>Exemplo de ataque</h3>
<p>
  Para atacar, o jogador rola <strong>1D20 + b√¥nus de teste</strong> de ataque.  
  Se o resultado for igual ou superior √† <strong>DT</strong> do alvo, o ataque acerta.  
  Ao acertar, o dano √© determinado pelo tipo de arma ou magia usada, somando os <strong>b√¥nus de dano</strong> adequados.
</p>

<p>
  Exemplo: Uma espada pode causar <strong>1D8 de dano + b√¥nus de dano de</strong> <span class="bru">Brutalidade</span>.
</p>


        <img src="/imagens/batalha_combate.png" alt="Cena de batalha entre personagens e criaturas" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>4. Op√ß√µes de Rea√ß√£o</h2>
        <p>
          No combate, al√©m da a√ß√£o principal, o personagem pode reagir de formas espec√≠ficas ao ataque inimigo:
        </p>
<p>
  <strong>Esquivar:</strong> Para evitar um ataque, role <strong>1D20 + b√¥nus de teste</strong> adequado ao atributo indicado pela habilidade, magia ou passiva (pode ser qualquer um dos seis atributos).  
  Se o resultado for maior que o valor do ataque inimigo, o personagem esquiva com sucesso e n√£o sofre dano.
</p>


      <p>
  <strong>Defender:</strong> O personagem pode entrar em postura defensiva, somando o valor da armadura mais os <strong>b√¥nus de teste</strong> de <em class="det">Determina√ß√£o</em> e <em class="bru">Brutalidade</em>.  
  Este valor √© somado √† defesa para resistir ao dano do inimigo, reduzindo o dano recebido.
</p>

<p>
  <strong>Contra-atacar:</strong> O personagem pode declarar um contra-ataque como rea√ß√£o <strong>antes do inimigo rolar para acertar</strong>.  
  Caso o ataque inimigo n√£o supere a armadura do personagem (j√° considerando os b√¥nus de teste de defesa), ele pode realizar um contra-ataque imediatamente.  
  Esta rea√ß√£o √© gratuita e n√£o consome a a√ß√£o do turno.
</p>


      </div>

      <div class="tutorial-section">
        <h2>5. Magia e Passivas</h2>
<p>
  Magias usam <strong class="san">Sanidade (SAN)</strong> como recurso. O jogador rola <strong>D20</strong> + o <strong>b√¥nus de teste</strong> do atributo da magia, que pode ser <span class="pre">Preserva√ß√£o</span>, <span class="lib">Liberta√ß√£o</span>, <span class="cnx">Conex√£o</span>, <span class="det">Determina√ß√£o</span>, <span class="bru">Brutalidade</span>, <span class="agi">Agilidade</span> ou outro permitido pela magia.  
  Caso a rolagem passe na <strong>DT</strong>, o efeito da magia √© ativado.
</p>


        <p>
          Passivas usam <strong class="especial">Especial e Sanidade</strong> como recurso. S√£o habilidades ativadas automaticamente e n√£o consomem a√ß√£o. O personagem pode ter at√© <strong class="especial">4 passivas</strong> ativas ao mesmo tempo (uma de cada elemento).
        </p>
        <img src="/imagens/efeito_magia_passiva.png" alt="Personagem ativando magia com aura" style="width:100%; border-radius:10px;">
      </div>

      <div class="tutorial-section">
        <h2>6. Explora√ß√£o</h2>
        <p>
          O GM narra o ambiente e os jogadores podem investigar, interagir com NPCs, desarmar armadilhas e encontrar itens escondidos.
          Testes de atributos e per√≠cias como <strong>Percep√ß√£o, Diplomacia, Furtividade</strong> e outras s√£o utilizados para definir o sucesso.
        </p>
        <img src="/imagens/exploracao_npc.png" alt="Aventureiros falando com NPCs em dungeon ou aldeia" style="width:100%; border-radius:10px;">
     
      </div>

      <div class="tutorial-section">
        <h2>7. Evolu√ß√£o</h2>
        <p>
          Os personagens ganham <strong class="especial">pontos de experi√™ncia (XP)</strong> ao completar miss√µes, derrotar inimigos ou alcan√ßar marcos na hist√≥ria. A quantidade de XP concedida varia conforme a dificuldade do desafio.
        </p>
        <p><strong>XP por Tipo de Desafio:</strong></p>
        <p>F√°ceis: 50‚Äì75 XP<br>
           Moderados: 100‚Äì150 XP<br>
           Dif√≠ceis: 200‚Äì300 XP<br>
           Muito Dif√≠ceis: 400‚Äì500 XP<br>
           √âpicos: 1.000+ XP
        </p>
        <p>XP b√¥nus pode ser concedido por conquistas extraordin√°rias.</p>
        <p>
          Cada 100 XP acumulados equivalem a 1 ponto de n√≠vel, que pode ser distribu√≠do para aumentar os atributos do personagem:
        </p>
        <p><strong>Atributos:</strong></p>
        <p>
          <span class="bru">Brutalidade (BRU)</span><br>
          <span class="agi">Agilidade (AGI)</span><br>
          <span class="det">Determina√ß√£o (DET)</span><br>
          <span class="pre">Preserva√ß√£o (PRE)</span><br>
          <span class="lib">Liberta√ß√£o (LIB)</span><br>
          <span class="cnx">Conex√£o (CNX)</span>
        </p>
        <p>
          <strong>Exemplo:</strong> Com 300 XP, o personagem ganha 3 pontos de n√≠vel para distribuir entre os atributos como desejar (por exemplo, +1 em <span class="bru">Brutalidade</span>, +1 em <span class="agi">Agilidade</span> e +1 em <span class="det">Determina√ß√£o</span>).
        </p>
        <img src="/imagens/evolucao_nivel.png" alt="Evolu√ß√£o do personagem com XP e atributos" style="width:100%; border-radius:10px;">


      </div>
<div class="tutorial-section">
  <h2>8. Mec√¢nicas de Influ√™ncia por Afilia√ß√£o</h2>
  <p>
    Essas mec√¢nicas representam for√ßas maiores que moldam o mundo de <strong>Calisto</strong>. Elas s√£o ativadas em combates especiais contra criaturas alinhadas aos quatro princ√≠pios c√≥smicos: <span class="cnx">Desconhecido</span>, <span class="pre">Caos</span>, <span class="lib">Poder</span> e <span class="det">F√©</span>.
  </p>
  <p>
    Cada uma oferece <strong>regras espec√≠ficas para o Mestre</strong>, permitindo alterar o cen√°rio, aplicar b√¥nus √†s criaturas e gerar consequ√™ncias diretas a partir das escolhas dos jogadores.
  </p>

  <h3 class="cnx">‚ú¥Ô∏è 1. Resson√¢ncia do Desconhecido</h3>
  <p><em>Ativa quando magias ou habilidades sobrenaturais s√£o usadas.</em></p>
    <li>Vantagem em testes para criaturas do Desconhecido (ataque, esquiva, resist√™ncia).</li>
    <li>+1 de Armadura Tempor√°ria por rodada.</li>
    <li>Resist√™ncia contra dano <strong>mental, alma</strong> ou <strong>distor√ß√£o</strong>.</li>
    <li>1 A√ß√£o fora do turno a cada 3 rodadas.</li>
    <li><strong>Dist√∫rbios de Realidade:</strong> salas duplicadas, tempo distorcido, sombras vivas.</li>
  <p><strong>Nota de jogo:</strong> O mundo parece se dobrar ao medo e √† magia. Criaturas agem como se j√° soubessem o futuro.</p>

  <h3 class="pre">üî• 2. Degrada√ß√£o do Caos</h3>
  <p><em>Ativa quando a natureza ou o ambiente s√£o destru√≠dos.</em></p>
    <li>+1 ponto de Degrada√ß√£o ao queimar, poluir ou usar magias destrutivas.</li>
    <li>Cada ponto: +2 de dano f√≠sico e +1 de dano elemental para inimigos.</li>
    <li>A cada 2 turnos em terreno degradado: +1 de Armadura.</li>
    <li>Imunidade a medo e controle mental.</li>
    <li>Muta√ß√µes grotescas: garras, bra√ßos extras, pele de pedra.</li>
    <li>Aliados do ambiente podem surgir como refor√ßos.</li>
  <p><strong>Nota de jogo:</strong> A natureza se revolta, e os inimigos se tornam partes vivas da destrui√ß√£o causada pelo grupo.</p>

  <h3 class="lib">üí† 3. Ac√∫mulo de Poder Proibido</h3>
  <p><em>Ativa ao usar magias e habilidades do tipo Poder.</em></p>
  <p>O Mestre acompanha um contador de 1 a 12. A cada 2 pontos:</p>
    <li><strong>N√≠vel 2:</strong> +1 dano f√≠sico para aliados.</li>
    <li><strong>N√≠vel 4:</strong> +2 dano elemental.</li>
    <li><strong>N√≠vel 6:</strong> 1 rea√ß√£o extra por aliado.</li>
    <li><strong>N√≠vel 8:</strong> +2 de Armadura Tempor√°ria e +1 resist√™ncia m√°gica.</li>
    <li><strong>N√≠vel 10:</strong> Vantagem em testes m√°gicos ofensivos e defensivos.</li>
    <li><strong>N√≠vel 12:</strong> Invoca√ß√£o de uma criatura do Mundo dos Mortos. Ela ataca todos.</li>
  <p><strong>Nota de jogo:</strong> O grupo se sente cada vez mais poderoso ‚Äî at√© perder o controle. O Mestre pode sugerir isso com olhos brilhantes, tremores ou efeitos no ch√£o.</p>

  <h3 class="det">‚úùÔ∏è 4. Disc√≥rdia das F√©s</h3>
  <p><em>Ativa quando magias de f√© contr√°ria √† regi√£o s√£o utilizadas.</em></p>
    <li>Magias da f√© local: Vantagem em testes, +2 e dura√ß√£o/√°rea aumentadas.</li>
    <li>Magias de f√©s opostas: +1 no contador de Disc√≥rdia.</li>
    <li>No limite de Disc√≥rdia, o mestre escolhe:</li>
  <ul>
  <p>‚ô¶  Manifesta√ß√£o de uma entidade sagrada que castiga o grupo.</P>
      <P>‚ô¶  Ou invoca√ß√£o de uma criatura do Desconhecido ou do Poder como puni√ß√£o.</P>
</ul>    
  <p><strong>Nota de jogo:</strong> Objetos sagrados reagem, ambientes brilham ou escurecem. Mesmo sem saber a f√© da regi√£o, o grupo sentir√° os sinais.</p>

  <h3>üí° Resumo para o Mestre</h3>
  <table style="width:100%; text-align:left; border-collapse: collapse;">
    <thead>
      <tr style="background-color:#333; color:#fff;">
        <th style="padding: 8px;">Afilia√ß√£o</th>
        <th style="padding: 8px;">Quando ativa?</th>
        <th style="padding: 8px;">Efeitos para o Mestre</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="padding: 8px;"><span class="cnx">Desconhecido</span></td>
        <td style="padding: 8px;">Uso de magias ou habilidades sobrenaturais</td>
        <td style="padding: 8px;">Altera o cen√°rio, concede b√¥nus √†s criaturas</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="pre">Caos</span></td>
        <td style="padding: 8px;">Destrui√ß√£o da natureza e uso excessivo de elementos</td>
        <td style="padding: 8px;">Buffs progressivos, muta√ß√µes e refor√ßos do ambiente</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="lib">Poder</span></td>
        <td style="padding: 8px;">Uso cont√≠nuo de magias do tipo Poder</td>
        <td style="padding: 8px;">Grupo ganha b√¥nus tempor√°rios at√© invocar criatura hostil</td>
      </tr>
      <tr>
        <td style="padding: 8px;"><span class="det">F√©</span></td>
        <td style="padding: 8px;">Usar magias contr√°rias √† f√© da regi√£o</td>
        <td style="padding: 8px;">Cria Disc√≥rdia at√© surgir puni√ß√£o divina ou profana</td>
      </tr>
    </tbody>
  </table>

  <img src="/imagens/afiliacoes_rituais.png" alt="Rituais m√°gicos e afilia√ß√µes de Calisto" style="width:100%; border-radius:10px; margin-top:10px;">
</div>

<!-- POPUP MODO CHESS -->
<div id="chessTutorialPopup" class="chess-popup" style="display: none;">
  <div class="chess-popup-content" id="chessPopupContent">
    <span id="closeChessPopup" class="chess-popup-close">&times;</span>
    <div class="chess-popup-flex">

      <!-- SE√á√ÉO 1 -->
      <div class="chess-popup-section">
        <h2>1. O que √© o Modo Chess?</h2>
        <p>
          O <strong>Modo Chess</strong> √© uma varia√ß√£o de xadrez baseada em <strong>Roleplay T√°tico</strong>, onde cada pe√ßa representa uma <strong>criatura do Besti√°rio de Terras de Calisto</strong>.
        </p>
        <ul>
          <li>O combate segue as regras cl√°ssicas de Terras de Calisto.</li>
          <li>Magias, habilidades e rea√ß√µes funcionam apenas durante o combate.</li>
          <li>Cada pe√ßa possui <strong>pontos de vida pr√≥prios</strong>:</li>
        </ul>
          <li><strong>Pe√£o:</strong> 20 de vida</li>
          <li><strong>Torre:</strong> 35 de vida</li>
          <li><strong>Bispo:</strong> 30 de vida</li>
          <li><strong>Cavalo:</strong> 25 de vida</li>
          <li><strong>Rainha:</strong> 50 de vida</li>
          <li><strong>Rei:</strong> 1 de vida (se for morto, a partida termina)</li>
        <p>
          O jogador pode substituir qualquer pe√ßa por seu <strong>personagem jog√°vel</strong>, mantendo a vida padr√£o da posi√ß√£o. Cada lado pode ser controlado por jogadores ou pelo mestre.
        </p>
        <p><a href="https://bestiario-terrasdecalisto.netlify.app/" target="_blank">Acesse o Besti√°rio</a> para escolher sua criatura.</p>
        <img src="/imagens/exemplo_tabuleiro.png" alt="Exemplo de Tabuleiro" class="chess-img">
      </div>

<!-- SE√á√ÉO 2 -->
<div class="chess-popup-section">
  <h2>2. Combate e Check</h2>
  <p>
    Quando <strong>duas ou mais pe√ßas</strong> (at√© o limite de <strong>4 por quadrado</strong>) se encontram no mesmo espa√ßo,
    inicia-se um combate por turnos.
  </p>
  <li>O combate utiliza o sistema de Terras de Calisto (turnos, rea√ß√µes, atributos).</li>
  <li>O jogador pode realizar at√© 3 rea√ß√µes por turno (ex: esquiva, bloqueio, contra-ataque).</li>
  <li>Check (xeque) continua funcionando como no xadrez tradicional.</li>
  <li>Checkmate (xeque-mate) n√£o encerra o jogo: o Rei deve fugir ou outra pe√ßa deve intervir no combate.</li>
  <li>A elimina√ß√£o do Rei em combate √© a √∫nica forma de vit√≥ria.</li>
  <img src="/imagens/exemplo_combate.png" alt="Exemplo de Combate" class="chess-img">
</div>

      <!-- SE√á√ÉO 3 -->
      <div class="chess-popup-section">
        <h2>3. Estrat√©gia e Customiza√ß√£o</h2>
        <p>
          Cada criatura do Besti√°rio possui <strong>habilidades √∫nicas</strong>, magias e caracter√≠sticas de combate. Algumas podem se mover por teleporte ou usar efeitos fora do combate, conforme suas passivas.
        </p>
          <li>Apenas <strong>teleporte e habilidades passivas</strong> funcionam fora do combate.</li>
          <li>Voc√™ pode montar times com criaturas tem√°ticas, fac√ß√µes ou aliados da hist√≥ria.</li>
          <li>O jogo pode ser PvP entre jogadores, PvM com mestre ou misto.</li>
        <img src="/imagens/exemplo_criatura.png" alt="Exemplo de Criatura" class="chess-img">
      </div>

    </div>
  </div>
</div>

<!-- POPUP COMBATE SECUND√ÅRIO -->
<div id="combatPopup" class="chess-popup" style="display: none;">
  <div class="chess-popup-content">
    <span id="closeCombatPopup" class="chess-popup-close">&times;</span>
    <h2>Regras de Combate (Modo Chess)</h2>
    <p>Durante o combate entre pe√ßas ou personagens:</p>
    <ul>
      <li><strong>Iniciativa:</strong> Cada pe√ßa joga 1d20 para determinar a ordem de a√ß√£o.</li>
      <li><strong>Ataques:</strong> Baseados nos atributos da criatura (ex: Brutalidade + 1d20 contra DT).</li>
      <li><strong>Rea√ß√µes:</strong> At√© 3 por turno (esquiva, contra-ataque, defesa).</li>
      <li><strong>Condi√ß√µes especiais:</strong> queimando, paralisado, amaldi√ßoado, etc., conforme magias e efeitos do Besti√°rio.</li>
      <li><strong>Elimina√ß√£o:</strong> Ao chegar a 0 de vida, a pe√ßa √© removida do tabuleiro.</li>
    </ul>
    <p>Consulte as <a href="https://terrasdecalistoficha.wordpress.com/como-jogar/" target="_blank">Regras Completas</a> para detalhes sobre rea√ß√µes, atributos e testes.</p>
  </div>
</div>

    </div>
  </div>
</div>



<!-- Bot√£o fixo para abrir tutorial -->
<button id="openTutorialButton">Tutorial</button>

    
    <!-- Se√ß√£o da esquerda -->
<div id="left-section">
  <div class="status-externo">
    <div class="status-bar">
      <div id="life-fill" class="fill"></div>
      <div id="life-temp-fill" class="temp-fill"></div> <!-- Barra Tempor√°ria -->
      <span id="life-view">0 / 0</span>
    </div>
  </div>
  
  <div class="status-externo">
    <div class="status-bar">
      <div id="sanity-fill" class="fill"></div>
      <div id="sanity-temp-fill" class="temp-fill"></div> <!-- Barra Tempor√°ria -->
      <span id="sanity-view">0 / 0</span>
    </div>
  </div>
  
  <div class="status-externo">
    <div class="status-bar">
      <div id="special-fill" class="fill"></div>
      <div id="special-temp-fill" class="temp-fill"></div> <!-- Barra Tempor√°ria -->
      <span id="special-view">0 / 0</span>
    </div>
  </div>
  



  
<div id="character-stats">
  

          <div class="stats-wrapper">
            <div class="stat-container">
              <span>Armor: <span id="armor-view">0</span></span>
            </div>
            <div class="stat-container">
              <span>Mov: <span id="movement-view">0</span></span>
            </div>
            <div class="stat-container">
              <span>N√≠vel: <span id="level-view">0</span></span>
            </div>
          </div>
          <!-- Nome -->
<!-- Nome (100% largura com label alinhado ao input) -->
<link href="https://fonts.googleapis.com/css2?family=Caveat&display=swap" rel="stylesheet">

<div style="display: flex; align-items: center; margin-bottom: 15px;">
  <label for="char-name" style="font-size: 1.8em; margin-right: 12px; color: #444; min-width: 70px; font-family: 'Caveat', cursive;">
    Nome:
  </label>
  <input type="text" id="char-name" name="char-name" required
         style="flex: 1; padding: 1px 10px; font-size: 2em;
                border: none; border-bottom: 2px solid #888;
                background-color: transparent;
                outline: none; transition: border-color 0.3s;
                font-family: 'Caveat', cursive;">
</div>

<style>
  #char-name:focus {
    border-bottom: 2px solid #0077cc;
  }
</style>

<!-- Ra√ßa e Passado (lado a lado no PC, empilhados no mobile) -->
<div style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: nowrap;">

  <!-- Ra√ßa -->
  <div style="flex: 1; min-width: 0; display: flex; flex-direction: column;">
    <label for="race" style="font-size: 14px; margin-bottom: 4px; color: rgb(255, 72, 0);">Ra√ßa:</label>
    <select id="race" name="race" required
            style="padding: 6px 8px; font-size: 14px; border: 1px solid #aaa; border-radius: 5px; width: 100%;">
      <option value="">Selecione a Ra√ßa</option>
      <option value="Elfo">Lyrithil ‚Äì Elfo</option>
      <option value="Humano">Zhilak ‚Äì Humano</option>
      <option value="An√£o">Grunthrok ‚Äì An√£o</option>
      <option value="Gigante">Thudrok ‚Äì Gigante</option>
      <option value="Krahzhik">Krahzhik ‚Äì IgnisAlatus</option>
      <option value="Skywalker">Skywalkers ‚Äì Flumplux</option>
      <option value="Umbrowalker ‚Äì Shlurp">Umbrowalker ‚Äì Shlurp</option>
      <option value="Elfo da profundeza">Glublorp ‚Äì Elfo da profundeza</option>
      <option value="Trit√£o">Glubrust ‚Äì Trit√£o</option>
      <option value="Shrivvel ‚Äì Pele Palida">Shrivvel ‚Äì Pele Palida</option>
      <option value="Gronklech ‚Äì Durock">Gronklech ‚Äì Durock</option>
    </select>
  </div>

  <!-- Passado -->
  <div style="flex: 1; min-width: 0; display: flex; flex-direction: column;">
    <label for="past" style="font-size: 14px; margin-bottom: 4px; color: red;">Passado:</label>
    <select id="past" name="past" required
            style="padding: 6px 8px; font-size: 14px; border: 1px solid #aaa; border-radius: 5px; width: 100%;">
      <option value="">Selecione o Passado</option>
      <option value="Alde√£o">Alde√£o</option>
      <option value="Arauto">Arauto</option>
      <option value="Arqueiro">Arqueiro</option>
      <option value="Assassino">Assassino</option>
      <option value="Assombra√ß√£o">Assombra√ß√£o</option>
      <option value="Atirador">Atirador</option>
      <option value="Bar√£o">Bar√£o</option>
      <option value="B√°rbaro">B√°rbaro</option>
      <option value="Bardo">Bardo</option>
      <option value="Bruxo">Bruxo</option>
      <option value="Carpinteiro">Carpinteiro</option>
      <option value="Catador">Catador</option>
      <option value="Colosso">Colosso</option>
      <option value="Conjurador">Conjurador</option>
      <option value="Costeiro">Costeiro</option>
      <option value="Criatura">Criatura</option>
      <option value="Duelista">Duelista</option>
      <option value="Escudeiro">Escudeiro</option>
      <option value="Especialista">Especialista</option>
      <option value="Espectro">Espectro</option>
      <option value="Espiritualista">Espiritualista</option>
      <option value="Fera">Fera</option>
      <option value="Ferreiro">Ferreiro</option>
      <option value="Forasteiro">Forasteiro</option>
      <option value="Glacinata">Glacinata</option>
      <option value="Guerreiro">Guerreiro</option>
      <option value="Hemomantico">Hemomantico</option>
      <option value="Imitador">Imitador</option>
      <option value="Ju√≠z">Ju√≠z</option>
      <option value="Lacaio">Lacaio</option>
      <option value="Ladr√£o">Ladr√£o</option>
      <option value="Louco">Louco</option>
      <option value="Mago">Mago</option>
      <option value="Malabarista">Malabarista</option>
      <option value="Marinheiro">Marinheiro</option>
      <option value="Masoquista">Masoquista</option>
      <option value="M√©dico">M√©dico</option>
      <option value="Mendigo">Mendigo</option>
      <option value="Monge">Monge</option>
      <option value="Naturalista">Naturalista</option>
      <option value="Nobre">Nobre</option>
      <option value="Perseguidor">Perseguidor</option>
      <option value="Pervertido">Pervertido</option>
      <option value="Pescador">Pescador</option>
      <option value="Pirata">Pirata</option>
      <option value="Prefeito">Prefeito</option>
      <option value="Prisioneiro">Prisioneiro</option>
      <option value="Profanado">Profanado</option>
      <option value="Protetor">Protetor</option>
      <option value="Pugilista">Pugilista</option>
      <option value="Revivido">Revivido</option>
      <option value="Samurai">Samurai</option>
      <option value="Sacerdote">Sacerdote</option>
      <option value="Soberano">Soberano</option>
      <option value="Taverneiro">Taverneiro</option>
      <option value="Tormentalista">Tormentalista</option>
    </select>
  </div>

</div>
<div class="stat-container">
  <img id="race-image" src="imagens/Ra√ßas/sua ra√ßa.png" alt="Ra√ßa">
  <img id="past-image" src="imagens/pass/seu passado.png" alt="Passado">
</div>
    <div class="prompt-wrapper">
  <button class="toggle-prompt-btn" onclick="togglePromptBox()">‚úèÔ∏èCriar Token</button>

  <div class="prompt-gerador-box hidden" id="promptBox">
    <label for="descricao-personagem">Apar√™ncia do Token do personagem:</label>
<p style="background: #fff8e1; color: #8a6d3b; border: 1px solid #ffe0b2;
   padding: 8px 12px; border-radius: 5px; font-size: 12px;
   margin-bottom: 15px; line-height: 1.4; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto;">
  ‚ö†Ô∏è Escolha a <strong>ra√ßa</strong> e o <strong>passado</strong> primeiro. Essas escolhas ser√£o consideradas na hora de gerar o visual.
  O bot√£o ir√° te direcionar para o <strong>ChatGPT</strong>, mas o prompt tamb√©m funciona no <strong>Copilot</strong>.
</p>


<textarea id="descricao-personagem" placeholder="Ex: Um elfo de pele escarlate, cabelo negro, vestindo armadura de ossos antigos e segurando um arco detalhado... Descreva cores, roupas e objetos para um resultado melhor."></textarea>
    <button onclick="gerarPromptPersonagem()">Gerar Token</button>
  </div>
</div>
          <div class="content">
            
            <!-- outros conte√∫dos -->
            <div class="bonus-container">
    <h2 class="resistencia-index">Resist√™ncia: N/A</h2> 

<div class="bonus-subsection">
  <h3 class="especializacao_titulo5" onclick="alternarTextoBonus(5)" id="tituloBonus5">Bonus de Ra√ßa</h3>
  <div class="bonusTexto5 bonus-texto" id="textoBonus5" style="display:block;">
          <h4 class="Bonus-talento-tex" onclick="toggleMenu()">Talento: N/A</h4>

    <h4 class="Bonus-race-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/como-jogar/', '_blank')">B√¥nus de Ra√ßa: N/A</h4>
    <h4 class="Bonus-passiva-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/ainda-em-criacao-passivas/', '_blank')">Passiva: N/A</h4>
    <h4 class="Bonus-magia-tex" onclick="window.open('https://terrasdecalistoficha.wordpress.com/magias/', '_blank')">Magia: N/A</h4>
  </div>
</div>





<!-- Essa parte representa os 3 b√¥nus do passado -->
<!-- Bot√£o com texto "B√¥nus de Passado" -->
 <h4 class="especializacao_titulo" id="tituloBonusPassado">B√¥nus de Passado: N/A</h4>
     <div id="textoBonusPassado" class="bonus-passado-section"></div>


<div class="bonus-subsection">
  <h3 class="especializacao_titulo4" onclick="alternarTextoBonus(4)" id="tituloBonus4">
Bonus por N√≠veis Do Personagem  </h3>
  <div class="bonusTexto4 bonus-texto" id="textoBonus4" style="display:none;">
    
<p class="bonus4-paragraph"><strong>N√≠vel 1:</strong> Escolha sua <strong class="gold-gradient">Especializa√ß√£o principal</strong>. Essa escolha define suas habilidades √∫nicas principais e o caminho que seu personagem seguir√°.</p>
 <p class="bonus4-paragraph"> Al√©m disso, escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 de dano com sua <strong>arma favorita</strong> (n√£o pode ser trocada depois)</li>
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (n√≠vel 1)</li>
    </ul>

    <h4>Escolha sua especializa√ß√£o principal</h4>
<p>Sua especializa√ß√£o principal n√£o pode ser mudada.</p>
<section>

    <div class="bonus-subsection">
      <h3 class="bonusTexto1 especializacao_titulo1" onclick="alternarTextoBonus(1)" id="tituloBonus1"></h3>
      <div class="bonusTexto1 bonus-texto" id="textoBonus1" style="display:none;"></div>
    </div>

    <div class="bonus-subsection">
      <h3 class="especializacao_titulo2" onclick="alternarTextoBonus(2)" id="tituloBonus2"></h3>
      <div class="bonusTexto2 bonus-texto" id="textoBonus2" style="display:none;"></div>
    </div>

    <div class="bonus-subsection">
      <h3 class="especializacao_titulo3" onclick="alternarTextoBonus(3)" id="tituloBonus3"></h3>
      <div class="bonusTexto3 bonus-texto" id="textoBonus3" style="display:none;"></div>
    </div>

  
</section>
    
<div id="popupOverlay" class="popup-overlay" style="display: none;"></div>

<!-- Popup central -->
<div id="popupEspecializacoes" class="popup-especializacoes" style="display: none;">
  <!-- Bot√£o de fechar interno -->
  <button class="fechar-popup" onclick="fecharPopupEspecializacoes()">‚úï</button>
  <h2>Especializa√ß√µes por Passado</h2>
  <div class="especializacoes-grid" id="especializacoesContainer">
    <!-- Conte√∫do JS -->
  </div>
</div>

    <p class="bonus4-paragraph"><strong>N√≠vel 2:</strong> Escolha um atributo entre <strong>Brutalidade, Agilidade, Determina√ß√£o, Preserva√ß√£o, Liberta√ß√£o ou Conex√£o</strong>. Voc√™ recebe <strong>+2 em testes</strong> com o atributo escolhido.</p>
<p class="bonus4-paragraph"><strong>N√≠vel 3:</strong> <strong class="gold-gradient">Especializa√ß√£o principal</strong></p>

    <p class="bonus4-paragraph"><strong>N√≠vel 4:</strong> Escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">+2 em <strong>Esquiva</strong></li>
      <li class="bonus4-list-item"><strong>Resist√™ncia</strong> a um tipo de dano</li>
    </ul>
<p class="bonus4-paragraph">
  <strong>N√≠vel 5:</strong>
  <strong class="gold-gradient">Especializa√ß√£o principal</strong>
</p>    
    <p class="bonus4-paragraph"><strong>N√≠vel 6:</strong> Escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+1d6 de dano com sua <strong>arma favorita</strong> (n√£o pode ser trocada depois)</li>
      <li class="bonus4-list-item">Ganha uma <strong>Passiva</strong> (n√≠vel 1 a 3)</li>
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (n√≠vel 1 a 3)</li>
    </ul>

    <p class="bonus4-paragraph"><strong>N√≠vel 7:</strong> Escolha uma habilidade de n√≠vel 1 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>

<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

    <p class="bonus4-paragraph"><strong>N√≠vel 8:</strong> Escolha uma habilidade de n√≠vel 3 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>
    
<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

<p class="bonus4-paragraph"><strong>N√≠vel 9:</strong> <strong class="gold-gradient">Especializa√ß√£o principal</strong></p>
    <p class="bonus4-paragraph"><strong>N√≠vel 10:</strong> Escolha sua <strong>Voca√ß√£o:</strong> F√©, Poder, Desconhecido ou Caos. Ganha <strong>2 resist√™ncias</strong> a tipos de dano ligados ao elemento escolhido.</p>

    <p class="bonus4-paragraph"><strong>N√≠vel 11:</strong> Escolha uma habilidade de n√≠vel 5 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>

<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

    <p class="bonus4-paragraph"><strong>N√≠vel 12:</strong> <strong>Despertar da Ra√ßa.</strong> Recebe +2 em testes com <strong>Talentos ou Passivas raciais</strong>.</p>
<p class="bonus4-paragraph"><strong>N√≠vel 13:</strong> <strong class="gold-gradient">Especializa√ß√£o principal</strong></p>
    <p class="bonus4-paragraph"><strong>N√≠vel 14:</strong> Escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">Libera uma <strong>Magia</strong> (n√≠vel 2 a 4)</li>
      <li class="bonus4-list-item">+2 em <strong>Armadura, Esquiva</strong> ou <strong>Resist√™ncia</strong> a um tipo de dano</li>
      <li class="bonus4-list-item">Ganha +1 por turno (<strong>Ataque Extra</strong>, A√ß√£o Completa ou A√ß√£o de Movimento)</li>
    </ul>

    <p class="bonus4-paragraph"><strong>N√≠vel 15:</strong> Escolha uma habilidade de n√≠vel 9 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>
    
<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

<p class="bonus4-paragraph"><strong>N√≠vel 16:</strong> <strong class="gold-gradient">Especializa√ß√£o principal</strong></p>
    <p class="bonus4-paragraph"><strong>N√≠vel 17:</strong> Escolha uma habilidade de n√≠vel 13 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>

<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

    <p class="bonus4-paragraph"><strong>N√≠vel 18:</strong> Escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">+2 em <strong>Armadura</strong></li>
      <li class="bonus4-list-item">+2 em <strong>Esquiva</strong></li>
      <li class="bonus4-list-item"><strong>Resist√™ncia</strong> a um tipo de dano</li>
    </ul>

    <p class="bonus4-paragraph"><strong>N√≠vel 19:</strong> Escolha uma habilidade de n√≠vel 16 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>
    
<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

<p class="bonus4-paragraph"><strong>N√≠vel 20:</strong> <strong class="gold-gradient">Especializa√ß√£o principal</strong></p>
    <p class="bonus4-paragraph"><strong>N√≠vel 21:</strong> Escolha uma habilidade de n√≠vel 20 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>
    
<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

<p class="bonus4-paragraph"><strong>N√≠vel 22:</strong> <strong class="gold-gradient">Especializa√ß√£o principal</strong></p>
    <p class="bonus4-paragraph"><strong>N√≠vel 23:</strong> Escolha uma habilidade de n√≠vel 22 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>

<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

    <p class="bonus4-paragraph"><strong>N√≠vel 24:</strong> Escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">Ganha uma <strong>Passiva</strong> (n√≠vel 3 a 7)</li>
      <li class="bonus4-list-item">+1d6 de dano com sua <strong>arma favorita</strong> (n√£o pode ser trocada depois)</li>
      <li class="bonus4-list-item"><strong>Resist√™ncia</strong> a um novo tipo de dano</li>
    </ul>
<p class="bonus4-paragraph"><strong>N√≠vel 25:</strong> <strong class="gold-gradient">Especializa√ß√£o principal</strong></p>
    <p class="bonus4-paragraph"><strong>N√≠vel 26:</strong> Escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">1 <strong>Ataque Extra</strong> por turno</li>
      <li class="bonus4-list-item">1 Magia nova (n√≠vel 4‚Äì5)</li>
      <li class="bonus4-list-item">+1d12 de dano com <strong>arma favorita</strong></li>
    </ul>

    <p class="bonus4-paragraph"><strong>N√≠vel 27:</strong> Escolha uma habilidade de n√≠vel 25 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>

<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

    <p class="bonus4-paragraph"><strong>N√≠vel 28:</strong> Escolha uma habilidade de n√≠vel 1, 3, 5 ou 9 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>

<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

    <p class="bonus4-paragraph"><strong>N√≠vel 29:</strong> Escolha uma habilidade de n√≠vel 13, 16, 20 ou 22 de    <strong>
    outra <span class="prismatic2">especializa√ß√£o</span> (√∫nica), de qualquer passado</strong>.</p>

<!-- Bot√£o que abre o popup -->
<button class="botao-abrir-especializacoes prismatic2">Ver Todas as Especializa√ß√µes</button>

    <p class="bonus4-paragraph"><strong>N√≠vel 30:</strong> Escolha uma entre 3 op√ß√µes:</p>
    <ul class="bonus4-paragraph">
      <li class="bonus4-list-item">1 <strong>Ataque Extra</strong> por turno</li>
      <li class="bonus4-list-item">1 Magia nova (n√≠vel 5‚Äì9)</li>
      <li class="bonus4-list-item">+1d20 de dano com <strong>arma favorita</strong></li>
    </ul>

  </div>
</div>


              
                       <!-- Bot√£o para abrir o popup de itens -->








              <!-- Popup com grid de itens -->
              <!-- Popup com grid de itens -->
              <div id="itemSelectPopup" class="popup hidden">
                <div class="popup-content scrollable-grid">
                  <button id="closeItemPopup">Fechar</button>
                  <h2>Escolha um Item</h2>
                  
                  <select id="itemFilter">
                    <option value="Todos">Todos os Tipos</option>
                  </select>
              
                  <div class="item-grid" id="itemGrid">
                    <!-- Itens inseridos por JS -->
                  </div>
                </div>
              </div>
              


              
            
              
          </div>

    
          
            
            

     
     
        
            <!-- outros conte√∫dos -->
          </div>
        </div>
      </div>

    <!-- Se√ß√£o da direita -->

    <div id="right-section">
<div id="character-info-section-2" style="margin: 20px 0; font-family: Arial, sans-serif;">
  <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
    <!-- Bot√£o 1: AVISO -->
    <button onclick="toggleSectionInfo('expandableSectionInfo2a')"
      style="background: linear-gradient(to right, #ff4d4d, #ff1a1a); color: #fff; padding: 10px 20px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);">
      AVISO!
    </button>

    <!-- Bot√£o 2: APOIAR -->
    <button onclick="toggleSectionInfo('expandableSectionInfo2b')"
      style="background: linear-gradient(to right, #ff4d4d, #ff1a1a); color: #fff; padding: 10px 20px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);">
      APOIAR!
    </button>
  </div>

  <!-- Conte√∫do do popup AVISO -->
  <div id="expandableSectionInfo2a"
    style="display: none; margin-top: 15px; background-color: #f9f9f9; padding: 20px; border-radius: 10px; border: 1px solid #ccc;">
          <h1 class="Aviso" style="font-size: 11px;">
      A apar√™ncia do seu personagem ser√° uma fus√£o entre seu passado e sua ra√ßa ‚Äî imagine-o livremente!<br><br>
      No in√≠cio da cria√ß√£o do personagem, todos os atributos BRU, AGI, DET, PRE, LIB e CNX come√ßam com o valor 14,
      mas voc√™ pode redistribu√≠-los como quiser, respeitando o m√≠nimo de 8 e o m√°ximo de 99 para cada um, mantendo o personagem no n√≠vel 1.
    </h1>
  </div>

  <!-- Conte√∫do do popup APOIAR -->
  <div id="expandableSectionInfo2b"
    style="display: none; margin-top: 10px; background-color: #fff; padding: 20px; border-radius: 12px; border: 1px solid #ccc; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 520px; font-size: 14px; line-height: 1.6; color: #333;">
    <h1 style="font-size: 14px; color: #444; margin-bottom: 15px;">
      üíñ Ajude o projeto com um Pix!<br>
      Aponte a c√¢mera para o QR Code abaixo:
    </h1>
    <img src="imagens/qrcode-inter.png" alt="QR Code de apoio via Pix Inter"
      style="max-width: 200px; display: block; margin: 0 auto 10px; border-radius: 8px; border: 1px solid #ddd;">
    <p
      style="text-align: center; font-size: 13px; color: #111; background-color: #f1f1f1; padding: 8px; border-radius: 6px; margin-top: 10px; word-break: break-word;">
      <strong>Chave Pix:</strong> gustavo.s.silvasantos2@gmail.com
    </p>
  </div>
</div>

       
        
        <form id="character-form">



<!-- Popup de descri√ß√£o -->
<div id="itemDescPopup" class="popup hidden">
  <img id="itemDescImage" src="" alt="Item">
  <div id="itemDescText"></div>
  <div id="itemDescTitle"></div>

  <!-- Novas informa√ß√µes -->
  <div id="itemDescDamageType"></div>
  <div id="itemDescElementalDamage"></div>
  <div id="itemDescDamageDice"></div>
  <div id="itemDescRange"></div>
  <div id="itemDescCritical"></div>
  <div id="itemDescEquipBonus"></div>

  <button id="equipItem"></button>
  <button id="closeDescPopup">Fechar</button>
</div>



<style>
/* =========================== */
/*   CSS EXCLUSIVO DO POPUP    */
/* =========================== */
#tcOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial;
}

#tcOverlay .tc-popup {
  background: #ffffff;
  border-radius: 20px;
  width: 94%;
  max-width: 1000px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 12px 40px rgba(0, 0, 0, .4);
}

/* Cabe√ßalho fixo */
#tcOverlay .tc-header {
  flex: 0 0 auto;
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  background: #101926;
  color: #fff;
}

/* Filtros fixos */
#tcOverlay .tc-controls {
  flex: 0 0 auto;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  background: #0f1724;
  padding: 10px 14px;
}

/* √Årea scroll√°vel */
#tcOverlay .tc-body {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 14px;
}

/* Bot√µes e tabs */
#tcOverlay .tc-tabs { display: flex; gap: 8px; }
#tcOverlay .tc-tab {
  border: 0;
  padding: 8px 12px;
  border-radius: 10px;
  background: #22324a;
  color: #dfe7ff;
  font-weight: 700;
  cursor: pointer;
}
#tcOverlay .tc-tab.active { background: #c0191f; color: #fff; }
#tcOverlay .tc-close {
  border: 0;
  background: #2a3a53;
  color: #fff;
  border-radius: 10px;
  padding: 8px 12px;
  cursor: pointer;
}

/* Inputs */
#tcOverlay .tc-select,
#tcOverlay .tc-search {
  appearance: none;
  border: 0;
  border-radius: 10px;
  padding: 10px 12px;
  background: #1a2333;
  color: #eaf0ff;
  min-width: 140px;
  flex: 1;
}
#tcOverlay .tc-content{background:#0f1724;padding:16px;overflow:auto;max-height:calc(90vh - 114px)}
/* grid 2 colunas fixo */
#tcOverlay .tc-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
/* card compacto */
#tcOverlay .tc-card{background:#101a2b;border:1px solid #1f2b44;border-radius:16px;padding:10px;cursor:pointer;transition:transform .1s ease,box-shadow .1s ease;color:#e7eeff}
#tcOverlay .tc-card:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.3)}
#tcOverlay .tc-img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:12px;background:#0b1220}
#tcOverlay .tc-name{margin:8px 0 4px;font-weight:800;font-size:15px;line-height:1.2}
#tcOverlay .tc-meta{font-size:12px;color:#b7c4e1}

#tcOverlay .tc-pagination{display:flex;justify-content:center;gap:6px;margin-top:14px}
#tcOverlay .tc-page{border:0;background:#1a2333;color:#eaf0ff;border-radius:8px;padding:8px 10px;cursor:pointer}
#tcOverlay .tc-page.active{background:#c0191f}

/* Detalhe */
#tcOverlay .tc-detail{position:fixed;inset:0;background:rgba(0,0,0,.66);display:none;align-items:center;justify-content:center;z-index:10000}
#tcOverlay .tc-box{background:#ffffff;border-radius:22px;width:92%;max-width:760px;max-height:88vh;overflow:auto;color:#1a1a1a}
#tcOverlay .tc-box-head{padding:18px 18px 0}
#tcOverlay .tc-detail-img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:18px}
#tcOverlay .tc-title{margin:14px auto 6px;text-align:center;background:#9b0b0f;color:#fff;border-radius:999px;padding:10px 16px;font-size:22px;font-weight:800;width:fit-content}
#tcOverlay .tc-sub{margin:0 auto 14px;text-align:center;color:#9b0b0f;font-style:italic}
#tcOverlay .tc-section{padding:0 18px 16px}
#tcOverlay .tc-h2{margin:10px 0 8px;font-size:16px;color:#0f172a}
#tcOverlay .tc-desc{color:#222;line-height:1.55}

#tcOverlay .tc-table{width:100%;border-collapse:collapse;margin-top:10px}
#tcOverlay .tc-table th,#tcOverlay .tc-table td{border:1px solid #e5e7eb;padding:10px;text-align:left}
#tcOverlay .tc-table th{background:#f4f6fb;font-weight:700;color:#111827}

#tcOverlay .tc-good{color:#16a34a;font-weight:900;margin:8px 0 4px}
#tcOverlay .tc-bad{color:#dc2626;font-weight:900;margin:14px 0 4px}

#tcOverlay .tc-actions{display:flex;gap:8px;padding:0 18px 18px}
#tcOverlay .tc-btn{border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
#tcOverlay .tc-btn.primary{background:#c0191f;color:#fff}
#tcOverlay .tc-btn.ghost{background:#eef2ff;color:#0f172a}

@media (max-width:420px){
  #tcOverlay .tc-title{font-size:18px}
}
  .magias-btn {
    background-image: url('https://raw.githubusercontent.com/GustavoTerrasDeCalisto/RPG_Ficha_Terras_De_Calisto/master/imagens/BotaoMagias.png'); /* link RAW do PNG */
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    width: 220px;   /* ajuste conforme o tamanho real da sua imagem */
    height: 70px;

    border: none;
    padding: 0;
    margin: 16px;
    cursor: pointer;
    background-color: transparent;
    transition: transform 0.1s ease, filter 0.1s ease;
}

.magias-btn:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
}

.magias-btn:active {
    transform: scale(0.95);
    filter: brightness(0.9);
}
/* grid fluido (web) */
#tcOverlay .tc-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 14px;
}
@media (max-width: 640px) {
  #tcOverlay .tc-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
  #tcOverlay .tc-title { font-size: 18px; padding: 8px 14px; }
  #tcOverlay .tc-detail-img { max-width: 160px; }
}
</style>



<button onclick="TC.open()" class="magias-btn"></button>


  
<!-- POPUP -->
<div id="tcOverlay" aria-hidden="true">
  <div class="tc-popup" role="dialog" aria-modal="true">
    <div class="tc-header">
      <div class="tc-tabs">
        <button class="tc-tab active" data-tab="magias">Magias</button>
        <button class="tc-tab" data-tab="passivas">Passivas</button>
        <button class="tc-tab" data-tab="aprendidas">Aprendidas</button>
      </div>
      <button class="tc-close" onclick="TC.close()">Fechar</button>
    </div>

    <div class="tc-controls">
      <select id="tcFiltroElemento" class="tc-select" title="Elemento">
        <option value="">Elemento</option><!-- preenchido via JS -->
      </select>
      <select id="tcFiltroDano" class="tc-select" title="Tipo de dano">
        <option value="">Tipo de dano</option><!-- preenchido via JS -->
      </select>
      <input id="tcBusca" class="tc-search" type="search" placeholder="Buscar por nome (opcional)">
    </div>

    <div id="tcList" class="tc-content">
      <div class="tc-grid" id="tcGrid"></div>
      <div class="tc-pagination" id="tcPaginacao"></div>
    </div>
  </div>

  <!-- Detalhe -->
  <div id="tcDetail" class="tc-detail" onclick="event.target.id==='tcDetail'&&TC.hideDetail()">
    <div class="tc-box" id="tcDetailBox"></div>
  </div>
  
</div>


<!-- SUBSTITUA APENAS O <script> ABAIXO. Deixe seu CSS/HTML e seu DATASET como j√° est√£o. -->
<script>

  /* =========================== */
/*           DATASET           */
/*  (mantenha/ajuste o seu)    */
/* =========================== */

const DATASET = {
  magias: [
    {
      id: "m1",
      nome: "Controle de sangue",
      sub: "Sanguis imperium",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/b3e68955d9f8a0e03e204e80a408e760acffb882_high.webp",
      elemento: "F√©",
      tipoDano: "Sangue",
      descricao: "Controla sangue ao seu alcance e √© necess√°rio estar vendo o sangue, acertando o inimigo e causando 1d12 de dano de Sangue. Caso o inimigo j√° tenha sido acertado, pode mover o pr√≥prio sangue dele causando +1d8.",
      duracao: "Gasta a√ß√£o",
      tagLevel: "Hemomante",
      tagLevelResposta: "N√≠vel 1 ‚Äì Iniciado do Sangue",
      alcance: "5m",
      testeConjurador: "Determina√ß√£o",
      testeAlvo: "Determina√ß√£o"
    },
    {
      id: "m2",
      nome: "Fechar feridas",
      sub: "Prope vulnera",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/07/image.psd-31.png",
      elemento: "F√©",
      tipoDano: "Sangue",
      descricao: "Controla a ferida do alvo podendo fechar errado (‚ÄúProfano‚Äù) para causar 1d8 + 1d6 de sangue. Se for em um aliado, pode escolher a ferida e tentar fechar curando 1d12 de dano. Pode gastar 1 Especial para tentar curar +1d6, ou no m√°ximo o dano da ferida.",
      duracao: "Gasta a√ß√£o",
      tagLevel: "Hemomante",
      tagLevelResposta: "N√≠vel 1 ‚Äì Iniciado do Sangue",
      alcance: "7m",
      testeConjurador: "Determina√ß√£o",
      testeAlvo: "Determina√ß√£o"
    },
    {
      id: "m3",
      nome: "Sangue fervido",
      sub: "Coctum sanguinem",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/06/46c76fb20b8fb9c9ad039f8cf447b2eedd42de81_high.webp",
      elemento: "F√©",
      tipoDano: "Sangue",
      descricao: "Olha para o alvo e o sangue dele come√ßa a evaporar. Necess√°rio estar olhando no olho do alvo para causar 2d10 de dano de Sangue. Toda vez que reconjurar essa magia no mesmo alvo e acertar, causa mais 1d4.",
      duracao: "Gasta a√ß√£o",
      tagLevel: "Hemomante",
      tagLevelResposta: "N√≠vel 2 ‚Äì Guardi√£o Rubro",
      alcance: "2m",
      testeConjurador: "Determina√ß√£o",
      testeAlvo: "Agilidade"
    },
    {
      id: "m66",
      nome: "Olho do Desespero",
      sub: "Oculus Desperatio",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/c2769191832f2f0cbaa350d57f699594073a9ef1_high-1.png",
      elemento: "F√©",
      tipoDano: "Maldi√ß√£o",
      descricao: "O alvo √© atingido por uma maldi√ß√£o que causa desespero profundo. Enquanto estiver sob essa maldi√ß√£o, o alvo sofre desvantagem em todos os testes de Liberta√ß√£o e Preserva√ß√£o.\n\n‚ÄúPara quebrar a maldi√ß√£o, o alvo deve se autoafirmar, dizendo uma frase positiva sobre si mesmo em voz alta, mas deve tamb√©m realizar um teste de Conex√£o com dificuldade 15.‚Äú",
      duracao: "At√© ser quebrado",
      tagLevel: "Maldizente",
      tagLevelResposta: "N√≠vel 1 ‚Äì Aprendiz da Maldi√ß√£o",
      alcance: "6m",
      testeConjurador: "Conex√£o",
      testeAlvo: "Determina√ß√£o"
    },{
    id: "m166",
nome: "Telefone Temporal",
sub: "Tidsmessig Telefon",
img: "/imagens/telefonetemporal.png",
elemento: "Desconhecido",
tipoDano: "Sono",
descricao: `
Um telefone sobrenatural se materializa diante do conjurador, permitindo discar para um ponto em outra √©poca. Quem atender a liga√ß√£o √© envolvido por ecos do tempo e deve realizar um teste de <strong>Liberta√ß√£o</strong> contra o conjurador. Se falhar, adormece por <strong>1 turno</strong> e sofre <strong>1d6 de dano de Sono</strong> causado pelos ecos on√≠ricos.  

<strong>Efeitos do Telefone Temporal:</strong>
<ul>
  <li><strong>Liga√ß√£o Fantasma:</strong> O conjurador pode transmitir uma mensagem curta para um ser do passado ou futuro.</li>
  <li><strong>Sonho Invasivo:</strong> Se o atendente dormir, o conjurador pode plantar uma vis√£o ou mem√≥ria ilus√≥ria, que permanece ap√≥s o despertar.</li>
  <li><strong>Interfer√™ncia Temporal:</strong> Caso o teste seja um <em>fracasso cr√≠tico</em>, uma entidade perdida no tempo responde ao chamado, obrigando o conjurador a realizar um teste de <strong>Liberta√ß√£o</strong>. Se falhar, o conjurador sofre <strong>1d6 de dano ps√≠quico</strong> devido ao contato inst√°vel.</li>
</ul>
`,
duracao: "1d4 turnos",
tagLevel: "Apanhador",
tagLevelResposta: "N√≠vel 5 ‚Äì Profeta das Vis√µes On√≠ricas",
alcance: "Ilimitado (atrav√©s do tempo)",
testeConjurador: "Conex√£o",
testeAlvo: "Liberta√ß√£o"
},
    {
      id: "m4",
      nome: "Reflex√£o de Eclipse",
      sub: "Eklipsens Refleksjon",
      img: "https://terrasdecalistoficha.wordpress.com/wp-content/uploads/2024/10/4fe807a14c95007000191d1e5ed588e0d965b75a_high.png",
      elemento: "Desconhecido",
      tipoDano: "Eclipse",
      descricao: `
O conjurador cria uma imagem reflexiva de si mesmo que ataca o alvo. O alvo deve fazer um teste de <strong>Liberta√ß√£o</strong>. Se falhar, o alvo sofre <strong>1d10 de dano de Eclipse</strong> e recebe um b√¥nus de <strong>+1d6 em ataques</strong> durante <strong>2 turnos</strong>. O clone pode atacar os aliados no pr√≥ximo turno, obrigando-os a fazer um teste de <strong>Agilidade</strong> para n√£o sofrerem dano.

<strong>Condi√ß√µes durante o eclipse:</strong>
<ul>
  <li><strong>Invoca√ß√£o Sombria Adicional:</strong> Durante o eclipse, o conjurador pode criar um segundo clone reflexivo que ataca os inimigos por um turno adicional.</li>
  <li><strong>Distor√ß√£o de Percep√ß√£o:</strong> Todos os alvos pr√≥ximos ao clone t√™m dificuldade de foco, recebendo <strong>-1 em Conex√£o</strong> para resistir aos ataques do clone.</li>
</ul>
`,
      duracao: "2 turnos",
      tagLevel: "Aspirante do Crep√∫sculo",
      tagLevelResposta: "N√≠vel 1 ‚Äì Aspirante do Crep√∫sculo",
      alcance: "30m",
      testeConjurador: "Conex√£o",
      testeAlvo: "Liberta√ß√£o"
    }
  ],
  passivas: [
    {
      id:"p1",
      nome:"Consumir",
      sub:"Consumere",
      img:"https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=800&auto=format&fit=crop",
      elemento:"F√©",
      tipoDano:"Sangue",
      descricao:"Seu personagem fica faminto e se alimenta do alvo, curando um valor de vida ou sanidade.",
      positivo:"Assume postura assassina e morde o alvo, tentando dilacer√°-lo e consumir o valor do dano (opcional). Dano 1d12+1d4 (vida) e 1d6+1d4 (sanidade).",
      negativo:"Dano e cura s√£o acertos separados. Em falha, sofre metade do dano causado e pode ficar b√™bado pelo gosto amargo do sangue.",
      duracao:"Um turno",
      nivel:"2",
      alcance:"Vis√≠vel",
      testeConjurador:"Sobreviv√™ncia",
      testeAlvo:"Agilidade"
    },
    {
      id:"p2",
      nome:"Pele de Gelo",
      sub:"Cutis Glacies",
      img:"https://images.unsplash.com/photo-1483347756197-71ef80e95f73?q=80&w=800&auto=format&fit=crop",
      elemento:"Poder",
      tipoDano:"Gelo",
      descricao:"Uma camada fria protege sua pele.",
      positivo:"+2 DEF contra ataques f√≠sicos enquanto estiver ativo.",
      negativo:"Recebe +1 de dano de Fogo.",
      duracao:"Cena",
      nivel:"1",
      alcance:"Passiva",
      testeConjurador:"‚Äî",
      testeAlvo:"‚Äî"
    }
  ]
};
// ===========================
//  L√ìGICA DO UI  (corrigida)
// ===========================
const TC = (() => {
  // LocalStorage com namespace por host+path para n√£o conflitar com outros saves do seu site
  const STORAGE_NS = "tdc:grimorio";
  const LS_KEY = `${STORAGE_NS}:${location.host}${location.pathname}:ids`;

  // Migra√ß√£o autom√°tica do chave antiga, se existir
  try {
    const legacy = localStorage.getItem("tc_grimorio_ids");
    if (legacy && !localStorage.getItem(LS_KEY)) {
      localStorage.setItem(LS_KEY, legacy);
    }
  } catch (e) { /* ignore */ }

  let state = {
    tab: "magias",
    page: 1,
    perPage: 20,
    elemento: "",
    dano: "",
    busca: ""
  };

  // Helpers LocalStorage
  const getLearned = () => {
    try { return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); }
    catch { return []; }
  };
  const setLearned = (arr) => localStorage.setItem(LS_KEY, JSON.stringify(arr));
  const isLearned  = (id) => getLearned().includes(id);
  const toggleLearn = (id) => {
    const cur = new Set(getLearned());
    cur.has(id) ? cur.delete(id) : cur.add(id);
    setLearned([...cur]);
    render();           // atualiza listas
    showDetailById(id); // mant√©m bot√£o do detalhe sincronizado
  };

  // Open / Close
  function open(){
    document.getElementById("tcOverlay").style.display = "flex";
    mountFilters();
    render();
  }
  function close(){
    document.getElementById("tcOverlay").style.display = "none";
    hideDetail();
  }

  // Mount dynamic filter options
  function mountFilters(){
    const elSel = document.getElementById("tcFiltroElemento");
    const dnSel = document.getElementById("tcFiltroDano");
    const all = [...DATASET.magias, ...DATASET.passivas];

    const elementos = Array.from(new Set(all.map(x=>x.elemento).filter(Boolean))).sort();
    const danos = Array.from(new Set(all.map(x=>x.tipoDano).filter(Boolean))).sort();

    elSel.innerHTML = '<option value="">Elemento</option>' + elementos.map(v=>`<option>${v}</option>`).join('');
    dnSel.innerHTML = '<option value="">Tipo de dano</option>' + danos.map(v=>`<option>${v}</option>`).join('');
  }

  // Data source by tab
  function currentList(){
    if(state.tab === "magias") return DATASET.magias;
    if(state.tab === "passivas") return DATASET.passivas;
    // aprendidas
    const learned = new Set(getLearned());
    return [...DATASET.magias, ...DATASET.passivas].filter(x=>learned.has(x.id));
  }

  // Filters
  function applyFilters(list){
    const q = state.busca.toLowerCase();
    return list.filter(it=>{
      if(state.elemento && it.elemento !== state.elemento) return false;
      if(state.dano && it.tipoDano !== state.dano) return false;
      if(q && !it.nome.toLowerCase().includes(q)) return false;
      return true;
    });
  }

  // Render grid & pagination
  function render(){
    const grid = document.getElementById("tcGrid");
    const pag  = document.getElementById("tcPaginacao");

    const base = currentList();
    const list = applyFilters(base);
    const totalPages = Math.max(1, Math.ceil(list.length / state.perPage));
    if(state.page > totalPages) state.page = 1;

    const slice = list.slice((state.page-1)*state.perPage, state.page*state.perPage);

    grid.innerHTML = slice.map(it => `
      <article class="tc-card" onclick="TC.showDetail('${it.id}')">
        <img class="tc-img" src="${it.img || ''}" alt="">
        <div class="tc-name">${it.nome}</div>
        <div class="tc-meta">${it.tipoDano || '-'} ‚Ä¢ ${it.elemento || '-'}</div>
      </article>
    `).join("");

    // pagination
    pag.innerHTML = "";
    for(let i=1;i<=totalPages;i++){
      const b = document.createElement("button");
      b.className = "tc-page" + (i===state.page ? " active" : "");
      b.textContent = i;
      b.onclick = () => { state.page = i; render(); };
      pag.appendChild(b);
    }

    // tabs active state
    document.querySelectorAll("#tcOverlay .tc-tab").forEach(b=>b.classList.remove("active"));
    document.querySelector(`#tcOverlay .tc-tab[data-tab="${state.tab}"]`)?.classList.add("active");
  }

  // DETAIL
  function showDetailById(id){
    const it = [...DATASET.magias, ...DATASET.passivas].find(x=>x.id===id);
    if(it) showDetail(id);
  }
  function showDetail(id){
    const it = [...DATASET.magias, ...DATASET.passivas].find(x=>x.id===id);
    if(!it) return;

    const isPassiva = DATASET.passivas.some(p=>p.id===id);
    const box = document.getElementById("tcDetailBox");
    const learned = isLearned(id);

    const top =
      `<div class="tc-box-head">
         <img class="tc-detail-img" src="${it.img||''}" alt="">
         <div class="tc-title">${it.nome}</div>
         ${it.sub ? `<div class="tc-sub">${it.sub}</div>` : ""}
       </div>`;

   const main = `
<div class="tc-section">
  <div class="tc-h2">${isPassiva ? "Descri√ß√£o" : "O que acontece quando usa?"}</div>
  <div class="tc-desc">${it.descricao || ""}</div>

  <table class="tc-table" style="margin-top:14px">
    <thead>
      <tr>
        <th>Dura√ß√£o</th>
        <th>${isPassiva ? "N√≠vel" : (it.tagLevel || "N√≠vel")}</th>
        <th>Alcance</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>${it.duracao || "-"}</td>
        <td>${isPassiva ? it.nivel : (it.tagLevelResposta || it.nivel) || "-"}</td>
        <td>${it.alcance || "-"}</td>
      </tr>
    </tbody>
  </table>

  ${isPassiva ? `
    <div class="tc-good">Positivo</div>
    <div class="tc-desc">${it.positivo || "-"}</div>
    <div class="tc-bad">Negativo</div>
    <div class="tc-desc">${it.negativo || "-"}</div>
  ` : ""}

  <div class="tc-h2">Informa√ß√µes</div>
  <div class="tc-desc"><b>Tipo de dano:</b> ${it.tipoDano || "-"}</div>
  <div class="tc-desc"><b>Elemento:</b> ${it.elemento || "-"}</div>
  <div class="tc-desc"><b>Teste do conjurador:</b> ${it.testeConjurador || "-"}</div>
  <div class="tc-desc"><b>Teste do Alvo:</b> ${it.testeAlvo || "-"}</div>
</div>`;

    const actions =
      `<div class="tc-actions">
         <button class="tc-btn primary" onclick="TC.toggleLearn('${id}')">${learned ? "Remover do Grim√≥rio" : "Aprender"}</button>
         <button class="tc-btn ghost" onclick="TC.hideDetail()">Fechar</button>
       </div>`;

    box.innerHTML = top + main + actions;
    document.getElementById("tcDetail").style.display = "flex";
    setHash(id);
  }
  function hideDetail(){
    document.getElementById("tcDetail").style.display = "none";
    clearHash(); // <-- corrigido (era clearhash)
  }

  // Listeners (tabs + filtros + busca)
  document.addEventListener("click", (e)=>{
    const t = e.target.closest("#tcOverlay .tc-tab");
    if(!t) return;
    state.tab = t.dataset.tab; state.page = 1; render();
  });
  document.getElementById("tcFiltroElemento").addEventListener("change", e=>{ state.elemento = e.target.value; state.page=1; render(); });
  document.getElementById("tcFiltroDano").addEventListener("change", e=>{ state.dano = e.target.value; state.page=1; render(); });
  document.getElementById("tcBusca").addEventListener("input", e=>{ state.busca = e.target.value; state.page=1; render(); });

  // ===========================
  //   SUPORTE A HYPERLINK
  //   #tc=<id>   ou   ?tc=<id>
  //   (fallback: #<id>, ?id=<id>, ?magia=<id>, ?passiva=<id>)
  // ===========================

  function normalizeId(str){
    if(!str) return "";
    return String(str)
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "")
      .trim()
      .toLowerCase();
  }

  function idFromURL(){
    const h = window.location.hash.replace(/^#/, "");
    const qs = new URLSearchParams(window.location.search);

    let id = null;
    if (h) {
      id = h.startsWith("tc=") ? decodeURIComponent(h.slice(3)) : decodeURIComponent(h);
    }
    id = id || qs.get("tc") || qs.get("id") || qs.get("magia") || qs.get("passiva");
    return id || null;
  }

  function setHash(id){
    const url = new URL(location.href);
    url.hash = `tc=${encodeURIComponent(id)}`;
    history.replaceState(null, "", url.href);
  }

  function clearHash(){
    if (location.hash.startsWith("#tc=")) {
      history.replaceState(null, "", location.pathname + location.search);
    }
  }

  function openById(id){
    if(!id) return;
    const allItems = [...DATASET.magias, ...DATASET.passivas];
    const norm = normalizeId(id);

    const candidates = [
      norm,
      norm.replace(/\s+/g, "_"),
      norm.replace(/\s+/g, ""),
      norm.replace(/_/g, "")
    ];

    const item = allItems.find(x =>
      candidates.some(c => normalizeId(x.id) === c || normalizeId(x.nome) === c)
    );

    if(!item){
      console.warn("TC: item n√£o encontrado para id:", id);
      return;
    }

    // Define aba correta
    if(DATASET.magias.some(m => m.id === item.id)){
      state.tab = "magias";
    } else if(DATASET.passivas.some(p => p.id === item.id)){
      state.tab = "passivas";
    } else {
      state.tab = "aprendidas";
    }

    open();
    showDetail(item.id);

    document.querySelectorAll("#tcOverlay .tc-tab").forEach(b=>b.classList.remove("active"));
    document.querySelector(`#tcOverlay .tc-tab[data-tab="${state.tab}"]`)?.classList.add("active");
  }

  function syncFromURL(){
    const id = idFromURL();
    if (id) openById(id);
  }

  // --- Inicializa√ß√£o ---
  window.addEventListener("DOMContentLoaded", () => {
    syncFromURL();

    // Captura clique em qualquer link com #tc= ou #id ou ?tc=
    document.body.addEventListener("click", e => {
      const a = e.target.closest("a[href]");
      if (!a) return;

      try {
        const url = new URL(a.href, location.href);
        let tc = null;

        // Prioriza hash: #tc=valor  ou #valor
        if (url.hash) {
          if (url.hash.startsWith("#tc=")) tc = url.hash.slice(4);
          else tc = url.hash.replace(/^#/, "");
        }

        // fallback para query params
        tc = tc || url.searchParams.get("tc") || url.searchParams.get("id") || url.searchParams.get("magia") || url.searchParams.get("passiva");

        if (tc) {
          e.preventDefault();          // n√£o recarrega a p√°gina
          tc = decodeURIComponent(tc);
          setHash(tc);                 // atualiza o hash da URL
          openById(tc);                // abre na hora
        }
      } catch (err) {
        console.error("TC: erro ao processar link:", err);
      }
    });
  });

  // Mudan√ßa manual no hash (voltar/avan√ßar)
  window.addEventListener("hashchange", syncFromURL);

  // API p√∫blica
  return { open, close, showDetail, hideDetail, toggleLearn, openById };
})();
</script>

          
<button id="openItemPopup" class="mochila-btn"></button>

<style>
  .mochila-btn {
    background-image: url('imagens/BotaoMochila.png'); /* nome da sua imagem PNG */
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    width: 200px;   /* ajuste conforme o tamanho real da imagem */
    height: 70px;

    border: none;
    padding: 0;
    margin: 0;
    cursor: pointer;
    background-color: transparent;
  }

  .mochila-btn:hover {
    filter: brightness(1.1);
    transform: scale(1.02);
  }

  .mochila-btn:active {
    filter: brightness(0.9);
    transform: scale(0.98);
  }
</style>
<!-- Visual do item equipado -->
<div id="equippedItemDisplay">
  <h4>Item Equipado:</h4>
  <div id="equippedItemSlot">

  </div>
</div>
<!-- Bot√£o para abrir o popup -->
<button id="openPopup">Abrir Rolagem de Dano</button>

<!-- Popup -->
<div id="dicePopup" class="popup">
  <div class="popup-content">
    <span class="close">&times;</span>
    <h2>Rolagem de Dano</h2>

    <div id="infoContainer">

    </div>

    <label>Digite sua f√≥rmula de dano:</label>
    <input type="text" id="diceInput" placeholder="ex: 2d8+1d6+4d12">
<button type="button" onclick="rollDice()">Rolar Dados</button>
<div id="modoRegraContainer">
  <button id="ativarRegraBtn">üé≤ Melhores/Piores</button>
  <button id="usarModificadorBtn">‚ûï Modificador</button>
</div>
    <div id="diceResultArea">
      <div id="diceGifContainer">
<img id="diceGif" src="" alt="Rolando..." style="display: none;" />
        <div id="diceOverlay"></div>
      </div>
      <div id="detailedResults"></div>
    </div>
  </div>
</div>
  
          <div class="form-row">
            <div class="form-group2">
              <label for="for">Brutalidade:</label>
              <input type="number" id="for" name="for" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>B√¥nus de Teste: <span id="for-bonus-test">0</span></span>
                <span>B√¥nus de Dano: <span id="for-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="des">Agilidade:</label>
              <input type="number" id="des" name="des" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>B√¥nus de Teste: <span id="des-bonus-test">0</span></span>
                <span>B√¥nus de Dano: <span id="des-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="con">Determina√ß√£o:</label>
              <input type="number" id="con" name="con" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>B√¥nus de Teste: <span id="con-bonus-test">0</span></span>
                <span>B√¥nus de Dano: <span id="con-bonus-damage">0</span></span>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group2">
              <label for="int">Preserva√ß√£o:</label>
              <input type="number" id="int" name="int" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>B√¥nus de Teste: <span id="int-bonus-test">0</span></span>
                <span>B√¥nus de Dano: <span id="int-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="sab">Liberta√ß√£o:</label>
              <input type="number" id="sab" name="sab" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>B√¥nus de Teste: <span id="sab-bonus-test">0</span></span>
                <span>B√¥nus de Dano: <span id="sab-bonus-damage">0</span></span>
              </div>
            </div>
            <div class="form-group2">
              <label for="car">Conex√£o:</label>
              <input type="number" id="car" name="car" min="8" max="99" value="14" required>
              <div class="bonus-group">
                <span>B√¥nus de Teste: <span id="car-bonus-test">0</span></span>
                <span>B√¥nus de Dano: <span id="car-bonus-damage">0</span></span>
              </div>
            </div>
          </div>
  
          <div class="ButonsSave">
            <form id="character-form">
                <div class="button-group">
                    <button type="submit">Salvar Personagem</button>
                    <button type="button" id="load-character">Carregar Personagem</button>
                </div>
                <!--<div class="button-group">
                    <button type="button" id="download-character">Salvar Personagem</button>
                    <input type="file" id="upload-character" accept=".json" style="display: none;">
                    <button type="button" id="load-file-character">Carregar Personagem de Arquivo</button>
                </div> -->
            </form>
        
            <div id="character-select-section" style="display: none;">
                <span id="close-select-section" class="close-button">X</span>
                <h2>Escolha seu Personagem</h2>
                <select id="character-select"></select>
                <button type="button" id="confirm-load">Carregar</button>
            </div>
        </div>

        <div id="save-message" style="display: none;"></div>

        <!-- gerar imagem-->
        
        
        
<!-- Habilita mapa interativo -->
<!-- Habilita mapa interativo -->
<!-- Habilita mapa interativo -->
<div id="mapa-interativo" style="width:100%;max-width:1000px;margin:auto;aspect-ratio:16/12;overflow:hidden;">
  <iframe 
    src="https://mapa-terras-de-calisto.netlify.app/" 
    width="100%" 
    height="100%" 
    style="border:none;border-radius:12px;touch-action:none;" 
    allowfullscreen>
  </iframe>
</div>

<style>
  /* Impede que a p√°gina role quando o dedo est√° sobre o iframe */
  #mapa-interativo {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }
</style>
<!-- isso aqui √© respons√°vel por espa√ßo no final do site-->
        <div style="height:clamp(10px,2.5vw,20px);width:100%;" aria-hidden="true"></div>




    <!-- gerar imagem-->

        <!-- gerar imagem-->
        
          
        
  
      <div id="character-view-section" style="display: none;">
        <h2>Seu Personagem</h2>
        <div id="character-details">
          <p>Nome: <span id="char-name-view"></span></p>
          <p>Ra√ßa: <span id="char-race-view"></span></p>
          <p>Passado: <span id="char-past-view"></span></p>
        </div>
      </div>
    </div>
    
    <div id="save-message" style="display: none; position: fixed; top: 10px; left: 10px; background-color: #4CAF50; color: white; padding: 10px; border-radius: 5px;"></div>
  </div>
  <script src="script.js"></script>
</body>
</html>









